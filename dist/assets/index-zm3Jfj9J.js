import{r as yy,g as Kc,a as fb,b as vy}from"./react-vendor-ByR4cYxz.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function i(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(l){if(l.ep)return;l.ep=!0;const r=i(l);fetch(l.href,r)}})();var fc={exports:{}},Ba={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gp;function hb(){if(gp)return Ba;gp=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,l,r){var c=null;if(r!==void 0&&(c=""+r),l.key!==void 0&&(c=""+l.key),"key"in l){r={};for(var h in l)h!=="key"&&(r[h]=l[h])}else r=l;return l=r.ref,{$$typeof:n,type:a,key:c,ref:l!==void 0?l:null,props:r}}return Ba.Fragment=e,Ba.jsx=i,Ba.jsxs=i,Ba}var yp;function mb(){return yp||(yp=1,fc.exports=hb()),fc.exports}var d=mb(),F=yy();const Ls=Kc(F);var hc={exports:{}},Va={},mc={exports:{}},pc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp;function pb(){return vp||(vp=1,(function(n){function e(B,J){var te=B.length;B.push(J);e:for(;0<te;){var Ne=te-1>>>1,Ie=B[Ne];if(0<l(Ie,J))B[Ne]=J,B[te]=Ie,te=Ne;else break e}}function i(B){return B.length===0?null:B[0]}function a(B){if(B.length===0)return null;var J=B[0],te=B.pop();if(te!==J){B[0]=te;e:for(var Ne=0,Ie=B.length,et=Ie>>>1;Ne<et;){var De=2*(Ne+1)-1,ye=B[De],Je=De+1,Se=B[Je];if(0>l(ye,te))Je<Ie&&0>l(Se,ye)?(B[Ne]=Se,B[Je]=te,Ne=Je):(B[Ne]=ye,B[De]=te,Ne=De);else if(Je<Ie&&0>l(Se,te))B[Ne]=Se,B[Je]=te,Ne=Je;else break e}}return J}function l(B,J){var te=B.sortIndex-J.sortIndex;return te!==0?te:B.id-J.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var y=[],g=[],x=1,b=null,w=3,S=!1,E=!1,C=!1,N=!1,M=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function q(B){for(var J=i(g);J!==null;){if(J.callback===null)a(g);else if(J.startTime<=B)a(g),J.sortIndex=J.expirationTime,e(y,J);else break;J=i(g)}}function z(B){if(C=!1,q(B),!E)if(i(y)!==null)E=!0,L||(L=!0,ce());else{var J=i(g);J!==null&&dt(z,J.startTime-B)}}var L=!1,$=-1,ie=5,X=-1;function he(){return N?!0:!(n.unstable_now()-X<ie)}function qe(){if(N=!1,L){var B=n.unstable_now();X=B;var J=!0;try{e:{E=!1,C&&(C=!1,D($),$=-1),S=!0;var te=w;try{t:{for(q(B),b=i(y);b!==null&&!(b.expirationTime>B&&he());){var Ne=b.callback;if(typeof Ne=="function"){b.callback=null,w=b.priorityLevel;var Ie=Ne(b.expirationTime<=B);if(B=n.unstable_now(),typeof Ie=="function"){b.callback=Ie,q(B),J=!0;break t}b===i(y)&&a(y),q(B)}else a(y);b=i(y)}if(b!==null)J=!0;else{var et=i(g);et!==null&&dt(z,et.startTime-B),J=!1}}break e}finally{b=null,w=te,S=!1}J=void 0}}finally{J?ce():L=!1}}}var ce;if(typeof k=="function")ce=function(){k(qe)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,Qt=Ze.port2;Ze.port1.onmessage=qe,ce=function(){Qt.postMessage(null)}}else ce=function(){M(qe,0)};function dt(B,J){$=M(function(){B(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B||(ie=0<B?Math.floor(1e3/B):5)},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(B){switch(w){case 1:case 2:case 3:var J=3;break;default:J=w}var te=w;w=J;try{return B()}finally{w=te}},n.unstable_requestPaint=function(){N=!0},n.unstable_runWithPriority=function(B,J){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var te=w;w=B;try{return J()}finally{w=te}},n.unstable_scheduleCallback=function(B,J,te){var Ne=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Ne+te:Ne):te=Ne,B){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=te+Ie,B={id:x++,callback:J,priorityLevel:B,startTime:te,expirationTime:Ie,sortIndex:-1},te>Ne?(B.sortIndex=te,e(g,B),i(y)===null&&B===i(g)&&(C?(D($),$=-1):C=!0,dt(z,te-Ne))):(B.sortIndex=Ie,e(y,B),E||S||(E=!0,L||(L=!0,ce()))),B},n.unstable_shouldYield=he,n.unstable_wrapCallback=function(B){var J=w;return function(){var te=w;w=J;try{return B.apply(this,arguments)}finally{w=te}}}})(pc)),pc}var xp;function gb(){return xp||(xp=1,mc.exports=pb()),mc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp;function yb(){if(bp)return Va;bp=1;var n=gb(),e=yy(),i=fb();function a(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function r(t){var s=t,o=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(o=s.return),t=s.return;while(t)}return s.tag===3?o:null}function c(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function h(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function y(t){if(r(t)!==t)throw Error(a(188))}function g(t){var s=t.alternate;if(!s){if(s=r(t),s===null)throw Error(a(188));return s!==t?null:t}for(var o=t,u=s;;){var m=o.return;if(m===null)break;var v=m.alternate;if(v===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===o)return y(m),t;if(v===u)return y(m),s;v=v.sibling}throw Error(a(188))}if(o.return!==u.return)o=m,u=v;else{for(var _=!1,T=m.child;T;){if(T===o){_=!0,o=m,u=v;break}if(T===u){_=!0,u=m,o=v;break}T=T.sibling}if(!_){for(T=v.child;T;){if(T===o){_=!0,o=v,u=m;break}if(T===u){_=!0,u=v,o=m;break}T=T.sibling}if(!_)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?t:s}function x(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=x(t),s!==null)return s;t=t.sibling}return null}var b=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),k=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),qe=Symbol.iterator;function ce(t){return t===null||typeof t!="object"?null:(t=qe&&t[qe]||t["@@iterator"],typeof t=="function"?t:null)}var Ze=Symbol.for("react.client.reference");function Qt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Ze?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case M:return"Profiler";case N:return"StrictMode";case z:return"Suspense";case L:return"SuspenseList";case X:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case E:return"Portal";case k:return t.displayName||"Context";case D:return(t._context.displayName||"Context")+".Consumer";case q:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $:return s=t.displayName||null,s!==null?s:Qt(t.type)||"Memo";case ie:s=t._payload,t=t._init;try{return Qt(t(s))}catch{}}return null}var dt=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},Ne=[],Ie=-1;function et(t){return{current:t}}function De(t){0>Ie||(t.current=Ne[Ie],Ne[Ie]=null,Ie--)}function ye(t,s){Ie++,Ne[Ie]=t.current,t.current=s}var Je=et(null),Se=et(null),Xt=et(null),Bi=et(null);function di(t,s){switch(ye(Xt,s),ye(Se,t),ye(Je,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?qm(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=qm(s),t=Bm(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}De(Je),ye(Je,t)}function In(){De(Je),De(Se),De(Xt)}function Js(t){t.memoizedState!==null&&ye(Bi,t);var s=Je.current,o=Bm(s,t.type);s!==o&&(ye(Se,t),ye(Je,o))}function Y(t){Se.current===t&&(De(Je),De(Se)),Bi.current===t&&(De(Bi),Oa._currentValue=te)}var ae,re;function Te(t){if(ae===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);ae=s&&s[1]||"",re=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ae+t+re}var Be=!1;function mt(t,s){if(!t||Be)return"";Be=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(P){var O=P}Reflect.construct(t,[],G)}else{try{G.call()}catch(P){O=P}t.call(G.prototype)}}else{try{throw Error()}catch(P){O=P}(G=t())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(P){if(P&&O&&typeof P.stack=="string")return[P.stack,O.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),_=v[0],T=v[1];if(_&&T){var A=_.split(`
`),j=T.split(`
`);for(m=u=0;u<A.length&&!A[u].includes("DetermineComponentFrameRoot");)u++;for(;m<j.length&&!j[m].includes("DetermineComponentFrameRoot");)m++;if(u===A.length||m===j.length)for(u=A.length-1,m=j.length-1;1<=u&&0<=m&&A[u]!==j[m];)m--;for(;1<=u&&0<=m;u--,m--)if(A[u]!==j[m]){if(u!==1||m!==1)do if(u--,m--,0>m||A[u]!==j[m]){var V=`
`+A[u].replace(" at new "," at ");return t.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",t.displayName)),V}while(1<=u&&0<=m);break}}}finally{Be=!1,Error.prepareStackTrace=o}return(o=t?t.displayName||t.name:"")?Te(o):""}function Gv(t,s){switch(t.tag){case 26:case 27:case 5:return Te(t.type);case 16:return Te("Lazy");case 13:return t.child!==s&&s!==null?Te("Suspense Fallback"):Te("Suspense");case 19:return Te("SuspenseList");case 0:case 15:return mt(t.type,!1);case 11:return mt(t.type.render,!1);case 1:return mt(t.type,!0);case 31:return Te("Activity");default:return""}}function pd(t){try{var s="",o=null;do s+=Gv(t,o),o=t,t=t.return;while(t);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Xl=Object.prototype.hasOwnProperty,Wl=n.unstable_scheduleCallback,Zl=n.unstable_cancelCallback,zv=n.unstable_shouldYield,Fv=n.unstable_requestPaint,Et=n.unstable_now,$v=n.unstable_getCurrentPriorityLevel,gd=n.unstable_ImmediatePriority,yd=n.unstable_UserBlockingPriority,io=n.unstable_NormalPriority,Jv=n.unstable_LowPriority,vd=n.unstable_IdlePriority,Yv=n.log,Kv=n.unstable_setDisableYieldValue,Ys=null,Ct=null;function kn(t){if(typeof Yv=="function"&&Kv(t),Ct&&typeof Ct.setStrictMode=="function")try{Ct.setStrictMode(Ys,t)}catch{}}var Nt=Math.clz32?Math.clz32:Wv,Qv=Math.log,Xv=Math.LN2;function Wv(t){return t>>>=0,t===0?32:31-(Qv(t)/Xv|0)|0}var so=256,ao=262144,oo=4194304;function fi(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function lo(t,s,o){var u=t.pendingLanes;if(u===0)return 0;var m=0,v=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var T=u&134217727;return T!==0?(u=T&~v,u!==0?m=fi(u):(_&=T,_!==0?m=fi(_):o||(o=T&~t,o!==0&&(m=fi(o))))):(T=u&~v,T!==0?m=fi(T):_!==0?m=fi(_):o||(o=u&~t,o!==0&&(m=fi(o)))),m===0?0:s!==0&&s!==m&&(s&v)===0&&(v=m&-m,o=s&-s,v>=o||v===32&&(o&4194048)!==0)?s:m}function Ks(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Zv(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xd(){var t=oo;return oo<<=1,(oo&62914560)===0&&(oo=4194304),t}function er(t){for(var s=[],o=0;31>o;o++)s.push(t);return s}function Qs(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function e0(t,s,o,u,m,v){var _=t.pendingLanes;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=o,t.entangledLanes&=o,t.errorRecoveryDisabledLanes&=o,t.shellSuspendCounter=0;var T=t.entanglements,A=t.expirationTimes,j=t.hiddenUpdates;for(o=_&~o;0<o;){var V=31-Nt(o),G=1<<V;T[V]=0,A[V]=-1;var O=j[V];if(O!==null)for(j[V]=null,V=0;V<O.length;V++){var P=O[V];P!==null&&(P.lane&=-536870913)}o&=~G}u!==0&&bd(t,u,0),v!==0&&m===0&&t.tag!==0&&(t.suspendedLanes|=v&~(_&~s))}function bd(t,s,o){t.pendingLanes|=s,t.suspendedLanes&=~s;var u=31-Nt(s);t.entangledLanes|=s,t.entanglements[u]=t.entanglements[u]|1073741824|o&261930}function wd(t,s){var o=t.entangledLanes|=s;for(t=t.entanglements;o;){var u=31-Nt(o),m=1<<u;m&s|t[u]&s&&(t[u]|=s),o&=~m}}function _d(t,s){var o=s&-s;return o=(o&42)!==0?1:tr(o),(o&(t.suspendedLanes|s))!==0?0:o}function tr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function nr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Sd(){var t=J.p;return t!==0?t:(t=window.event,t===void 0?32:up(t.type))}function Td(t,s){var o=J.p;try{return J.p=t,s()}finally{J.p=o}}var Dn=Math.random().toString(36).slice(2),at="__reactFiber$"+Dn,gt="__reactProps$"+Dn,Vi="__reactContainer$"+Dn,ir="__reactEvents$"+Dn,t0="__reactListeners$"+Dn,n0="__reactHandles$"+Dn,Ed="__reactResources$"+Dn,Xs="__reactMarker$"+Dn;function sr(t){delete t[at],delete t[gt],delete t[ir],delete t[t0],delete t[n0]}function Hi(t){var s=t[at];if(s)return s;for(var o=t.parentNode;o;){if(s=o[Vi]||o[at]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(t=Jm(t);t!==null;){if(o=t[at])return o;t=Jm(t)}return s}t=o,o=t.parentNode}return null}function Gi(t){if(t=t[at]||t[Vi]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Ws(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(a(33))}function zi(t){var s=t[Ed];return s||(s=t[Ed]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function it(t){t[Xs]=!0}var Cd=new Set,Nd={};function hi(t,s){Fi(t,s),Fi(t+"Capture",s)}function Fi(t,s){for(Nd[t]=s,t=0;t<s.length;t++)Cd.add(s[t])}var i0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ad={},Rd={};function s0(t){return Xl.call(Rd,t)?!0:Xl.call(Ad,t)?!1:i0.test(t)?Rd[t]=!0:(Ad[t]=!0,!1)}function ro(t,s,o){if(s0(s))if(o===null)t.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+o)}}function uo(t,s,o){if(o===null)t.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+o)}}function dn(t,s,o,u){if(u===null)t.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttributeNS(s,o,""+u)}}function Pt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Md(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function a0(t,s,o){var u=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,v=u.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return m.call(this)},set:function(_){o=""+_,v.call(this,_)}}),Object.defineProperty(t,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ar(t){if(!t._valueTracker){var s=Md(t)?"checked":"value";t._valueTracker=a0(t,s,""+t[s])}}function Id(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return t&&(u=Md(t)?t.checked?"true":"false":t.value),t=u,t!==o?(s.setValue(t),!0):!1}function co(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var o0=/[\n"\\]/g;function qt(t){return t.replace(o0,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function or(t,s,o,u,m,v,_,T){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),s!=null?_==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Pt(s)):t.value!==""+Pt(s)&&(t.value=""+Pt(s)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),s!=null?lr(t,_,Pt(s)):o!=null?lr(t,_,Pt(o)):u!=null&&t.removeAttribute("value"),m==null&&v!=null&&(t.defaultChecked=!!v),m!=null&&(t.checked=m&&typeof m!="function"&&typeof m!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Pt(T):t.removeAttribute("name")}function kd(t,s,o,u,m,v,_,T){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.type=v),s!=null||o!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){ar(t);return}o=o!=null?""+Pt(o):"",s=s!=null?""+Pt(s):o,T||s===t.value||(t.value=s),t.defaultValue=s}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=T?t.checked:!!u,t.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),ar(t)}function lr(t,s,o){s==="number"&&co(t.ownerDocument)===t||t.defaultValue===""+o||(t.defaultValue=""+o)}function $i(t,s,o,u){if(t=t.options,s){s={};for(var m=0;m<o.length;m++)s["$"+o[m]]=!0;for(o=0;o<t.length;o++)m=s.hasOwnProperty("$"+t[o].value),t[o].selected!==m&&(t[o].selected=m),m&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Pt(o),s=null,m=0;m<t.length;m++){if(t[m].value===o){t[m].selected=!0,u&&(t[m].defaultSelected=!0);return}s!==null||t[m].disabled||(s=t[m])}s!==null&&(s.selected=!0)}}function Dd(t,s,o){if(s!=null&&(s=""+Pt(s),s!==t.value&&(t.value=s),o==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=o!=null?""+Pt(o):""}function Ud(t,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(a(92));if(dt(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Pt(s),t.defaultValue=o,u=t.textContent,u===o&&u!==""&&u!==null&&(t.value=u),ar(t)}function Ji(t,s){if(s){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=s;return}}t.textContent=s}var l0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jd(t,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":u?t.setProperty(s,o):typeof o!="number"||o===0||l0.has(s)?s==="float"?t.cssFloat=o:t[s]=(""+o).trim():t[s]=o+"px"}function Od(t,s,o){if(s!=null&&typeof s!="object")throw Error(a(62));if(t=t.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var m in s)u=s[m],s.hasOwnProperty(m)&&o[m]!==u&&jd(t,m,u)}else for(var v in s)s.hasOwnProperty(v)&&jd(t,v,s[v])}function rr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var r0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),u0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fo(t){return u0.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function fn(){}var ur=null;function cr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yi=null,Ki=null;function Ld(t){var s=Gi(t);if(s&&(t=s.stateNode)){var o=t[gt]||null;e:switch(t=s.stateNode,s.type){case"input":if(or(t,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+qt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==t&&u.form===t.form){var m=u[gt]||null;if(!m)throw Error(a(90));or(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===t.form&&Id(u)}break e;case"textarea":Dd(t,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&$i(t,!!o.multiple,s,!1)}}}var dr=!1;function Pd(t,s,o){if(dr)return t(s,o);dr=!0;try{var u=t(s);return u}finally{if(dr=!1,(Yi!==null||Ki!==null)&&(Zo(),Yi&&(s=Yi,t=Ki,Ki=Yi=null,Ld(s),t)))for(s=0;s<t.length;s++)Ld(t[s])}}function Zs(t,s){var o=t.stateNode;if(o===null)return null;var u=o[gt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(a(231,s,typeof o));return o}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fr=!1;if(hn)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){fr=!0}}),window.addEventListener("test",ea,ea),window.removeEventListener("test",ea,ea)}catch{fr=!1}var Un=null,hr=null,ho=null;function qd(){if(ho)return ho;var t,s=hr,o=s.length,u,m="value"in Un?Un.value:Un.textContent,v=m.length;for(t=0;t<o&&s[t]===m[t];t++);var _=o-t;for(u=1;u<=_&&s[o-u]===m[v-u];u++);return ho=m.slice(t,1<u?1-u:void 0)}function mo(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function po(){return!0}function Bd(){return!1}function yt(t){function s(o,u,m,v,_){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=v,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?po:Bd,this.isPropagationStopped=Bd,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=po)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=po)},persist:function(){},isPersistent:po}),s}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},go=yt(mi),ta=b({},mi,{view:0,detail:0}),c0=yt(ta),mr,pr,na,yo=b({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==na&&(na&&t.type==="mousemove"?(mr=t.screenX-na.screenX,pr=t.screenY-na.screenY):pr=mr=0,na=t),mr)},movementY:function(t){return"movementY"in t?t.movementY:pr}}),Vd=yt(yo),d0=b({},yo,{dataTransfer:0}),f0=yt(d0),h0=b({},ta,{relatedTarget:0}),gr=yt(h0),m0=b({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),p0=yt(m0),g0=b({},mi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),y0=yt(g0),v0=b({},mi,{data:0}),Hd=yt(v0),x0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _0(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=w0[t])?!!s[t]:!1}function yr(){return _0}var S0=b({},ta,{key:function(t){if(t.key){var s=x0[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=mo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?b0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yr,charCode:function(t){return t.type==="keypress"?mo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),T0=yt(S0),E0=b({},yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gd=yt(E0),C0=b({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yr}),N0=yt(C0),A0=b({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),R0=yt(A0),M0=b({},yo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),I0=yt(M0),k0=b({},mi,{newState:0,oldState:0}),D0=yt(k0),U0=[9,13,27,32],vr=hn&&"CompositionEvent"in window,ia=null;hn&&"documentMode"in document&&(ia=document.documentMode);var j0=hn&&"TextEvent"in window&&!ia,zd=hn&&(!vr||ia&&8<ia&&11>=ia),Fd=" ",$d=!1;function Jd(t,s){switch(t){case"keyup":return U0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qi=!1;function O0(t,s){switch(t){case"compositionend":return Yd(s);case"keypress":return s.which!==32?null:($d=!0,Fd);case"textInput":return t=s.data,t===Fd&&$d?null:t;default:return null}}function L0(t,s){if(Qi)return t==="compositionend"||!vr&&Jd(t,s)?(t=qd(),ho=hr=Un=null,Qi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return zd&&s.locale!=="ko"?null:s.data;default:return null}}var P0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!P0[t.type]:s==="textarea"}function Qd(t,s,o,u){Yi?Ki?Ki.push(u):Ki=[u]:Yi=u,s=ol(s,"onChange"),0<s.length&&(o=new go("onChange","change",null,o,u),t.push({event:o,listeners:s}))}var sa=null,aa=null;function q0(t){Dm(t,0)}function vo(t){var s=Ws(t);if(Id(s))return t}function Xd(t,s){if(t==="change")return s}var Wd=!1;if(hn){var xr;if(hn){var br="oninput"in document;if(!br){var Zd=document.createElement("div");Zd.setAttribute("oninput","return;"),br=typeof Zd.oninput=="function"}xr=br}else xr=!1;Wd=xr&&(!document.documentMode||9<document.documentMode)}function ef(){sa&&(sa.detachEvent("onpropertychange",tf),aa=sa=null)}function tf(t){if(t.propertyName==="value"&&vo(aa)){var s=[];Qd(s,aa,t,cr(t)),Pd(q0,s)}}function B0(t,s,o){t==="focusin"?(ef(),sa=s,aa=o,sa.attachEvent("onpropertychange",tf)):t==="focusout"&&ef()}function V0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vo(aa)}function H0(t,s){if(t==="click")return vo(s)}function G0(t,s){if(t==="input"||t==="change")return vo(s)}function z0(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var At=typeof Object.is=="function"?Object.is:z0;function oa(t,s){if(At(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var o=Object.keys(t),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!Xl.call(s,m)||!At(t[m],s[m]))return!1}return!0}function nf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sf(t,s){var o=nf(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=s&&u>=s)return{node:o,offset:s-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=nf(o)}}function af(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?af(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function of(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=co(t.document);s instanceof t.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)t=s.contentWindow;else break;s=co(t.document)}return s}function wr(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var F0=hn&&"documentMode"in document&&11>=document.documentMode,Xi=null,_r=null,la=null,Sr=!1;function lf(t,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Sr||Xi==null||Xi!==co(u)||(u=Xi,"selectionStart"in u&&wr(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),la&&oa(la,u)||(la=u,u=ol(_r,"onSelect"),0<u.length&&(s=new go("onSelect","select",null,s,o),t.push({event:s,listeners:u}),s.target=Xi)))}function pi(t,s){var o={};return o[t.toLowerCase()]=s.toLowerCase(),o["Webkit"+t]="webkit"+s,o["Moz"+t]="moz"+s,o}var Wi={animationend:pi("Animation","AnimationEnd"),animationiteration:pi("Animation","AnimationIteration"),animationstart:pi("Animation","AnimationStart"),transitionrun:pi("Transition","TransitionRun"),transitionstart:pi("Transition","TransitionStart"),transitioncancel:pi("Transition","TransitionCancel"),transitionend:pi("Transition","TransitionEnd")},Tr={},rf={};hn&&(rf=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function gi(t){if(Tr[t])return Tr[t];if(!Wi[t])return t;var s=Wi[t],o;for(o in s)if(s.hasOwnProperty(o)&&o in rf)return Tr[t]=s[o];return t}var uf=gi("animationend"),cf=gi("animationiteration"),df=gi("animationstart"),$0=gi("transitionrun"),J0=gi("transitionstart"),Y0=gi("transitioncancel"),ff=gi("transitionend"),hf=new Map,Er="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Er.push("scrollEnd");function Wt(t,s){hf.set(t,s),hi(s,[t])}var xo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}},Bt=[],Zi=0,Cr=0;function bo(){for(var t=Zi,s=Cr=Zi=0;s<t;){var o=Bt[s];Bt[s++]=null;var u=Bt[s];Bt[s++]=null;var m=Bt[s];Bt[s++]=null;var v=Bt[s];if(Bt[s++]=null,u!==null&&m!==null){var _=u.pending;_===null?m.next=m:(m.next=_.next,_.next=m),u.pending=m}v!==0&&mf(o,m,v)}}function wo(t,s,o,u){Bt[Zi++]=t,Bt[Zi++]=s,Bt[Zi++]=o,Bt[Zi++]=u,Cr|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function Nr(t,s,o,u){return wo(t,s,o,u),_o(t)}function yi(t,s){return wo(t,null,null,s),_o(t)}function mf(t,s,o){t.lanes|=o;var u=t.alternate;u!==null&&(u.lanes|=o);for(var m=!1,v=t.return;v!==null;)v.childLanes|=o,u=v.alternate,u!==null&&(u.childLanes|=o),v.tag===22&&(t=v.stateNode,t===null||t._visibility&1||(m=!0)),t=v,v=v.return;return t.tag===3?(v=t.stateNode,m&&s!==null&&(m=31-Nt(o),t=v.hiddenUpdates,u=t[m],u===null?t[m]=[s]:u.push(s),s.lane=o|536870912),v):null}function _o(t){if(50<Ra)throw Ra=0,Ou=null,Error(a(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var es={};function K0(t,s,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(t,s,o,u){return new K0(t,s,o,u)}function Ar(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mn(t,s){var o=t.alternate;return o===null?(o=Rt(t.tag,s,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=s,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&65011712,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o.refCleanup=t.refCleanup,o}function pf(t,s){t.flags&=65011714;var o=t.alternate;return o===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=o.childLanes,t.lanes=o.lanes,t.child=o.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=o.memoizedProps,t.memoizedState=o.memoizedState,t.updateQueue=o.updateQueue,t.type=o.type,s=o.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function So(t,s,o,u,m,v){var _=0;if(u=t,typeof t=="function")Ar(t)&&(_=1);else if(typeof t=="string")_=eb(t,o,Je.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case X:return t=Rt(31,o,s,m),t.elementType=X,t.lanes=v,t;case C:return vi(o.children,m,v,s);case N:_=8,m|=24;break;case M:return t=Rt(12,o,s,m|2),t.elementType=M,t.lanes=v,t;case z:return t=Rt(13,o,s,m),t.elementType=z,t.lanes=v,t;case L:return t=Rt(19,o,s,m),t.elementType=L,t.lanes=v,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:_=10;break e;case D:_=9;break e;case q:_=11;break e;case $:_=14;break e;case ie:_=16,u=null;break e}_=29,o=Error(a(130,t===null?"null":typeof t,"")),u=null}return s=Rt(_,o,s,m),s.elementType=t,s.type=u,s.lanes=v,s}function vi(t,s,o,u){return t=Rt(7,t,u,s),t.lanes=o,t}function Rr(t,s,o){return t=Rt(6,t,null,s),t.lanes=o,t}function gf(t){var s=Rt(18,null,null,0);return s.stateNode=t,s}function Mr(t,s,o){return s=Rt(4,t.children!==null?t.children:[],t.key,s),s.lanes=o,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var yf=new WeakMap;function Vt(t,s){if(typeof t=="object"&&t!==null){var o=yf.get(t);return o!==void 0?o:(s={value:t,source:s,stack:pd(s)},yf.set(t,s),s)}return{value:t,source:s,stack:pd(s)}}var ts=[],ns=0,To=null,ra=0,Ht=[],Gt=0,jn=null,on=1,ln="";function pn(t,s){ts[ns++]=ra,ts[ns++]=To,To=t,ra=s}function vf(t,s,o){Ht[Gt++]=on,Ht[Gt++]=ln,Ht[Gt++]=jn,jn=t;var u=on;t=ln;var m=32-Nt(u)-1;u&=~(1<<m),o+=1;var v=32-Nt(s)+m;if(30<v){var _=m-m%5;v=(u&(1<<_)-1).toString(32),u>>=_,m-=_,on=1<<32-Nt(s)+m|o<<m|u,ln=v+t}else on=1<<v|o<<m|u,ln=t}function Ir(t){t.return!==null&&(pn(t,1),vf(t,1,0))}function kr(t){for(;t===To;)To=ts[--ns],ts[ns]=null,ra=ts[--ns],ts[ns]=null;for(;t===jn;)jn=Ht[--Gt],Ht[Gt]=null,ln=Ht[--Gt],Ht[Gt]=null,on=Ht[--Gt],Ht[Gt]=null}function xf(t,s){Ht[Gt++]=on,Ht[Gt++]=ln,Ht[Gt++]=jn,on=s.id,ln=s.overflow,jn=t}var ot=null,je=null,ge=!1,On=null,zt=!1,Dr=Error(a(519));function Ln(t){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ua(Vt(s,t)),Dr}function bf(t){var s=t.stateNode,o=t.type,u=t.memoizedProps;switch(s[at]=t,s[gt]=u,o){case"dialog":fe("cancel",s),fe("close",s);break;case"iframe":case"object":case"embed":fe("load",s);break;case"video":case"audio":for(o=0;o<Ia.length;o++)fe(Ia[o],s);break;case"source":fe("error",s);break;case"img":case"image":case"link":fe("error",s),fe("load",s);break;case"details":fe("toggle",s);break;case"input":fe("invalid",s),kd(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":fe("invalid",s);break;case"textarea":fe("invalid",s),Ud(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Lm(s.textContent,o)?(u.popover!=null&&(fe("beforetoggle",s),fe("toggle",s)),u.onScroll!=null&&fe("scroll",s),u.onScrollEnd!=null&&fe("scrollend",s),u.onClick!=null&&(s.onclick=fn),s=!0):s=!1,s||Ln(t,!0)}function wf(t){for(ot=t.return;ot;)switch(ot.tag){case 5:case 31:case 13:zt=!1;return;case 27:case 3:zt=!0;return;default:ot=ot.return}}function is(t){if(t!==ot)return!1;if(!ge)return wf(t),ge=!0,!1;var s=t.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=t.type,o=!(o!=="form"&&o!=="button")||Xu(t.type,t.memoizedProps)),o=!o),o&&je&&Ln(t),wf(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));je=$m(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));je=$m(t)}else s===27?(s=je,Xn(t.type)?(t=nc,nc=null,je=t):je=s):je=ot?$t(t.stateNode.nextSibling):null;return!0}function xi(){je=ot=null,ge=!1}function Ur(){var t=On;return t!==null&&(wt===null?wt=t:wt.push.apply(wt,t),On=null),t}function ua(t){On===null?On=[t]:On.push(t)}var jr=et(null),bi=null,gn=null;function Pn(t,s,o){ye(jr,s._currentValue),s._currentValue=o}function yn(t){t._currentValue=jr.current,De(jr)}function Or(t,s,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),t===o)break;t=t.return}}function Lr(t,s,o,u){var m=t.child;for(m!==null&&(m.return=t);m!==null;){var v=m.dependencies;if(v!==null){var _=m.child;v=v.firstContext;e:for(;v!==null;){var T=v;v=m;for(var A=0;A<s.length;A++)if(T.context===s[A]){v.lanes|=o,T=v.alternate,T!==null&&(T.lanes|=o),Or(v.return,o,t),u||(_=null);break e}v=T.next}}else if(m.tag===18){if(_=m.return,_===null)throw Error(a(341));_.lanes|=o,v=_.alternate,v!==null&&(v.lanes|=o),Or(_,o,t),_=null}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===t){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}}function ss(t,s,o,u){t=null;for(var m=s,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var _=m.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var T=m.type;At(m.pendingProps.value,_.value)||(t!==null?t.push(T):t=[T])}}else if(m===Bi.current){if(_=m.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(t!==null?t.push(Oa):t=[Oa])}m=m.return}t!==null&&Lr(s,t,o,u),s.flags|=262144}function Eo(t){for(t=t.firstContext;t!==null;){if(!At(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function wi(t){bi=t,gn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function lt(t){return _f(bi,t)}function Co(t,s){return bi===null&&wi(t),_f(t,s)}function _f(t,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},gn===null){if(t===null)throw Error(a(308));gn=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else gn=gn.next=s;return o}var Q0=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(o,u){t.push(u)}};this.abort=function(){s.aborted=!0,t.forEach(function(o){return o()})}},X0=n.unstable_scheduleCallback,W0=n.unstable_NormalPriority,Ye={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pr(){return{controller:new Q0,data:new Map,refCount:0}}function ca(t){t.refCount--,t.refCount===0&&X0(W0,function(){t.controller.abort()})}var da=null,qr=0,as=0,os=null;function Z0(t,s){if(da===null){var o=da=[];qr=0,as=Hu(),os={status:"pending",value:void 0,then:function(u){o.push(u)}}}return qr++,s.then(Sf,Sf),s}function Sf(){if(--qr===0&&da!==null){os!==null&&(os.status="fulfilled");var t=da;da=null,as=0,os=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function ex(t,s){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return t.then(function(){u.status="fulfilled",u.value=s;for(var m=0;m<o.length;m++)(0,o[m])(s)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var Tf=B.S;B.S=function(t,s){lm=Et(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Z0(t,s),Tf!==null&&Tf(t,s)};var _i=et(null);function Br(){var t=_i.current;return t!==null?t:ke.pooledCache}function No(t,s){s===null?ye(_i,_i.current):ye(_i,s.pool)}function Ef(){var t=Br();return t===null?null:{parent:Ye._currentValue,pool:t}}var ls=Error(a(460)),Vr=Error(a(474)),Ao=Error(a(542)),Ro={then:function(){}};function Cf(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Nf(t,s,o){switch(o=t[o],o===void 0?t.push(s):o!==s&&(s.then(fn,fn),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Rf(t),t;default:if(typeof s.status=="string")s.then(fn,fn);else{if(t=ke,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=s,t.status="pending",t.then(function(u){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=u}},function(u){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Rf(t),t}throw Ti=s,ls}}function Si(t){try{var s=t._init;return s(t._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ti=o,ls):o}}var Ti=null;function Af(){if(Ti===null)throw Error(a(459));var t=Ti;return Ti=null,t}function Rf(t){if(t===ls||t===Ao)throw Error(a(483))}var rs=null,fa=0;function Mo(t){var s=fa;return fa+=1,rs===null&&(rs=[]),Nf(rs,t,s)}function ha(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Io(t,s){throw s.$$typeof===w?Error(a(525)):(t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Mf(t){function s(I,R){if(t){var U=I.deletions;U===null?(I.deletions=[R],I.flags|=16):U.push(R)}}function o(I,R){if(!t)return null;for(;R!==null;)s(I,R),R=R.sibling;return null}function u(I){for(var R=new Map;I!==null;)I.key!==null?R.set(I.key,I):R.set(I.index,I),I=I.sibling;return R}function m(I,R){return I=mn(I,R),I.index=0,I.sibling=null,I}function v(I,R,U){return I.index=U,t?(U=I.alternate,U!==null?(U=U.index,U<R?(I.flags|=67108866,R):U):(I.flags|=67108866,R)):(I.flags|=1048576,R)}function _(I){return t&&I.alternate===null&&(I.flags|=67108866),I}function T(I,R,U,H){return R===null||R.tag!==6?(R=Rr(U,I.mode,H),R.return=I,R):(R=m(R,U),R.return=I,R)}function A(I,R,U,H){var ee=U.type;return ee===C?V(I,R,U.props.children,H,U.key):R!==null&&(R.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===ie&&Si(ee)===R.type)?(R=m(R,U.props),ha(R,U),R.return=I,R):(R=So(U.type,U.key,U.props,null,I.mode,H),ha(R,U),R.return=I,R)}function j(I,R,U,H){return R===null||R.tag!==4||R.stateNode.containerInfo!==U.containerInfo||R.stateNode.implementation!==U.implementation?(R=Mr(U,I.mode,H),R.return=I,R):(R=m(R,U.children||[]),R.return=I,R)}function V(I,R,U,H,ee){return R===null||R.tag!==7?(R=vi(U,I.mode,H,ee),R.return=I,R):(R=m(R,U),R.return=I,R)}function G(I,R,U){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=Rr(""+R,I.mode,U),R.return=I,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case S:return U=So(R.type,R.key,R.props,null,I.mode,U),ha(U,R),U.return=I,U;case E:return R=Mr(R,I.mode,U),R.return=I,R;case ie:return R=Si(R),G(I,R,U)}if(dt(R)||ce(R))return R=vi(R,I.mode,U,null),R.return=I,R;if(typeof R.then=="function")return G(I,Mo(R),U);if(R.$$typeof===k)return G(I,Co(I,R),U);Io(I,R)}return null}function O(I,R,U,H){var ee=R!==null?R.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ee!==null?null:T(I,R,""+U,H);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case S:return U.key===ee?A(I,R,U,H):null;case E:return U.key===ee?j(I,R,U,H):null;case ie:return U=Si(U),O(I,R,U,H)}if(dt(U)||ce(U))return ee!==null?null:V(I,R,U,H,null);if(typeof U.then=="function")return O(I,R,Mo(U),H);if(U.$$typeof===k)return O(I,R,Co(I,U),H);Io(I,U)}return null}function P(I,R,U,H,ee){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return I=I.get(U)||null,T(R,I,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case S:return I=I.get(H.key===null?U:H.key)||null,A(R,I,H,ee);case E:return I=I.get(H.key===null?U:H.key)||null,j(R,I,H,ee);case ie:return H=Si(H),P(I,R,U,H,ee)}if(dt(H)||ce(H))return I=I.get(U)||null,V(R,I,H,ee,null);if(typeof H.then=="function")return P(I,R,U,Mo(H),ee);if(H.$$typeof===k)return P(I,R,U,Co(R,H),ee);Io(R,H)}return null}function K(I,R,U,H){for(var ee=null,ve=null,W=R,ue=R=0,pe=null;W!==null&&ue<U.length;ue++){W.index>ue?(pe=W,W=null):pe=W.sibling;var xe=O(I,W,U[ue],H);if(xe===null){W===null&&(W=pe);break}t&&W&&xe.alternate===null&&s(I,W),R=v(xe,R,ue),ve===null?ee=xe:ve.sibling=xe,ve=xe,W=pe}if(ue===U.length)return o(I,W),ge&&pn(I,ue),ee;if(W===null){for(;ue<U.length;ue++)W=G(I,U[ue],H),W!==null&&(R=v(W,R,ue),ve===null?ee=W:ve.sibling=W,ve=W);return ge&&pn(I,ue),ee}for(W=u(W);ue<U.length;ue++)pe=P(W,I,ue,U[ue],H),pe!==null&&(t&&pe.alternate!==null&&W.delete(pe.key===null?ue:pe.key),R=v(pe,R,ue),ve===null?ee=pe:ve.sibling=pe,ve=pe);return t&&W.forEach(function(ni){return s(I,ni)}),ge&&pn(I,ue),ee}function se(I,R,U,H){if(U==null)throw Error(a(151));for(var ee=null,ve=null,W=R,ue=R=0,pe=null,xe=U.next();W!==null&&!xe.done;ue++,xe=U.next()){W.index>ue?(pe=W,W=null):pe=W.sibling;var ni=O(I,W,xe.value,H);if(ni===null){W===null&&(W=pe);break}t&&W&&ni.alternate===null&&s(I,W),R=v(ni,R,ue),ve===null?ee=ni:ve.sibling=ni,ve=ni,W=pe}if(xe.done)return o(I,W),ge&&pn(I,ue),ee;if(W===null){for(;!xe.done;ue++,xe=U.next())xe=G(I,xe.value,H),xe!==null&&(R=v(xe,R,ue),ve===null?ee=xe:ve.sibling=xe,ve=xe);return ge&&pn(I,ue),ee}for(W=u(W);!xe.done;ue++,xe=U.next())xe=P(W,I,ue,xe.value,H),xe!==null&&(t&&xe.alternate!==null&&W.delete(xe.key===null?ue:xe.key),R=v(xe,R,ue),ve===null?ee=xe:ve.sibling=xe,ve=xe);return t&&W.forEach(function(db){return s(I,db)}),ge&&pn(I,ue),ee}function Me(I,R,U,H){if(typeof U=="object"&&U!==null&&U.type===C&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case S:e:{for(var ee=U.key;R!==null;){if(R.key===ee){if(ee=U.type,ee===C){if(R.tag===7){o(I,R.sibling),H=m(R,U.props.children),H.return=I,I=H;break e}}else if(R.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===ie&&Si(ee)===R.type){o(I,R.sibling),H=m(R,U.props),ha(H,U),H.return=I,I=H;break e}o(I,R);break}else s(I,R);R=R.sibling}U.type===C?(H=vi(U.props.children,I.mode,H,U.key),H.return=I,I=H):(H=So(U.type,U.key,U.props,null,I.mode,H),ha(H,U),H.return=I,I=H)}return _(I);case E:e:{for(ee=U.key;R!==null;){if(R.key===ee)if(R.tag===4&&R.stateNode.containerInfo===U.containerInfo&&R.stateNode.implementation===U.implementation){o(I,R.sibling),H=m(R,U.children||[]),H.return=I,I=H;break e}else{o(I,R);break}else s(I,R);R=R.sibling}H=Mr(U,I.mode,H),H.return=I,I=H}return _(I);case ie:return U=Si(U),Me(I,R,U,H)}if(dt(U))return K(I,R,U,H);if(ce(U)){if(ee=ce(U),typeof ee!="function")throw Error(a(150));return U=ee.call(U),se(I,R,U,H)}if(typeof U.then=="function")return Me(I,R,Mo(U),H);if(U.$$typeof===k)return Me(I,R,Co(I,U),H);Io(I,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,R!==null&&R.tag===6?(o(I,R.sibling),H=m(R,U),H.return=I,I=H):(o(I,R),H=Rr(U,I.mode,H),H.return=I,I=H),_(I)):o(I,R)}return function(I,R,U,H){try{fa=0;var ee=Me(I,R,U,H);return rs=null,ee}catch(W){if(W===ls||W===Ao)throw W;var ve=Rt(29,W,null,I.mode);return ve.lanes=H,ve.return=I,ve}finally{}}}var Ei=Mf(!0),If=Mf(!1),qn=!1;function Hr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gr(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Bn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Vn(t,s,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(we&2)!==0){var m=u.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),u.pending=s,s=_o(t),mf(t,null,o),s}return wo(t,u,s,o),_o(t)}function ma(t,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=t.pendingLanes,o|=u,s.lanes=o,wd(t,o)}}function zr(t,s){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};v===null?m=v=_:v=v.next=_,o=o.next}while(o!==null);v===null?m=v=s:v=v.next=s}else m=v=s;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=s:t.next=s,o.lastBaseUpdate=s}var Fr=!1;function pa(){if(Fr){var t=os;if(t!==null)throw t}}function ga(t,s,o,u){Fr=!1;var m=t.updateQueue;qn=!1;var v=m.firstBaseUpdate,_=m.lastBaseUpdate,T=m.shared.pending;if(T!==null){m.shared.pending=null;var A=T,j=A.next;A.next=null,_===null?v=j:_.next=j,_=A;var V=t.alternate;V!==null&&(V=V.updateQueue,T=V.lastBaseUpdate,T!==_&&(T===null?V.firstBaseUpdate=j:T.next=j,V.lastBaseUpdate=A))}if(v!==null){var G=m.baseState;_=0,V=j=A=null,T=v;do{var O=T.lane&-536870913,P=O!==T.lane;if(P?(me&O)===O:(u&O)===O){O!==0&&O===as&&(Fr=!0),V!==null&&(V=V.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var K=t,se=T;O=s;var Me=o;switch(se.tag){case 1:if(K=se.payload,typeof K=="function"){G=K.call(Me,G,O);break e}G=K;break e;case 3:K.flags=K.flags&-65537|128;case 0:if(K=se.payload,O=typeof K=="function"?K.call(Me,G,O):K,O==null)break e;G=b({},G,O);break e;case 2:qn=!0}}O=T.callback,O!==null&&(t.flags|=64,P&&(t.flags|=8192),P=m.callbacks,P===null?m.callbacks=[O]:P.push(O))}else P={lane:O,tag:T.tag,payload:T.payload,callback:T.callback,next:null},V===null?(j=V=P,A=G):V=V.next=P,_|=O;if(T=T.next,T===null){if(T=m.shared.pending,T===null)break;P=T,T=P.next,P.next=null,m.lastBaseUpdate=P,m.shared.pending=null}}while(!0);V===null&&(A=G),m.baseState=A,m.firstBaseUpdate=j,m.lastBaseUpdate=V,v===null&&(m.shared.lanes=0),$n|=_,t.lanes=_,t.memoizedState=G}}function kf(t,s){if(typeof t!="function")throw Error(a(191,t));t.call(s)}function Df(t,s){var o=t.callbacks;if(o!==null)for(t.callbacks=null,t=0;t<o.length;t++)kf(o[t],s)}var us=et(null),ko=et(0);function Uf(t,s){t=Cn,ye(ko,t),ye(us,s),Cn=t|s.baseLanes}function $r(){ye(ko,Cn),ye(us,us.current)}function Jr(){Cn=ko.current,De(us),De(ko)}var Mt=et(null),Ft=null;function Hn(t){var s=t.alternate;ye(ze,ze.current&1),ye(Mt,t),Ft===null&&(s===null||us.current!==null||s.memoizedState!==null)&&(Ft=t)}function Yr(t){ye(ze,ze.current),ye(Mt,t),Ft===null&&(Ft=t)}function jf(t){t.tag===22?(ye(ze,ze.current),ye(Mt,t),Ft===null&&(Ft=t)):Gn()}function Gn(){ye(ze,ze.current),ye(Mt,Mt.current)}function It(t){De(Mt),Ft===t&&(Ft=null),De(ze)}var ze=et(0);function Do(t){for(var s=t;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||ec(o)||tc(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var vn=0,le=null,Ae=null,Ke=null,Uo=!1,cs=!1,Ci=!1,jo=0,ya=0,ds=null,tx=0;function He(){throw Error(a(321))}function Kr(t,s){if(s===null)return!1;for(var o=0;o<s.length&&o<t.length;o++)if(!At(t[o],s[o]))return!1;return!0}function Qr(t,s,o,u,m,v){return vn=v,le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,B.H=t===null||t.memoizedState===null?vh:du,Ci=!1,v=o(u,m),Ci=!1,cs&&(v=Lf(s,o,u,m)),Of(t),v}function Of(t){B.H=ba;var s=Ae!==null&&Ae.next!==null;if(vn=0,Ke=Ae=le=null,Uo=!1,ya=0,ds=null,s)throw Error(a(300));t===null||Qe||(t=t.dependencies,t!==null&&Eo(t)&&(Qe=!0))}function Lf(t,s,o,u){le=t;var m=0;do{if(cs&&(ds=null),ya=0,cs=!1,25<=m)throw Error(a(301));if(m+=1,Ke=Ae=null,t.updateQueue!=null){var v=t.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}B.H=xh,v=s(o,u)}while(cs);return v}function nx(){var t=B.H,s=t.useState()[0];return s=typeof s.then=="function"?va(s):s,t=t.useState()[0],(Ae!==null?Ae.memoizedState:null)!==t&&(le.flags|=1024),s}function Xr(){var t=jo!==0;return jo=0,t}function Wr(t,s,o){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~o}function Zr(t){if(Uo){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Uo=!1}vn=0,Ke=Ae=le=null,cs=!1,ya=jo=0,ds=null}function pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?le.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Fe(){if(Ae===null){var t=le.alternate;t=t!==null?t.memoizedState:null}else t=Ae.next;var s=Ke===null?le.memoizedState:Ke.next;if(s!==null)Ke=s,Ae=t;else{if(t===null)throw le.alternate===null?Error(a(467)):Error(a(310));Ae=t,t={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},Ke===null?le.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function Oo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function va(t){var s=ya;return ya+=1,ds===null&&(ds=[]),t=Nf(ds,t,s),s=le,(Ke===null?s.memoizedState:Ke.next)===null&&(s=s.alternate,B.H=s===null||s.memoizedState===null?vh:du),t}function Lo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return va(t);if(t.$$typeof===k)return lt(t)}throw Error(a(438,String(t)))}function eu(t){var s=null,o=le.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=le.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Oo(),le.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(t),u=0;u<t;u++)o[u]=he;return s.index++,o}function xn(t,s){return typeof s=="function"?s(t):s}function Po(t){var s=Fe();return tu(s,Ae,t)}function tu(t,s,o){var u=t.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var m=t.baseQueue,v=u.pending;if(v!==null){if(m!==null){var _=m.next;m.next=v.next,v.next=_}s.baseQueue=m=v,u.pending=null}if(v=t.baseState,m===null)t.memoizedState=v;else{s=m.next;var T=_=null,A=null,j=s,V=!1;do{var G=j.lane&-536870913;if(G!==j.lane?(me&G)===G:(vn&G)===G){var O=j.revertLane;if(O===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),G===as&&(V=!0);else if((vn&O)===O){j=j.next,O===as&&(V=!0);continue}else G={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},A===null?(T=A=G,_=v):A=A.next=G,le.lanes|=O,$n|=O;G=j.action,Ci&&o(v,G),v=j.hasEagerState?j.eagerState:o(v,G)}else O={lane:G,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},A===null?(T=A=O,_=v):A=A.next=O,le.lanes|=G,$n|=G;j=j.next}while(j!==null&&j!==s);if(A===null?_=v:A.next=T,!At(v,t.memoizedState)&&(Qe=!0,V&&(o=os,o!==null)))throw o;t.memoizedState=v,t.baseState=_,t.baseQueue=A,u.lastRenderedState=v}return m===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function nu(t){var s=Fe(),o=s.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=t;var u=o.dispatch,m=o.pending,v=s.memoizedState;if(m!==null){o.pending=null;var _=m=m.next;do v=t(v,_.action),_=_.next;while(_!==m);At(v,s.memoizedState)||(Qe=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),o.lastRenderedState=v}return[v,u]}function Pf(t,s,o){var u=le,m=Fe(),v=ge;if(v){if(o===void 0)throw Error(a(407));o=o()}else o=s();var _=!At((Ae||m).memoizedState,o);if(_&&(m.memoizedState=o,Qe=!0),m=m.queue,au(Vf.bind(null,u,m,t),[t]),m.getSnapshot!==s||_||Ke!==null&&Ke.memoizedState.tag&1){if(u.flags|=2048,fs(9,{destroy:void 0},Bf.bind(null,u,m,o,s),null),ke===null)throw Error(a(349));v||(vn&127)!==0||qf(u,s,o)}return o}function qf(t,s,o){t.flags|=16384,t={getSnapshot:s,value:o},s=le.updateQueue,s===null?(s=Oo(),le.updateQueue=s,s.stores=[t]):(o=s.stores,o===null?s.stores=[t]:o.push(t))}function Bf(t,s,o,u){s.value=o,s.getSnapshot=u,Hf(s)&&Gf(t)}function Vf(t,s,o){return o(function(){Hf(s)&&Gf(t)})}function Hf(t){var s=t.getSnapshot;t=t.value;try{var o=s();return!At(t,o)}catch{return!0}}function Gf(t){var s=yi(t,2);s!==null&&_t(s,t,2)}function iu(t){var s=pt();if(typeof t=="function"){var o=t;if(t=o(),Ci){kn(!0);try{o()}finally{kn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xn,lastRenderedState:t},s}function zf(t,s,o,u){return t.baseState=o,tu(t,Ae,typeof u=="function"?u:xn)}function ix(t,s,o,u,m){if(Vo(t))throw Error(a(485));if(t=s.action,t!==null){var v={payload:m,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){v.listeners.push(_)}};B.T!==null?o(!0):v.isTransition=!1,u(v),o=s.pending,o===null?(v.next=s.pending=v,Ff(s,v)):(v.next=o.next,s.pending=o.next=v)}}function Ff(t,s){var o=s.action,u=s.payload,m=t.state;if(s.isTransition){var v=B.T,_={};B.T=_;try{var T=o(m,u),A=B.S;A!==null&&A(_,T),$f(t,s,T)}catch(j){su(t,s,j)}finally{v!==null&&_.types!==null&&(v.types=_.types),B.T=v}}else try{v=o(m,u),$f(t,s,v)}catch(j){su(t,s,j)}}function $f(t,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Jf(t,s,u)},function(u){return su(t,s,u)}):Jf(t,s,o)}function Jf(t,s,o){s.status="fulfilled",s.value=o,Yf(s),t.state=o,s=t.pending,s!==null&&(o=s.next,o===s?t.pending=null:(o=o.next,s.next=o,Ff(t,o)))}function su(t,s,o){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Yf(s),s=s.next;while(s!==u)}t.action=null}function Yf(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Kf(t,s){return s}function Qf(t,s){if(ge){var o=ke.formState;if(o!==null){e:{var u=le;if(ge){if(je){t:{for(var m=je,v=zt;m.nodeType!==8;){if(!v){m=null;break t}if(m=$t(m.nextSibling),m===null){m=null;break t}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){je=$t(m.nextSibling),u=m.data==="F!";break e}}Ln(u)}u=!1}u&&(s=o[0])}}return o=pt(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kf,lastRenderedState:s},o.queue=u,o=ph.bind(null,le,u),u.dispatch=o,u=iu(!1),v=cu.bind(null,le,!1,u.queue),u=pt(),m={state:s,dispatch:null,action:t,pending:null},u.queue=m,o=ix.bind(null,le,m,v,o),m.dispatch=o,u.memoizedState=t,[s,o,!1]}function Xf(t){var s=Fe();return Wf(s,Ae,t)}function Wf(t,s,o){if(s=tu(t,s,Kf)[0],t=Po(xn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=va(s)}catch(_){throw _===ls?Ao:_}else u=s;s=Fe();var m=s.queue,v=m.dispatch;return o!==s.memoizedState&&(le.flags|=2048,fs(9,{destroy:void 0},sx.bind(null,m,o),null)),[u,v,t]}function sx(t,s){t.action=s}function Zf(t){var s=Fe(),o=Ae;if(o!==null)return Wf(s,o,t);Fe(),s=s.memoizedState,o=Fe();var u=o.queue.dispatch;return o.memoizedState=t,[s,u,!1]}function fs(t,s,o,u){return t={tag:t,create:o,deps:u,inst:s,next:null},s=le.updateQueue,s===null&&(s=Oo(),le.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,s.lastEffect=t),t}function eh(){return Fe().memoizedState}function qo(t,s,o,u){var m=pt();le.flags|=t,m.memoizedState=fs(1|s,{destroy:void 0},o,u===void 0?null:u)}function Bo(t,s,o,u){var m=Fe();u=u===void 0?null:u;var v=m.memoizedState.inst;Ae!==null&&u!==null&&Kr(u,Ae.memoizedState.deps)?m.memoizedState=fs(s,v,o,u):(le.flags|=t,m.memoizedState=fs(1|s,v,o,u))}function th(t,s){qo(8390656,8,t,s)}function au(t,s){Bo(2048,8,t,s)}function ax(t){le.flags|=4;var s=le.updateQueue;if(s===null)s=Oo(),le.updateQueue=s,s.events=[t];else{var o=s.events;o===null?s.events=[t]:o.push(t)}}function nh(t){var s=Fe().memoizedState;return ax({ref:s,nextImpl:t}),function(){if((we&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function ih(t,s){return Bo(4,2,t,s)}function sh(t,s){return Bo(4,4,t,s)}function ah(t,s){if(typeof s=="function"){t=t();var o=s(t);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function oh(t,s,o){o=o!=null?o.concat([t]):null,Bo(4,4,ah.bind(null,s,t),o)}function ou(){}function lh(t,s){var o=Fe();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Kr(s,u[1])?u[0]:(o.memoizedState=[t,s],t)}function rh(t,s){var o=Fe();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Kr(s,u[1]))return u[0];if(u=t(),Ci){kn(!0);try{t()}finally{kn(!1)}}return o.memoizedState=[u,s],u}function lu(t,s,o){return o===void 0||(vn&1073741824)!==0&&(me&261930)===0?t.memoizedState=s:(t.memoizedState=o,t=um(),le.lanes|=t,$n|=t,o)}function uh(t,s,o,u){return At(o,s)?o:us.current!==null?(t=lu(t,o,u),At(t,s)||(Qe=!0),t):(vn&42)===0||(vn&1073741824)!==0&&(me&261930)===0?(Qe=!0,t.memoizedState=o):(t=um(),le.lanes|=t,$n|=t,s)}function ch(t,s,o,u,m){var v=J.p;J.p=v!==0&&8>v?v:8;var _=B.T,T={};B.T=T,cu(t,!1,s,o);try{var A=m(),j=B.S;if(j!==null&&j(T,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var V=ex(A,u);xa(t,s,V,Ut(t))}else xa(t,s,u,Ut(t))}catch(G){xa(t,s,{then:function(){},status:"rejected",reason:G},Ut())}finally{J.p=v,_!==null&&T.types!==null&&(_.types=T.types),B.T=_}}function ox(){}function ru(t,s,o,u){if(t.tag!==5)throw Error(a(476));var m=dh(t).queue;ch(t,m,s,te,o===null?ox:function(){return fh(t),o(u)})}function dh(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xn,lastRenderedState:te},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xn,lastRenderedState:o},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function fh(t){var s=dh(t);s.next===null&&(s=t.alternate.memoizedState),xa(t,s.next.queue,{},Ut())}function uu(){return lt(Oa)}function hh(){return Fe().memoizedState}function mh(){return Fe().memoizedState}function lx(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var o=Ut();t=Bn(o);var u=Vn(s,t,o);u!==null&&(_t(u,s,o),ma(u,s,o)),s={cache:Pr()},t.payload=s;return}s=s.return}}function rx(t,s,o){var u=Ut();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Vo(t)?gh(s,o):(o=Nr(t,s,o,u),o!==null&&(_t(o,t,u),yh(o,s,u)))}function ph(t,s,o){var u=Ut();xa(t,s,o,u)}function xa(t,s,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Vo(t))gh(s,m);else{var v=t.alternate;if(t.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var _=s.lastRenderedState,T=v(_,o);if(m.hasEagerState=!0,m.eagerState=T,At(T,_))return wo(t,s,m,0),ke===null&&bo(),!1}catch{}finally{}if(o=Nr(t,s,m,u),o!==null)return _t(o,t,u),yh(o,s,u),!0}return!1}function cu(t,s,o,u){if(u={lane:2,revertLane:Hu(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Vo(t)){if(s)throw Error(a(479))}else s=Nr(t,o,u,2),s!==null&&_t(s,t,2)}function Vo(t){var s=t.alternate;return t===le||s!==null&&s===le}function gh(t,s){cs=Uo=!0;var o=t.pending;o===null?s.next=s:(s.next=o.next,o.next=s),t.pending=s}function yh(t,s,o){if((o&4194048)!==0){var u=s.lanes;u&=t.pendingLanes,o|=u,s.lanes=o,wd(t,o)}}var ba={readContext:lt,use:Lo,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useLayoutEffect:He,useInsertionEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useSyncExternalStore:He,useId:He,useHostTransitionStatus:He,useFormState:He,useActionState:He,useOptimistic:He,useMemoCache:He,useCacheRefresh:He};ba.useEffectEvent=He;var vh={readContext:lt,use:Lo,useCallback:function(t,s){return pt().memoizedState=[t,s===void 0?null:s],t},useContext:lt,useEffect:th,useImperativeHandle:function(t,s,o){o=o!=null?o.concat([t]):null,qo(4194308,4,ah.bind(null,s,t),o)},useLayoutEffect:function(t,s){return qo(4194308,4,t,s)},useInsertionEffect:function(t,s){qo(4,2,t,s)},useMemo:function(t,s){var o=pt();s=s===void 0?null:s;var u=t();if(Ci){kn(!0);try{t()}finally{kn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(t,s,o){var u=pt();if(o!==void 0){var m=o(s);if(Ci){kn(!0);try{o(s)}finally{kn(!1)}}}else m=s;return u.memoizedState=u.baseState=m,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:m},u.queue=t,t=t.dispatch=rx.bind(null,le,t),[u.memoizedState,t]},useRef:function(t){var s=pt();return t={current:t},s.memoizedState=t},useState:function(t){t=iu(t);var s=t.queue,o=ph.bind(null,le,s);return s.dispatch=o,[t.memoizedState,o]},useDebugValue:ou,useDeferredValue:function(t,s){var o=pt();return lu(o,t,s)},useTransition:function(){var t=iu(!1);return t=ch.bind(null,le,t.queue,!0,!1),pt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,o){var u=le,m=pt();if(ge){if(o===void 0)throw Error(a(407));o=o()}else{if(o=s(),ke===null)throw Error(a(349));(me&127)!==0||qf(u,s,o)}m.memoizedState=o;var v={value:o,getSnapshot:s};return m.queue=v,th(Vf.bind(null,u,v,t),[t]),u.flags|=2048,fs(9,{destroy:void 0},Bf.bind(null,u,v,o,s),null),o},useId:function(){var t=pt(),s=ke.identifierPrefix;if(ge){var o=ln,u=on;o=(u&~(1<<32-Nt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=jo++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=tx++,s="_"+s+"r_"+o.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:uu,useFormState:Qf,useActionState:Qf,useOptimistic:function(t){var s=pt();s.memoizedState=s.baseState=t;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=cu.bind(null,le,!0,o),o.dispatch=s,[t,s]},useMemoCache:eu,useCacheRefresh:function(){return pt().memoizedState=lx.bind(null,le)},useEffectEvent:function(t){var s=pt(),o={impl:t};return s.memoizedState=o,function(){if((we&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},du={readContext:lt,use:Lo,useCallback:lh,useContext:lt,useEffect:au,useImperativeHandle:oh,useInsertionEffect:ih,useLayoutEffect:sh,useMemo:rh,useReducer:Po,useRef:eh,useState:function(){return Po(xn)},useDebugValue:ou,useDeferredValue:function(t,s){var o=Fe();return uh(o,Ae.memoizedState,t,s)},useTransition:function(){var t=Po(xn)[0],s=Fe().memoizedState;return[typeof t=="boolean"?t:va(t),s]},useSyncExternalStore:Pf,useId:hh,useHostTransitionStatus:uu,useFormState:Xf,useActionState:Xf,useOptimistic:function(t,s){var o=Fe();return zf(o,Ae,t,s)},useMemoCache:eu,useCacheRefresh:mh};du.useEffectEvent=nh;var xh={readContext:lt,use:Lo,useCallback:lh,useContext:lt,useEffect:au,useImperativeHandle:oh,useInsertionEffect:ih,useLayoutEffect:sh,useMemo:rh,useReducer:nu,useRef:eh,useState:function(){return nu(xn)},useDebugValue:ou,useDeferredValue:function(t,s){var o=Fe();return Ae===null?lu(o,t,s):uh(o,Ae.memoizedState,t,s)},useTransition:function(){var t=nu(xn)[0],s=Fe().memoizedState;return[typeof t=="boolean"?t:va(t),s]},useSyncExternalStore:Pf,useId:hh,useHostTransitionStatus:uu,useFormState:Zf,useActionState:Zf,useOptimistic:function(t,s){var o=Fe();return Ae!==null?zf(o,Ae,t,s):(o.baseState=t,[t,o.queue.dispatch])},useMemoCache:eu,useCacheRefresh:mh};xh.useEffectEvent=nh;function fu(t,s,o,u){s=t.memoizedState,o=o(u,s),o=o==null?s:b({},s,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var hu={enqueueSetState:function(t,s,o){t=t._reactInternals;var u=Ut(),m=Bn(u);m.payload=s,o!=null&&(m.callback=o),s=Vn(t,m,u),s!==null&&(_t(s,t,u),ma(s,t,u))},enqueueReplaceState:function(t,s,o){t=t._reactInternals;var u=Ut(),m=Bn(u);m.tag=1,m.payload=s,o!=null&&(m.callback=o),s=Vn(t,m,u),s!==null&&(_t(s,t,u),ma(s,t,u))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var o=Ut(),u=Bn(o);u.tag=2,s!=null&&(u.callback=s),s=Vn(t,u,o),s!==null&&(_t(s,t,o),ma(s,t,o))}};function bh(t,s,o,u,m,v,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,v,_):s.prototype&&s.prototype.isPureReactComponent?!oa(o,u)||!oa(m,v):!0}function wh(t,s,o,u){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==t&&hu.enqueueReplaceState(s,s.state,null)}function Ni(t,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(t=t.defaultProps){o===s&&(o=b({},o));for(var m in t)o[m]===void 0&&(o[m]=t[m])}return o}function _h(t){xo(t)}function Sh(t){}function Th(t){xo(t)}function Ho(t,s){try{var o=t.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Eh(t,s,o){try{var u=t.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function mu(t,s,o){return o=Bn(o),o.tag=3,o.payload={element:null},o.callback=function(){Ho(t,s)},o}function Ch(t){return t=Bn(t),t.tag=3,t}function Nh(t,s,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var v=u.value;t.payload=function(){return m(v)},t.callback=function(){Eh(s,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Eh(s,o,u),typeof m!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function ux(t,s,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&ss(s,o,m,!0),o=Mt.current,o!==null){switch(o.tag){case 31:case 13:return Ft===null?el():o.alternate===null&&Ge===0&&(Ge=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===Ro?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),qu(t,u,m)),!1;case 22:return o.flags|=65536,u===Ro?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),qu(t,u,m)),!1}throw Error(a(435,o.tag))}return qu(t,u,m),el(),!1}if(ge)return s=Mt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,u!==Dr&&(t=Error(a(422),{cause:u}),ua(Vt(t,o)))):(u!==Dr&&(s=Error(a(423),{cause:u}),ua(Vt(s,o))),t=t.current.alternate,t.flags|=65536,m&=-m,t.lanes|=m,u=Vt(u,o),m=mu(t.stateNode,u,m),zr(t,m),Ge!==4&&(Ge=2)),!1;var v=Error(a(520),{cause:u});if(v=Vt(v,o),Aa===null?Aa=[v]:Aa.push(v),Ge!==4&&(Ge=2),s===null)return!0;u=Vt(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,t=m&-m,o.lanes|=t,t=mu(o.stateNode,u,t),zr(o,t),!1;case 1:if(s=o.type,v=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Jn===null||!Jn.has(v))))return o.flags|=65536,m&=-m,o.lanes|=m,m=Ch(m),Nh(m,t,o,u),zr(o,m),!1}o=o.return}while(o!==null);return!1}var pu=Error(a(461)),Qe=!1;function rt(t,s,o,u){s.child=t===null?If(s,null,o,u):Ei(s,t.child,o,u)}function Ah(t,s,o,u,m){o=o.render;var v=s.ref;if("ref"in u){var _={};for(var T in u)T!=="ref"&&(_[T]=u[T])}else _=u;return wi(s),u=Qr(t,s,o,_,v,m),T=Xr(),t!==null&&!Qe?(Wr(t,s,m),bn(t,s,m)):(ge&&T&&Ir(s),s.flags|=1,rt(t,s,u,m),s.child)}function Rh(t,s,o,u,m){if(t===null){var v=o.type;return typeof v=="function"&&!Ar(v)&&v.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=v,Mh(t,s,v,u,m)):(t=So(o.type,null,u,s,s.mode,m),t.ref=s.ref,t.return=s,s.child=t)}if(v=t.child,!Su(t,m)){var _=v.memoizedProps;if(o=o.compare,o=o!==null?o:oa,o(_,u)&&t.ref===s.ref)return bn(t,s,m)}return s.flags|=1,t=mn(v,u),t.ref=s.ref,t.return=s,s.child=t}function Mh(t,s,o,u,m){if(t!==null){var v=t.memoizedProps;if(oa(v,u)&&t.ref===s.ref)if(Qe=!1,s.pendingProps=u=v,Su(t,m))(t.flags&131072)!==0&&(Qe=!0);else return s.lanes=t.lanes,bn(t,s,m)}return gu(t,s,o,u,m)}function Ih(t,s,o,u){var m=u.children,v=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|o:o,t!==null){for(u=s.child=t.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~v}else u=0,s.child=null;return kh(t,s,v,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&No(s,v!==null?v.cachePool:null),v!==null?Uf(s,v):$r(),jf(s);else return u=s.lanes=536870912,kh(t,s,v!==null?v.baseLanes|o:o,o,u)}else v!==null?(No(s,v.cachePool),Uf(s,v),Gn(),s.memoizedState=null):(t!==null&&No(s,null),$r(),Gn());return rt(t,s,m,o),s.child}function wa(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function kh(t,s,o,u,m){var v=Br();return v=v===null?null:{parent:Ye._currentValue,pool:v},s.memoizedState={baseLanes:o,cachePool:v},t!==null&&No(s,null),$r(),jf(s),t!==null&&ss(t,s,u,!0),s.childLanes=m,null}function Go(t,s){return s=Fo({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Dh(t,s,o){return Ei(s,t.child,null,o),t=Go(s,s.pendingProps),t.flags|=2,It(s),s.memoizedState=null,t}function cx(t,s,o){var u=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(ge){if(u.mode==="hidden")return t=Go(s,u),s.lanes=536870912,wa(null,t);if(Yr(s),(t=je)?(t=Fm(t,zt),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:jn!==null?{id:on,overflow:ln}:null,retryLane:536870912,hydrationErrors:null},o=gf(t),o.return=s,s.child=o,ot=s,je=null)):t=null,t===null)throw Ln(s);return s.lanes=536870912,null}return Go(s,u)}var v=t.memoizedState;if(v!==null){var _=v.dehydrated;if(Yr(s),m)if(s.flags&256)s.flags&=-257,s=Dh(t,s,o);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(a(558));else if(Qe||ss(t,s,o,!1),m=(o&t.childLanes)!==0,Qe||m){if(u=ke,u!==null&&(_=_d(u,o),_!==0&&_!==v.retryLane))throw v.retryLane=_,yi(t,_),_t(u,t,_),pu;el(),s=Dh(t,s,o)}else t=v.treeContext,je=$t(_.nextSibling),ot=s,ge=!0,On=null,zt=!1,t!==null&&xf(s,t),s=Go(s,u),s.flags|=4096;return s}return t=mn(t.child,{mode:u.mode,children:u.children}),t.ref=s.ref,s.child=t,t.return=s,t}function zo(t,s){var o=s.ref;if(o===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(t===null||t.ref!==o)&&(s.flags|=4194816)}}function gu(t,s,o,u,m){return wi(s),o=Qr(t,s,o,u,void 0,m),u=Xr(),t!==null&&!Qe?(Wr(t,s,m),bn(t,s,m)):(ge&&u&&Ir(s),s.flags|=1,rt(t,s,o,m),s.child)}function Uh(t,s,o,u,m,v){return wi(s),s.updateQueue=null,o=Lf(s,u,o,m),Of(t),u=Xr(),t!==null&&!Qe?(Wr(t,s,v),bn(t,s,v)):(ge&&u&&Ir(s),s.flags|=1,rt(t,s,o,v),s.child)}function jh(t,s,o,u,m){if(wi(s),s.stateNode===null){var v=es,_=o.contextType;typeof _=="object"&&_!==null&&(v=lt(_)),v=new o(u,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=hu,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=u,v.state=s.memoizedState,v.refs={},Hr(s),_=o.contextType,v.context=typeof _=="object"&&_!==null?lt(_):es,v.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(fu(s,o,_,u),v.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(_=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),_!==v.state&&hu.enqueueReplaceState(v,v.state,null),ga(s,u,v,m),pa(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(t===null){v=s.stateNode;var T=s.memoizedProps,A=Ni(o,T);v.props=A;var j=v.context,V=o.contextType;_=es,typeof V=="object"&&V!==null&&(_=lt(V));var G=o.getDerivedStateFromProps;V=typeof G=="function"||typeof v.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,V||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T||j!==_)&&wh(s,v,u,_),qn=!1;var O=s.memoizedState;v.state=O,ga(s,u,v,m),pa(),j=s.memoizedState,T||O!==j||qn?(typeof G=="function"&&(fu(s,o,G,u),j=s.memoizedState),(A=qn||bh(s,o,A,u,O,j,_))?(V||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=j),v.props=u,v.state=j,v.context=_,u=A):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{v=s.stateNode,Gr(t,s),_=s.memoizedProps,V=Ni(o,_),v.props=V,G=s.pendingProps,O=v.context,j=o.contextType,A=es,typeof j=="object"&&j!==null&&(A=lt(j)),T=o.getDerivedStateFromProps,(j=typeof T=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(_!==G||O!==A)&&wh(s,v,u,A),qn=!1,O=s.memoizedState,v.state=O,ga(s,u,v,m),pa();var P=s.memoizedState;_!==G||O!==P||qn||t!==null&&t.dependencies!==null&&Eo(t.dependencies)?(typeof T=="function"&&(fu(s,o,T,u),P=s.memoizedState),(V=qn||bh(s,o,V,u,O,P,A)||t!==null&&t.dependencies!==null&&Eo(t.dependencies))?(j||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,P,A),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,P,A)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||_===t.memoizedProps&&O===t.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&O===t.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=P),v.props=u,v.state=P,v.context=A,u=V):(typeof v.componentDidUpdate!="function"||_===t.memoizedProps&&O===t.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&O===t.memoizedState||(s.flags|=1024),u=!1)}return v=u,zo(t,s),u=(s.flags&128)!==0,v||u?(v=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,t!==null&&u?(s.child=Ei(s,t.child,null,m),s.child=Ei(s,null,o,m)):rt(t,s,o,m),s.memoizedState=v.state,t=s.child):t=bn(t,s,m),t}function Oh(t,s,o,u){return xi(),s.flags|=256,rt(t,s,o,u),s.child}var yu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vu(t){return{baseLanes:t,cachePool:Ef()}}function xu(t,s,o){return t=t!==null?t.childLanes&~o:0,s&&(t|=Dt),t}function Lh(t,s,o){var u=s.pendingProps,m=!1,v=(s.flags&128)!==0,_;if((_=v)||(_=t!==null&&t.memoizedState===null?!1:(ze.current&2)!==0),_&&(m=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,t===null){if(ge){if(m?Hn(s):Gn(),(t=je)?(t=Fm(t,zt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:jn!==null?{id:on,overflow:ln}:null,retryLane:536870912,hydrationErrors:null},o=gf(t),o.return=s,s.child=o,ot=s,je=null)):t=null,t===null)throw Ln(s);return tc(t)?s.lanes=32:s.lanes=536870912,null}var T=u.children;return u=u.fallback,m?(Gn(),m=s.mode,T=Fo({mode:"hidden",children:T},m),u=vi(u,m,o,null),T.return=s,u.return=s,T.sibling=u,s.child=T,u=s.child,u.memoizedState=vu(o),u.childLanes=xu(t,_,o),s.memoizedState=yu,wa(null,u)):(Hn(s),bu(s,T))}var A=t.memoizedState;if(A!==null&&(T=A.dehydrated,T!==null)){if(v)s.flags&256?(Hn(s),s.flags&=-257,s=wu(t,s,o)):s.memoizedState!==null?(Gn(),s.child=t.child,s.flags|=128,s=null):(Gn(),T=u.fallback,m=s.mode,u=Fo({mode:"visible",children:u.children},m),T=vi(T,m,o,null),T.flags|=2,u.return=s,T.return=s,u.sibling=T,s.child=u,Ei(s,t.child,null,o),u=s.child,u.memoizedState=vu(o),u.childLanes=xu(t,_,o),s.memoizedState=yu,s=wa(null,u));else if(Hn(s),tc(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var j=_.dgst;_=j,u=Error(a(419)),u.stack="",u.digest=_,ua({value:u,source:null,stack:null}),s=wu(t,s,o)}else if(Qe||ss(t,s,o,!1),_=(o&t.childLanes)!==0,Qe||_){if(_=ke,_!==null&&(u=_d(_,o),u!==0&&u!==A.retryLane))throw A.retryLane=u,yi(t,u),_t(_,t,u),pu;ec(T)||el(),s=wu(t,s,o)}else ec(T)?(s.flags|=192,s.child=t.child,s=null):(t=A.treeContext,je=$t(T.nextSibling),ot=s,ge=!0,On=null,zt=!1,t!==null&&xf(s,t),s=bu(s,u.children),s.flags|=4096);return s}return m?(Gn(),T=u.fallback,m=s.mode,A=t.child,j=A.sibling,u=mn(A,{mode:"hidden",children:u.children}),u.subtreeFlags=A.subtreeFlags&65011712,j!==null?T=mn(j,T):(T=vi(T,m,o,null),T.flags|=2),T.return=s,u.return=s,u.sibling=T,s.child=u,wa(null,u),u=s.child,T=t.child.memoizedState,T===null?T=vu(o):(m=T.cachePool,m!==null?(A=Ye._currentValue,m=m.parent!==A?{parent:A,pool:A}:m):m=Ef(),T={baseLanes:T.baseLanes|o,cachePool:m}),u.memoizedState=T,u.childLanes=xu(t,_,o),s.memoizedState=yu,wa(t.child,u)):(Hn(s),o=t.child,t=o.sibling,o=mn(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,t!==null&&(_=s.deletions,_===null?(s.deletions=[t],s.flags|=16):_.push(t)),s.child=o,s.memoizedState=null,o)}function bu(t,s){return s=Fo({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Fo(t,s){return t=Rt(22,t,null,s),t.lanes=0,t}function wu(t,s,o){return Ei(s,t.child,null,o),t=bu(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Ph(t,s,o){t.lanes|=s;var u=t.alternate;u!==null&&(u.lanes|=s),Or(t.return,s,o)}function _u(t,s,o,u,m,v){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:v}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=m,_.treeForkCount=v)}function qh(t,s,o){var u=s.pendingProps,m=u.revealOrder,v=u.tail;u=u.children;var _=ze.current,T=(_&2)!==0;if(T?(_=_&1|2,s.flags|=128):_&=1,ye(ze,_),rt(t,s,u,o),u=ge?ra:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ph(t,o,s);else if(t.tag===19)Ph(t,o,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(m){case"forwards":for(o=s.child,m=null;o!==null;)t=o.alternate,t!==null&&Do(t)===null&&(m=o),o=o.sibling;o=m,o===null?(m=s.child,s.child=null):(m=o.sibling,o.sibling=null),_u(s,!1,m,o,v,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=s.child,s.child=null;m!==null;){if(t=m.alternate,t!==null&&Do(t)===null){s.child=m;break}t=m.sibling,m.sibling=o,o=m,m=t}_u(s,!0,o,null,v,u);break;case"together":_u(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function bn(t,s,o){if(t!==null&&(s.dependencies=t.dependencies),$n|=s.lanes,(o&s.childLanes)===0)if(t!==null){if(ss(t,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,o=mn(t,t.pendingProps),s.child=o,o.return=s;t.sibling!==null;)t=t.sibling,o=o.sibling=mn(t,t.pendingProps),o.return=s;o.sibling=null}return s.child}function Su(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Eo(t)))}function dx(t,s,o){switch(s.tag){case 3:di(s,s.stateNode.containerInfo),Pn(s,Ye,t.memoizedState.cache),xi();break;case 27:case 5:Js(s);break;case 4:di(s,s.stateNode.containerInfo);break;case 10:Pn(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Yr(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Hn(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Lh(t,s,o):(Hn(s),t=bn(t,s,o),t!==null?t.sibling:null);Hn(s);break;case 19:var m=(t.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(ss(t,s,o,!1),u=(o&s.childLanes)!==0),m){if(u)return qh(t,s,o);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ye(ze,ze.current),u)break;return null;case 22:return s.lanes=0,Ih(t,s,o,s.pendingProps);case 24:Pn(s,Ye,t.memoizedState.cache)}return bn(t,s,o)}function Bh(t,s,o){if(t!==null)if(t.memoizedProps!==s.pendingProps)Qe=!0;else{if(!Su(t,o)&&(s.flags&128)===0)return Qe=!1,dx(t,s,o);Qe=(t.flags&131072)!==0}else Qe=!1,ge&&(s.flags&1048576)!==0&&vf(s,ra,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(t=Si(s.elementType),s.type=t,typeof t=="function")Ar(t)?(u=Ni(t,u),s.tag=1,s=jh(null,s,t,u,o)):(s.tag=0,s=gu(null,s,t,u,o));else{if(t!=null){var m=t.$$typeof;if(m===q){s.tag=11,s=Ah(null,s,t,u,o);break e}else if(m===$){s.tag=14,s=Rh(null,s,t,u,o);break e}}throw s=Qt(t)||t,Error(a(306,s,""))}}return s;case 0:return gu(t,s,s.type,s.pendingProps,o);case 1:return u=s.type,m=Ni(u,s.pendingProps),jh(t,s,u,m,o);case 3:e:{if(di(s,s.stateNode.containerInfo),t===null)throw Error(a(387));u=s.pendingProps;var v=s.memoizedState;m=v.element,Gr(t,s),ga(s,u,null,o);var _=s.memoizedState;if(u=_.cache,Pn(s,Ye,u),u!==v.cache&&Lr(s,[Ye],o,!0),pa(),u=_.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=Oh(t,s,u,o);break e}else if(u!==m){m=Vt(Error(a(424)),s),ua(m),s=Oh(t,s,u,o);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(je=$t(t.firstChild),ot=s,ge=!0,On=null,zt=!0,o=If(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(xi(),u===m){s=bn(t,s,o);break e}rt(t,s,u,o)}s=s.child}return s;case 26:return zo(t,s),t===null?(o=Xm(s.type,null,s.pendingProps,null))?s.memoizedState=o:ge||(o=s.type,t=s.pendingProps,u=ll(Xt.current).createElement(o),u[at]=s,u[gt]=t,ut(u,o,t),it(u),s.stateNode=u):s.memoizedState=Xm(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Js(s),t===null&&ge&&(u=s.stateNode=Ym(s.type,s.pendingProps,Xt.current),ot=s,zt=!0,m=je,Xn(s.type)?(nc=m,je=$t(u.firstChild)):je=m),rt(t,s,s.pendingProps.children,o),zo(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&ge&&((m=u=je)&&(u=Vx(u,s.type,s.pendingProps,zt),u!==null?(s.stateNode=u,ot=s,je=$t(u.firstChild),zt=!1,m=!0):m=!1),m||Ln(s)),Js(s),m=s.type,v=s.pendingProps,_=t!==null?t.memoizedProps:null,u=v.children,Xu(m,v)?u=null:_!==null&&Xu(m,_)&&(s.flags|=32),s.memoizedState!==null&&(m=Qr(t,s,nx,null,null,o),Oa._currentValue=m),zo(t,s),rt(t,s,u,o),s.child;case 6:return t===null&&ge&&((t=o=je)&&(o=Hx(o,s.pendingProps,zt),o!==null?(s.stateNode=o,ot=s,je=null,t=!0):t=!1),t||Ln(s)),null;case 13:return Lh(t,s,o);case 4:return di(s,s.stateNode.containerInfo),u=s.pendingProps,t===null?s.child=Ei(s,null,u,o):rt(t,s,u,o),s.child;case 11:return Ah(t,s,s.type,s.pendingProps,o);case 7:return rt(t,s,s.pendingProps,o),s.child;case 8:return rt(t,s,s.pendingProps.children,o),s.child;case 12:return rt(t,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Pn(s,s.type,u.value),rt(t,s,u.children,o),s.child;case 9:return m=s.type._context,u=s.pendingProps.children,wi(s),m=lt(m),u=u(m),s.flags|=1,rt(t,s,u,o),s.child;case 14:return Rh(t,s,s.type,s.pendingProps,o);case 15:return Mh(t,s,s.type,s.pendingProps,o);case 19:return qh(t,s,o);case 31:return cx(t,s,o);case 22:return Ih(t,s,o,s.pendingProps);case 24:return wi(s),u=lt(Ye),t===null?(m=Br(),m===null&&(m=ke,v=Pr(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=o),m=v),s.memoizedState={parent:u,cache:m},Hr(s),Pn(s,Ye,m)):((t.lanes&o)!==0&&(Gr(t,s),ga(s,null,null,o),pa()),m=t.memoizedState,v=s.memoizedState,m.parent!==u?(m={parent:u,cache:u},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),Pn(s,Ye,u)):(u=v.cache,Pn(s,Ye,u),u!==m.cache&&Lr(s,[Ye],o,!0))),rt(t,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function wn(t){t.flags|=4}function Tu(t,s,o,u,m){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(m&335544128)===m)if(t.stateNode.complete)t.flags|=8192;else if(hm())t.flags|=8192;else throw Ti=Ro,Vr}else t.flags&=-16777217}function Vh(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!np(s))if(hm())t.flags|=8192;else throw Ti=Ro,Vr}function $o(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?xd():536870912,t.lanes|=s,gs|=s)}function _a(t,s){if(!ge)switch(t.tailMode){case"hidden":s=t.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Oe(t){var s=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(s)for(var m=t.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=u,t.childLanes=o,s}function fx(t,s,o){var u=s.pendingProps;switch(kr(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(s),null;case 1:return Oe(s),null;case 3:return o=s.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),yn(Ye),In(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(is(s)?wn(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ur())),Oe(s),null;case 26:var m=s.type,v=s.memoizedState;return t===null?(wn(s),v!==null?(Oe(s),Vh(s,v)):(Oe(s),Tu(s,m,null,u,o))):v?v!==t.memoizedState?(wn(s),Oe(s),Vh(s,v)):(Oe(s),s.flags&=-16777217):(t=t.memoizedProps,t!==u&&wn(s),Oe(s),Tu(s,m,t,u,o)),null;case 27:if(Y(s),o=Xt.current,m=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==u&&wn(s);else{if(!u){if(s.stateNode===null)throw Error(a(166));return Oe(s),null}t=Je.current,is(s)?bf(s):(t=Ym(m,u,o),s.stateNode=t,wn(s))}return Oe(s),null;case 5:if(Y(s),m=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==u&&wn(s);else{if(!u){if(s.stateNode===null)throw Error(a(166));return Oe(s),null}if(v=Je.current,is(s))bf(s);else{var _=ll(Xt.current);switch(v){case 1:v=_.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:v=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":v=_.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":v=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":v=_.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?_.createElement(m,{is:u.is}):_.createElement(m)}}v[at]=s,v[gt]=u;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)v.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=v;e:switch(ut(v,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&wn(s)}}return Oe(s),Tu(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,o),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==u&&wn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(a(166));if(t=Xt.current,is(s)){if(t=s.stateNode,o=s.memoizedProps,u=null,m=ot,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}t[at]=s,t=!!(t.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Lm(t.nodeValue,o)),t||Ln(s,!0)}else t=ll(t).createTextNode(u),t[at]=s,s.stateNode=t}return Oe(s),null;case 31:if(o=s.memoizedState,t===null||t.memoizedState!==null){if(u=is(s),o!==null){if(t===null){if(!u)throw Error(a(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[at]=s}else xi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Oe(s),t=!1}else o=Ur(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),t=!0;if(!t)return s.flags&256?(It(s),s):(It(s),null);if((s.flags&128)!==0)throw Error(a(558))}return Oe(s),null;case 13:if(u=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(m=is(s),u!==null&&u.dehydrated!==null){if(t===null){if(!m)throw Error(a(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(a(317));m[at]=s}else xi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Oe(s),m=!1}else m=Ur(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(It(s),s):(It(s),null)}return It(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,t=t!==null&&t.memoizedState!==null,o&&(u=s.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==m&&(u.flags|=2048)),o!==t&&o&&(s.child.flags|=8192),$o(s,s.updateQueue),Oe(s),null);case 4:return In(),t===null&&$u(s.stateNode.containerInfo),Oe(s),null;case 10:return yn(s.type),Oe(s),null;case 19:if(De(ze),u=s.memoizedState,u===null)return Oe(s),null;if(m=(s.flags&128)!==0,v=u.rendering,v===null)if(m)_a(u,!1);else{if(Ge!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(v=Do(t),v!==null){for(s.flags|=128,_a(u,!1),t=v.updateQueue,s.updateQueue=t,$o(s,t),s.subtreeFlags=0,t=o,o=s.child;o!==null;)pf(o,t),o=o.sibling;return ye(ze,ze.current&1|2),ge&&pn(s,u.treeForkCount),s.child}t=t.sibling}u.tail!==null&&Et()>Xo&&(s.flags|=128,m=!0,_a(u,!1),s.lanes=4194304)}else{if(!m)if(t=Do(v),t!==null){if(s.flags|=128,m=!0,t=t.updateQueue,s.updateQueue=t,$o(s,t),_a(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!ge)return Oe(s),null}else 2*Et()-u.renderingStartTime>Xo&&o!==536870912&&(s.flags|=128,m=!0,_a(u,!1),s.lanes=4194304);u.isBackwards?(v.sibling=s.child,s.child=v):(t=u.last,t!==null?t.sibling=v:s.child=v,u.last=v)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=Et(),t.sibling=null,o=ze.current,ye(ze,m?o&1|2:o&1),ge&&pn(s,u.treeForkCount),t):(Oe(s),null);case 22:case 23:return It(s),Jr(),u=s.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(Oe(s),s.subtreeFlags&6&&(s.flags|=8192)):Oe(s),o=s.updateQueue,o!==null&&$o(s,o.retryQueue),o=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),t!==null&&De(_i),null;case 24:return o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),yn(Ye),Oe(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function hx(t,s){switch(kr(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return yn(Ye),In(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Y(s),null;case 31:if(s.memoizedState!==null){if(It(s),s.alternate===null)throw Error(a(340));xi()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(It(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));xi()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return De(ze),null;case 4:return In(),null;case 10:return yn(s.type),null;case 22:case 23:return It(s),Jr(),t!==null&&De(_i),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return yn(Ye),null;case 25:return null;default:return null}}function Hh(t,s){switch(kr(s),s.tag){case 3:yn(Ye),In();break;case 26:case 27:case 5:Y(s);break;case 4:In();break;case 31:s.memoizedState!==null&&It(s);break;case 13:It(s);break;case 19:De(ze);break;case 10:yn(s.type);break;case 22:case 23:It(s),Jr(),t!==null&&De(_i);break;case 24:yn(Ye)}}function Sa(t,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&t)===t){u=void 0;var v=o.create,_=o.inst;u=v(),_.destroy=u}o=o.next}while(o!==m)}}catch(T){Ce(s,s.return,T)}}function zn(t,s,o){try{var u=s.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var v=m.next;u=v;do{if((u.tag&t)===t){var _=u.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,m=s;var A=o,j=T;try{j()}catch(V){Ce(m,A,V)}}}u=u.next}while(u!==v)}}catch(V){Ce(s,s.return,V)}}function Gh(t){var s=t.updateQueue;if(s!==null){var o=t.stateNode;try{Df(s,o)}catch(u){Ce(t,t.return,u)}}}function zh(t,s,o){o.props=Ni(t.type,t.memoizedProps),o.state=t.memoizedState;try{o.componentWillUnmount()}catch(u){Ce(t,s,u)}}function Ta(t,s){try{var o=t.ref;if(o!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof o=="function"?t.refCleanup=o(u):o.current=u}}catch(m){Ce(t,s,m)}}function rn(t,s){var o=t.ref,u=t.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){Ce(t,s,m)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Ce(t,s,m)}else o.current=null}function Fh(t){var s=t.type,o=t.memoizedProps,u=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){Ce(t,t.return,m)}}function Eu(t,s,o){try{var u=t.stateNode;jx(u,t.type,o,s),u[gt]=s}catch(m){Ce(t,t.return,m)}}function $h(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Xn(t.type)||t.tag===4}function Cu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$h(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Xn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nu(t,s,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(t,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(t),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=fn));else if(u!==4&&(u===27&&Xn(t.type)&&(o=t.stateNode,s=null),t=t.child,t!==null))for(Nu(t,s,o),t=t.sibling;t!==null;)Nu(t,s,o),t=t.sibling}function Jo(t,s,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,s?o.insertBefore(t,s):o.appendChild(t);else if(u!==4&&(u===27&&Xn(t.type)&&(o=t.stateNode),t=t.child,t!==null))for(Jo(t,s,o),t=t.sibling;t!==null;)Jo(t,s,o),t=t.sibling}function Jh(t){var s=t.stateNode,o=t.memoizedProps;try{for(var u=t.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);ut(s,u,o),s[at]=t,s[gt]=o}catch(v){Ce(t,t.return,v)}}var _n=!1,Xe=!1,Au=!1,Yh=typeof WeakSet=="function"?WeakSet:Set,st=null;function mx(t,s){if(t=t.containerInfo,Ku=ml,t=of(t),wr(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break e}var _=0,T=-1,A=-1,j=0,V=0,G=t,O=null;t:for(;;){for(var P;G!==o||m!==0&&G.nodeType!==3||(T=_+m),G!==v||u!==0&&G.nodeType!==3||(A=_+u),G.nodeType===3&&(_+=G.nodeValue.length),(P=G.firstChild)!==null;)O=G,G=P;for(;;){if(G===t)break t;if(O===o&&++j===m&&(T=_),O===v&&++V===u&&(A=_),(P=G.nextSibling)!==null)break;G=O,O=G.parentNode}G=P}o=T===-1||A===-1?null:{start:T,end:A}}else o=null}o=o||{start:0,end:0}}else o=null;for(Qu={focusedElem:t,selectionRange:o},ml=!1,st=s;st!==null;)if(s=st,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,st=t;else for(;st!==null;){switch(s=st,v=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(o=0;o<t.length;o++)m=t[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&v!==null){t=void 0,o=s,m=v.memoizedProps,v=v.memoizedState,u=o.stateNode;try{var K=Ni(o.type,m);t=u.getSnapshotBeforeUpdate(K,v),u.__reactInternalSnapshotBeforeUpdate=t}catch(se){Ce(o,o.return,se)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,o=t.nodeType,o===9)Zu(t);else if(o===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Zu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=s.sibling,t!==null){t.return=s.return,st=t;break}st=s.return}}function Kh(t,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Tn(t,o),u&4&&Sa(5,o);break;case 1:if(Tn(t,o),u&4)if(t=o.stateNode,s===null)try{t.componentDidMount()}catch(_){Ce(o,o.return,_)}else{var m=Ni(o.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(m,s,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Ce(o,o.return,_)}}u&64&&Gh(o),u&512&&Ta(o,o.return);break;case 3:if(Tn(t,o),u&64&&(t=o.updateQueue,t!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Df(t,s)}catch(_){Ce(o,o.return,_)}}break;case 27:s===null&&u&4&&Jh(o);case 26:case 5:Tn(t,o),s===null&&u&4&&Fh(o),u&512&&Ta(o,o.return);break;case 12:Tn(t,o);break;case 31:Tn(t,o),u&4&&Wh(t,o);break;case 13:Tn(t,o),u&4&&Zh(t,o),u&64&&(t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(o=Sx.bind(null,o),Gx(t,o))));break;case 22:if(u=o.memoizedState!==null||_n,!u){s=s!==null&&s.memoizedState!==null||Xe,m=_n;var v=Xe;_n=u,(Xe=s)&&!v?En(t,o,(o.subtreeFlags&8772)!==0):Tn(t,o),_n=m,Xe=v}break;case 30:break;default:Tn(t,o)}}function Qh(t){var s=t.alternate;s!==null&&(t.alternate=null,Qh(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&sr(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Pe=null,vt=!1;function Sn(t,s,o){for(o=o.child;o!==null;)Xh(t,s,o),o=o.sibling}function Xh(t,s,o){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(Ys,o)}catch{}switch(o.tag){case 26:Xe||rn(o,s),Sn(t,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Xe||rn(o,s);var u=Pe,m=vt;Xn(o.type)&&(Pe=o.stateNode,vt=!1),Sn(t,s,o),Da(o.stateNode),Pe=u,vt=m;break;case 5:Xe||rn(o,s);case 6:if(u=Pe,m=vt,Pe=null,Sn(t,s,o),Pe=u,vt=m,Pe!==null)if(vt)try{(Pe.nodeType===9?Pe.body:Pe.nodeName==="HTML"?Pe.ownerDocument.body:Pe).removeChild(o.stateNode)}catch(v){Ce(o,s,v)}else try{Pe.removeChild(o.stateNode)}catch(v){Ce(o,s,v)}break;case 18:Pe!==null&&(vt?(t=Pe,Gm(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,o.stateNode),Ts(t)):Gm(Pe,o.stateNode));break;case 4:u=Pe,m=vt,Pe=o.stateNode.containerInfo,vt=!0,Sn(t,s,o),Pe=u,vt=m;break;case 0:case 11:case 14:case 15:zn(2,o,s),Xe||zn(4,o,s),Sn(t,s,o);break;case 1:Xe||(rn(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&zh(o,s,u)),Sn(t,s,o);break;case 21:Sn(t,s,o);break;case 22:Xe=(u=Xe)||o.memoizedState!==null,Sn(t,s,o),Xe=u;break;default:Sn(t,s,o)}}function Wh(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ts(t)}catch(o){Ce(s,s.return,o)}}}function Zh(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ts(t)}catch(o){Ce(s,s.return,o)}}function px(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Yh),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Yh),s;default:throw Error(a(435,t.tag))}}function Yo(t,s){var o=px(t);s.forEach(function(u){if(!o.has(u)){o.add(u);var m=Tx.bind(null,t,u);u.then(m,m)}})}function xt(t,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],v=t,_=s,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(Xn(T.type)){Pe=T.stateNode,vt=!1;break e}break;case 5:Pe=T.stateNode,vt=!1;break e;case 3:case 4:Pe=T.stateNode.containerInfo,vt=!0;break e}T=T.return}if(Pe===null)throw Error(a(160));Xh(v,_,m),Pe=null,vt=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)em(s,t),s=s.sibling}var Zt=null;function em(t,s){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:xt(s,t),bt(t),u&4&&(zn(3,t,t.return),Sa(3,t),zn(5,t,t.return));break;case 1:xt(s,t),bt(t),u&512&&(Xe||o===null||rn(o,o.return)),u&64&&_n&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(o=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Zt;if(xt(s,t),bt(t),u&512&&(Xe||o===null||rn(o,o.return)),u&4){var v=o!==null?o.memoizedState:null;if(u=t.memoizedState,o===null)if(u===null)if(t.stateNode===null){e:{u=t.type,o=t.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":v=m.getElementsByTagName("title")[0],(!v||v[Xs]||v[at]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(u),m.head.insertBefore(v,m.querySelector("head > title"))),ut(v,u,o),v[at]=t,it(v),u=v;break e;case"link":var _=ep("link","href",m).get(u+(o.href||""));if(_){for(var T=0;T<_.length;T++)if(v=_[T],v.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&v.getAttribute("rel")===(o.rel==null?null:o.rel)&&v.getAttribute("title")===(o.title==null?null:o.title)&&v.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(T,1);break t}}v=m.createElement(u),ut(v,u,o),m.head.appendChild(v);break;case"meta":if(_=ep("meta","content",m).get(u+(o.content||""))){for(T=0;T<_.length;T++)if(v=_[T],v.getAttribute("content")===(o.content==null?null:""+o.content)&&v.getAttribute("name")===(o.name==null?null:o.name)&&v.getAttribute("property")===(o.property==null?null:o.property)&&v.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&v.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(T,1);break t}}v=m.createElement(u),ut(v,u,o),m.head.appendChild(v);break;default:throw Error(a(468,u))}v[at]=t,it(v),u=v}t.stateNode=u}else tp(m,t.type,t.stateNode);else t.stateNode=Zm(m,u,t.memoizedProps);else v!==u?(v===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):v.count--,u===null?tp(m,t.type,t.stateNode):Zm(m,u,t.memoizedProps)):u===null&&t.stateNode!==null&&Eu(t,t.memoizedProps,o.memoizedProps)}break;case 27:xt(s,t),bt(t),u&512&&(Xe||o===null||rn(o,o.return)),o!==null&&u&4&&Eu(t,t.memoizedProps,o.memoizedProps);break;case 5:if(xt(s,t),bt(t),u&512&&(Xe||o===null||rn(o,o.return)),t.flags&32){m=t.stateNode;try{Ji(m,"")}catch(K){Ce(t,t.return,K)}}u&4&&t.stateNode!=null&&(m=t.memoizedProps,Eu(t,m,o!==null?o.memoizedProps:m)),u&1024&&(Au=!0);break;case 6:if(xt(s,t),bt(t),u&4){if(t.stateNode===null)throw Error(a(162));u=t.memoizedProps,o=t.stateNode;try{o.nodeValue=u}catch(K){Ce(t,t.return,K)}}break;case 3:if(cl=null,m=Zt,Zt=rl(s.containerInfo),xt(s,t),Zt=m,bt(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ts(s.containerInfo)}catch(K){Ce(t,t.return,K)}Au&&(Au=!1,tm(t));break;case 4:u=Zt,Zt=rl(t.stateNode.containerInfo),xt(s,t),bt(t),Zt=u;break;case 12:xt(s,t),bt(t);break;case 31:xt(s,t),bt(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Yo(t,u)));break;case 13:xt(s,t),bt(t),t.child.flags&8192&&t.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Qo=Et()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Yo(t,u)));break;case 22:m=t.memoizedState!==null;var A=o!==null&&o.memoizedState!==null,j=_n,V=Xe;if(_n=j||m,Xe=V||A,xt(s,t),Xe=V,_n=j,bt(t),u&8192)e:for(s=t.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(o===null||A||_n||Xe||Ai(t)),o=null,s=t;;){if(s.tag===5||s.tag===26){if(o===null){A=o=s;try{if(v=A.stateNode,m)_=v.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=A.stateNode;var G=A.memoizedProps.style,O=G!=null&&G.hasOwnProperty("display")?G.display:null;T.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(K){Ce(A,A.return,K)}}}else if(s.tag===6){if(o===null){A=s;try{A.stateNode.nodeValue=m?"":A.memoizedProps}catch(K){Ce(A,A.return,K)}}}else if(s.tag===18){if(o===null){A=s;try{var P=A.stateNode;m?zm(P,!0):zm(A.stateNode,!1)}catch(K){Ce(A,A.return,K)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=t.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Yo(t,o))));break;case 19:xt(s,t),bt(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Yo(t,u)));break;case 30:break;case 21:break;default:xt(s,t),bt(t)}}function bt(t){var s=t.flags;if(s&2){try{for(var o,u=t.return;u!==null;){if($h(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var m=o.stateNode,v=Cu(t);Jo(t,v,m);break;case 5:var _=o.stateNode;o.flags&32&&(Ji(_,""),o.flags&=-33);var T=Cu(t);Jo(t,T,_);break;case 3:case 4:var A=o.stateNode.containerInfo,j=Cu(t);Nu(t,j,A);break;default:throw Error(a(161))}}catch(V){Ce(t,t.return,V)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function tm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;tm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Tn(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Kh(t,s.alternate,s),s=s.sibling}function Ai(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:zn(4,s,s.return),Ai(s);break;case 1:rn(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&zh(s,s.return,o),Ai(s);break;case 27:Da(s.stateNode);case 26:case 5:rn(s,s.return),Ai(s);break;case 22:s.memoizedState===null&&Ai(s);break;case 30:Ai(s);break;default:Ai(s)}t=t.sibling}}function En(t,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,m=t,v=s,_=v.flags;switch(v.tag){case 0:case 11:case 15:En(m,v,o),Sa(4,v);break;case 1:if(En(m,v,o),u=v,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(j){Ce(u,u.return,j)}if(u=v,m=u.updateQueue,m!==null){var T=u.stateNode;try{var A=m.shared.hiddenCallbacks;if(A!==null)for(m.shared.hiddenCallbacks=null,m=0;m<A.length;m++)kf(A[m],T)}catch(j){Ce(u,u.return,j)}}o&&_&64&&Gh(v),Ta(v,v.return);break;case 27:Jh(v);case 26:case 5:En(m,v,o),o&&u===null&&_&4&&Fh(v),Ta(v,v.return);break;case 12:En(m,v,o);break;case 31:En(m,v,o),o&&_&4&&Wh(m,v);break;case 13:En(m,v,o),o&&_&4&&Zh(m,v);break;case 22:v.memoizedState===null&&En(m,v,o),Ta(v,v.return);break;case 30:break;default:En(m,v,o)}s=s.sibling}}function Ru(t,s){var o=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==o&&(t!=null&&t.refCount++,o!=null&&ca(o))}function Mu(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&ca(t))}function en(t,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)nm(t,s,o,u),s=s.sibling}function nm(t,s,o,u){var m=s.flags;switch(s.tag){case 0:case 11:case 15:en(t,s,o,u),m&2048&&Sa(9,s);break;case 1:en(t,s,o,u);break;case 3:en(t,s,o,u),m&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&ca(t)));break;case 12:if(m&2048){en(t,s,o,u),t=s.stateNode;try{var v=s.memoizedProps,_=v.id,T=v.onPostCommit;typeof T=="function"&&T(_,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(A){Ce(s,s.return,A)}}else en(t,s,o,u);break;case 31:en(t,s,o,u);break;case 13:en(t,s,o,u);break;case 23:break;case 22:v=s.stateNode,_=s.alternate,s.memoizedState!==null?v._visibility&2?en(t,s,o,u):Ea(t,s):v._visibility&2?en(t,s,o,u):(v._visibility|=2,hs(t,s,o,u,(s.subtreeFlags&10256)!==0||!1)),m&2048&&Ru(_,s);break;case 24:en(t,s,o,u),m&2048&&Mu(s.alternate,s);break;default:en(t,s,o,u)}}function hs(t,s,o,u,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=t,_=s,T=o,A=u,j=_.flags;switch(_.tag){case 0:case 11:case 15:hs(v,_,T,A,m),Sa(8,_);break;case 23:break;case 22:var V=_.stateNode;_.memoizedState!==null?V._visibility&2?hs(v,_,T,A,m):Ea(v,_):(V._visibility|=2,hs(v,_,T,A,m)),m&&j&2048&&Ru(_.alternate,_);break;case 24:hs(v,_,T,A,m),m&&j&2048&&Mu(_.alternate,_);break;default:hs(v,_,T,A,m)}s=s.sibling}}function Ea(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=t,u=s,m=u.flags;switch(u.tag){case 22:Ea(o,u),m&2048&&Ru(u.alternate,u);break;case 24:Ea(o,u),m&2048&&Mu(u.alternate,u);break;default:Ea(o,u)}s=s.sibling}}var Ca=8192;function ms(t,s,o){if(t.subtreeFlags&Ca)for(t=t.child;t!==null;)im(t,s,o),t=t.sibling}function im(t,s,o){switch(t.tag){case 26:ms(t,s,o),t.flags&Ca&&t.memoizedState!==null&&tb(o,Zt,t.memoizedState,t.memoizedProps);break;case 5:ms(t,s,o);break;case 3:case 4:var u=Zt;Zt=rl(t.stateNode.containerInfo),ms(t,s,o),Zt=u;break;case 22:t.memoizedState===null&&(u=t.alternate,u!==null&&u.memoizedState!==null?(u=Ca,Ca=16777216,ms(t,s,o),Ca=u):ms(t,s,o));break;default:ms(t,s,o)}}function sm(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Na(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];st=u,om(u,t)}sm(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)am(t),t=t.sibling}function am(t){switch(t.tag){case 0:case 11:case 15:Na(t),t.flags&2048&&zn(9,t,t.return);break;case 3:Na(t);break;case 12:Na(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Ko(t)):Na(t);break;default:Na(t)}}function Ko(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];st=u,om(u,t)}sm(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:zn(8,s,s.return),Ko(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Ko(s));break;default:Ko(s)}t=t.sibling}}function om(t,s){for(;st!==null;){var o=st;switch(o.tag){case 0:case 11:case 15:zn(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ca(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,st=u;else e:for(o=t;st!==null;){u=st;var m=u.sibling,v=u.return;if(Qh(u),u===o){st=null;break e}if(m!==null){m.return=v,st=m;break e}st=v}}}var gx={getCacheForType:function(t){var s=lt(Ye),o=s.data.get(t);return o===void 0&&(o=t(),s.data.set(t,o)),o},cacheSignal:function(){return lt(Ye).controller.signal}},yx=typeof WeakMap=="function"?WeakMap:Map,we=0,ke=null,de=null,me=0,Ee=0,kt=null,Fn=!1,ps=!1,Iu=!1,Cn=0,Ge=0,$n=0,Ri=0,ku=0,Dt=0,gs=0,Aa=null,wt=null,Du=!1,Qo=0,lm=0,Xo=1/0,Wo=null,Jn=null,tt=0,Yn=null,ys=null,Nn=0,Uu=0,ju=null,rm=null,Ra=0,Ou=null;function Ut(){return(we&2)!==0&&me!==0?me&-me:B.T!==null?Hu():Sd()}function um(){if(Dt===0)if((me&536870912)===0||ge){var t=ao;ao<<=1,(ao&3932160)===0&&(ao=262144),Dt=t}else Dt=536870912;return t=Mt.current,t!==null&&(t.flags|=32),Dt}function _t(t,s,o){(t===ke&&(Ee===2||Ee===9)||t.cancelPendingCommit!==null)&&(vs(t,0),Kn(t,me,Dt,!1)),Qs(t,o),((we&2)===0||t!==ke)&&(t===ke&&((we&2)===0&&(Ri|=o),Ge===4&&Kn(t,me,Dt,!1)),un(t))}function cm(t,s,o){if((we&6)!==0)throw Error(a(327));var u=!o&&(s&127)===0&&(s&t.expiredLanes)===0||Ks(t,s),m=u?bx(t,s):Pu(t,s,!0),v=u;do{if(m===0){ps&&!u&&Kn(t,s,0,!1);break}else{if(o=t.current.alternate,v&&!vx(o)){m=Pu(t,s,!1),v=!1;continue}if(m===2){if(v=s,t.errorRecoveryDisabledLanes&v)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var T=t;m=Aa;var A=T.current.memoizedState.isDehydrated;if(A&&(vs(T,_).flags|=256),_=Pu(T,_,!1),_!==2){if(Iu&&!A){T.errorRecoveryDisabledLanes|=v,Ri|=v,m=4;break e}v=wt,wt=m,v!==null&&(wt===null?wt=v:wt.push.apply(wt,v))}m=_}if(v=!1,m!==2)continue}}if(m===1){vs(t,0),Kn(t,s,0,!0);break}e:{switch(u=t,v=m,v){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:Kn(u,s,Dt,!Fn);break e;case 2:wt=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(m=Qo+300-Et(),10<m)){if(Kn(u,s,Dt,!Fn),lo(u,0,!0)!==0)break e;Nn=s,u.timeoutHandle=Vm(dm.bind(null,u,o,wt,Wo,Du,s,Dt,Ri,gs,Fn,v,"Throttled",-0,0),m);break e}dm(u,o,wt,Wo,Du,s,Dt,Ri,gs,Fn,v,null,-0,0)}}break}while(!0);un(t)}function dm(t,s,o,u,m,v,_,T,A,j,V,G,O,P){if(t.timeoutHandle=-1,G=s.subtreeFlags,G&8192||(G&16785408)===16785408){G={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fn},im(s,v,G);var K=(v&62914560)===v?Qo-Et():(v&4194048)===v?lm-Et():0;if(K=nb(G,K),K!==null){Nn=v,t.cancelPendingCommit=K(xm.bind(null,t,s,v,o,u,m,_,T,A,V,G,null,O,P)),Kn(t,v,_,!j);return}}xm(t,s,v,o,u,m,_,T,A)}function vx(t){for(var s=t;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],v=m.getSnapshot;m=m.value;try{if(!At(v(),m))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Kn(t,s,o,u){s&=~ku,s&=~Ri,t.suspendedLanes|=s,t.pingedLanes&=~s,u&&(t.warmLanes|=s),u=t.expirationTimes;for(var m=s;0<m;){var v=31-Nt(m),_=1<<v;u[v]=-1,m&=~_}o!==0&&bd(t,o,s)}function Zo(){return(we&6)===0?(Ma(0),!1):!0}function Lu(){if(de!==null){if(Ee===0)var t=de.return;else t=de,gn=bi=null,Zr(t),rs=null,fa=0,t=de;for(;t!==null;)Hh(t.alternate,t),t=t.return;de=null}}function vs(t,s){var o=t.timeoutHandle;o!==-1&&(t.timeoutHandle=-1,Px(o)),o=t.cancelPendingCommit,o!==null&&(t.cancelPendingCommit=null,o()),Nn=0,Lu(),ke=t,de=o=mn(t.current,null),me=s,Ee=0,kt=null,Fn=!1,ps=Ks(t,s),Iu=!1,gs=Dt=ku=Ri=$n=Ge=0,wt=Aa=null,Du=!1,(s&8)!==0&&(s|=s&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=s;0<u;){var m=31-Nt(u),v=1<<m;s|=t[m],u&=~v}return Cn=s,bo(),o}function fm(t,s){le=null,B.H=ba,s===ls||s===Ao?(s=Af(),Ee=3):s===Vr?(s=Af(),Ee=4):Ee=s===pu?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,kt=s,de===null&&(Ge=1,Ho(t,Vt(s,t.current)))}function hm(){var t=Mt.current;return t===null?!0:(me&4194048)===me?Ft===null:(me&62914560)===me||(me&536870912)!==0?t===Ft:!1}function mm(){var t=B.H;return B.H=ba,t===null?ba:t}function pm(){var t=B.A;return B.A=gx,t}function el(){Ge=4,Fn||(me&4194048)!==me&&Mt.current!==null||(ps=!0),($n&134217727)===0&&(Ri&134217727)===0||ke===null||Kn(ke,me,Dt,!1)}function Pu(t,s,o){var u=we;we|=2;var m=mm(),v=pm();(ke!==t||me!==s)&&(Wo=null,vs(t,s)),s=!1;var _=Ge;e:do try{if(Ee!==0&&de!==null){var T=de,A=kt;switch(Ee){case 8:Lu(),_=6;break e;case 3:case 2:case 9:case 6:Mt.current===null&&(s=!0);var j=Ee;if(Ee=0,kt=null,xs(t,T,A,j),o&&ps){_=0;break e}break;default:j=Ee,Ee=0,kt=null,xs(t,T,A,j)}}xx(),_=Ge;break}catch(V){fm(t,V)}while(!0);return s&&t.shellSuspendCounter++,gn=bi=null,we=u,B.H=m,B.A=v,de===null&&(ke=null,me=0,bo()),_}function xx(){for(;de!==null;)gm(de)}function bx(t,s){var o=we;we|=2;var u=mm(),m=pm();ke!==t||me!==s?(Wo=null,Xo=Et()+500,vs(t,s)):ps=Ks(t,s);e:do try{if(Ee!==0&&de!==null){s=de;var v=kt;t:switch(Ee){case 1:Ee=0,kt=null,xs(t,s,v,1);break;case 2:case 9:if(Cf(v)){Ee=0,kt=null,ym(s);break}s=function(){Ee!==2&&Ee!==9||ke!==t||(Ee=7),un(t)},v.then(s,s);break e;case 3:Ee=7;break e;case 4:Ee=5;break e;case 7:Cf(v)?(Ee=0,kt=null,ym(s)):(Ee=0,kt=null,xs(t,s,v,7));break;case 5:var _=null;switch(de.tag){case 26:_=de.memoizedState;case 5:case 27:var T=de;if(_?np(_):T.stateNode.complete){Ee=0,kt=null;var A=T.sibling;if(A!==null)de=A;else{var j=T.return;j!==null?(de=j,tl(j)):de=null}break t}}Ee=0,kt=null,xs(t,s,v,5);break;case 6:Ee=0,kt=null,xs(t,s,v,6);break;case 8:Lu(),Ge=6;break e;default:throw Error(a(462))}}wx();break}catch(V){fm(t,V)}while(!0);return gn=bi=null,B.H=u,B.A=m,we=o,de!==null?0:(ke=null,me=0,bo(),Ge)}function wx(){for(;de!==null&&!zv();)gm(de)}function gm(t){var s=Bh(t.alternate,t,Cn);t.memoizedProps=t.pendingProps,s===null?tl(t):de=s}function ym(t){var s=t,o=s.alternate;switch(s.tag){case 15:case 0:s=Uh(o,s,s.pendingProps,s.type,void 0,me);break;case 11:s=Uh(o,s,s.pendingProps,s.type.render,s.ref,me);break;case 5:Zr(s);default:Hh(o,s),s=de=pf(s,Cn),s=Bh(o,s,Cn)}t.memoizedProps=t.pendingProps,s===null?tl(t):de=s}function xs(t,s,o,u){gn=bi=null,Zr(s),rs=null,fa=0;var m=s.return;try{if(ux(t,m,s,o,me)){Ge=1,Ho(t,Vt(o,t.current)),de=null;return}}catch(v){if(m!==null)throw de=m,v;Ge=1,Ho(t,Vt(o,t.current)),de=null;return}s.flags&32768?(ge||u===1?t=!0:ps||(me&536870912)!==0?t=!1:(Fn=t=!0,(u===2||u===9||u===3||u===6)&&(u=Mt.current,u!==null&&u.tag===13&&(u.flags|=16384))),vm(s,t)):tl(s)}function tl(t){var s=t;do{if((s.flags&32768)!==0){vm(s,Fn);return}t=s.return;var o=fx(s.alternate,s,Cn);if(o!==null){de=o;return}if(s=s.sibling,s!==null){de=s;return}de=s=t}while(s!==null);Ge===0&&(Ge=5)}function vm(t,s){do{var o=hx(t.alternate,t);if(o!==null){o.flags&=32767,de=o;return}if(o=t.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(t=t.sibling,t!==null)){de=t;return}de=t=o}while(t!==null);Ge=6,de=null}function xm(t,s,o,u,m,v,_,T,A){t.cancelPendingCommit=null;do nl();while(tt!==0);if((we&6)!==0)throw Error(a(327));if(s!==null){if(s===t.current)throw Error(a(177));if(v=s.lanes|s.childLanes,v|=Cr,e0(t,o,v,_,T,A),t===ke&&(de=ke=null,me=0),ys=s,Yn=t,Nn=o,Uu=v,ju=m,rm=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Ex(io,function(){return Tm(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=B.T,B.T=null,m=J.p,J.p=2,_=we,we|=4;try{mx(t,s,o)}finally{we=_,J.p=m,B.T=u}}tt=1,bm(),wm(),_m()}}function bm(){if(tt===1){tt=0;var t=Yn,s=ys,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=B.T,B.T=null;var u=J.p;J.p=2;var m=we;we|=4;try{em(s,t);var v=Qu,_=of(t.containerInfo),T=v.focusedElem,A=v.selectionRange;if(_!==T&&T&&T.ownerDocument&&af(T.ownerDocument.documentElement,T)){if(A!==null&&wr(T)){var j=A.start,V=A.end;if(V===void 0&&(V=j),"selectionStart"in T)T.selectionStart=j,T.selectionEnd=Math.min(V,T.value.length);else{var G=T.ownerDocument||document,O=G&&G.defaultView||window;if(O.getSelection){var P=O.getSelection(),K=T.textContent.length,se=Math.min(A.start,K),Me=A.end===void 0?se:Math.min(A.end,K);!P.extend&&se>Me&&(_=Me,Me=se,se=_);var I=sf(T,se),R=sf(T,Me);if(I&&R&&(P.rangeCount!==1||P.anchorNode!==I.node||P.anchorOffset!==I.offset||P.focusNode!==R.node||P.focusOffset!==R.offset)){var U=G.createRange();U.setStart(I.node,I.offset),P.removeAllRanges(),se>Me?(P.addRange(U),P.extend(R.node,R.offset)):(U.setEnd(R.node,R.offset),P.addRange(U))}}}}for(G=[],P=T;P=P.parentNode;)P.nodeType===1&&G.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<G.length;T++){var H=G[T];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}ml=!!Ku,Qu=Ku=null}finally{we=m,J.p=u,B.T=o}}t.current=s,tt=2}}function wm(){if(tt===2){tt=0;var t=Yn,s=ys,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=B.T,B.T=null;var u=J.p;J.p=2;var m=we;we|=4;try{Kh(t,s.alternate,s)}finally{we=m,J.p=u,B.T=o}}tt=3}}function _m(){if(tt===4||tt===3){tt=0,Fv();var t=Yn,s=ys,o=Nn,u=rm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?tt=5:(tt=0,ys=Yn=null,Sm(t,t.pendingLanes));var m=t.pendingLanes;if(m===0&&(Jn=null),nr(o),s=s.stateNode,Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(Ys,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=B.T,m=J.p,J.p=2,B.T=null;try{for(var v=t.onRecoverableError,_=0;_<u.length;_++){var T=u[_];v(T.value,{componentStack:T.stack})}}finally{B.T=s,J.p=m}}(Nn&3)!==0&&nl(),un(t),m=t.pendingLanes,(o&261930)!==0&&(m&42)!==0?t===Ou?Ra++:(Ra=0,Ou=t):Ra=0,Ma(0)}}function Sm(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,ca(s)))}function nl(){return bm(),wm(),_m(),Tm()}function Tm(){if(tt!==5)return!1;var t=Yn,s=Uu;Uu=0;var o=nr(Nn),u=B.T,m=J.p;try{J.p=32>o?32:o,B.T=null,o=ju,ju=null;var v=Yn,_=Nn;if(tt=0,ys=Yn=null,Nn=0,(we&6)!==0)throw Error(a(331));var T=we;if(we|=4,am(v.current),nm(v,v.current,_,o),we=T,Ma(0,!1),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(Ys,v)}catch{}return!0}finally{J.p=m,B.T=u,Sm(t,s)}}function Em(t,s,o){s=Vt(o,s),s=mu(t.stateNode,s,2),t=Vn(t,s,2),t!==null&&(Qs(t,2),un(t))}function Ce(t,s,o){if(t.tag===3)Em(t,t,o);else for(;s!==null;){if(s.tag===3){Em(s,t,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Jn===null||!Jn.has(u))){t=Vt(o,t),o=Ch(2),u=Vn(s,o,2),u!==null&&(Nh(o,u,s,t),Qs(u,2),un(u));break}}s=s.return}}function qu(t,s,o){var u=t.pingCache;if(u===null){u=t.pingCache=new yx;var m=new Set;u.set(s,m)}else m=u.get(s),m===void 0&&(m=new Set,u.set(s,m));m.has(o)||(Iu=!0,m.add(o),t=_x.bind(null,t,s,o),s.then(t,t))}function _x(t,s,o){var u=t.pingCache;u!==null&&u.delete(s),t.pingedLanes|=t.suspendedLanes&o,t.warmLanes&=~o,ke===t&&(me&o)===o&&(Ge===4||Ge===3&&(me&62914560)===me&&300>Et()-Qo?(we&2)===0&&vs(t,0):ku|=o,gs===me&&(gs=0)),un(t)}function Cm(t,s){s===0&&(s=xd()),t=yi(t,s),t!==null&&(Qs(t,s),un(t))}function Sx(t){var s=t.memoizedState,o=0;s!==null&&(o=s.retryLane),Cm(t,o)}function Tx(t,s){var o=0;switch(t.tag){case 31:case 13:var u=t.stateNode,m=t.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(s),Cm(t,o)}function Ex(t,s){return Wl(t,s)}var il=null,bs=null,Bu=!1,sl=!1,Vu=!1,Qn=0;function un(t){t!==bs&&t.next===null&&(bs===null?il=bs=t:bs=bs.next=t),sl=!0,Bu||(Bu=!0,Nx())}function Ma(t,s){if(!Vu&&sl){Vu=!0;do for(var o=!1,u=il;u!==null;){if(t!==0){var m=u.pendingLanes;if(m===0)var v=0;else{var _=u.suspendedLanes,T=u.pingedLanes;v=(1<<31-Nt(42|t)+1)-1,v&=m&~(_&~T),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(o=!0,Mm(u,v))}else v=me,v=lo(u,u===ke?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||Ks(u,v)||(o=!0,Mm(u,v));u=u.next}while(o);Vu=!1}}function Cx(){Nm()}function Nm(){sl=Bu=!1;var t=0;Qn!==0&&Lx()&&(t=Qn);for(var s=Et(),o=null,u=il;u!==null;){var m=u.next,v=Am(u,s);v===0?(u.next=null,o===null?il=m:o.next=m,m===null&&(bs=o)):(o=u,(t!==0||(v&3)!==0)&&(sl=!0)),u=m}tt!==0&&tt!==5||Ma(t),Qn!==0&&(Qn=0)}function Am(t,s){for(var o=t.suspendedLanes,u=t.pingedLanes,m=t.expirationTimes,v=t.pendingLanes&-62914561;0<v;){var _=31-Nt(v),T=1<<_,A=m[_];A===-1?((T&o)===0||(T&u)!==0)&&(m[_]=Zv(T,s)):A<=s&&(t.expiredLanes|=T),v&=~T}if(s=ke,o=me,o=lo(t,t===s?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,o===0||t===s&&(Ee===2||Ee===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&Zl(u),t.callbackNode=null,t.callbackPriority=0;if((o&3)===0||Ks(t,o)){if(s=o&-o,s===t.callbackPriority)return s;switch(u!==null&&Zl(u),nr(o)){case 2:case 8:o=yd;break;case 32:o=io;break;case 268435456:o=vd;break;default:o=io}return u=Rm.bind(null,t),o=Wl(o,u),t.callbackPriority=s,t.callbackNode=o,s}return u!==null&&u!==null&&Zl(u),t.callbackPriority=2,t.callbackNode=null,2}function Rm(t,s){if(tt!==0&&tt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var o=t.callbackNode;if(nl()&&t.callbackNode!==o)return null;var u=me;return u=lo(t,t===ke?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(cm(t,u,s),Am(t,Et()),t.callbackNode!=null&&t.callbackNode===o?Rm.bind(null,t):null)}function Mm(t,s){if(nl())return null;cm(t,s,!0)}function Nx(){qx(function(){(we&6)!==0?Wl(gd,Cx):Nm()})}function Hu(){if(Qn===0){var t=as;t===0&&(t=so,so<<=1,(so&261888)===0&&(so=256)),Qn=t}return Qn}function Im(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:fo(""+t)}function km(t,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,t.id&&o.setAttribute("form",t.id),s.parentNode.insertBefore(o,s),t=new FormData(t),o.parentNode.removeChild(o),t}function Ax(t,s,o,u,m){if(s==="submit"&&o&&o.stateNode===m){var v=Im((m[gt]||null).action),_=u.submitter;_&&(s=(s=_[gt]||null)?Im(s.formAction):_.getAttribute("formAction"),s!==null&&(v=s,_=null));var T=new go("action","action",null,u,m);t.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Qn!==0){var A=_?km(m,_):new FormData(m);ru(o,{pending:!0,data:A,method:m.method,action:v},null,A)}}else typeof v=="function"&&(T.preventDefault(),A=_?km(m,_):new FormData(m),ru(o,{pending:!0,data:A,method:m.method,action:v},v,A))},currentTarget:m}]})}}for(var Gu=0;Gu<Er.length;Gu++){var zu=Er[Gu],Rx=zu.toLowerCase(),Mx=zu[0].toUpperCase()+zu.slice(1);Wt(Rx,"on"+Mx)}Wt(uf,"onAnimationEnd"),Wt(cf,"onAnimationIteration"),Wt(df,"onAnimationStart"),Wt("dblclick","onDoubleClick"),Wt("focusin","onFocus"),Wt("focusout","onBlur"),Wt($0,"onTransitionRun"),Wt(J0,"onTransitionStart"),Wt(Y0,"onTransitionCancel"),Wt(ff,"onTransitionEnd"),Fi("onMouseEnter",["mouseout","mouseover"]),Fi("onMouseLeave",["mouseout","mouseover"]),Fi("onPointerEnter",["pointerout","pointerover"]),Fi("onPointerLeave",["pointerout","pointerover"]),hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ix=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ia));function Dm(t,s){s=(s&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],m=u.event;u=u.listeners;e:{var v=void 0;if(s)for(var _=u.length-1;0<=_;_--){var T=u[_],A=T.instance,j=T.currentTarget;if(T=T.listener,A!==v&&m.isPropagationStopped())break e;v=T,m.currentTarget=j;try{v(m)}catch(V){xo(V)}m.currentTarget=null,v=A}else for(_=0;_<u.length;_++){if(T=u[_],A=T.instance,j=T.currentTarget,T=T.listener,A!==v&&m.isPropagationStopped())break e;v=T,m.currentTarget=j;try{v(m)}catch(V){xo(V)}m.currentTarget=null,v=A}}}}function fe(t,s){var o=s[ir];o===void 0&&(o=s[ir]=new Set);var u=t+"__bubble";o.has(u)||(Um(s,t,2,!1),o.add(u))}function Fu(t,s,o){var u=0;s&&(u|=4),Um(o,t,u,s)}var al="_reactListening"+Math.random().toString(36).slice(2);function $u(t){if(!t[al]){t[al]=!0,Cd.forEach(function(o){o!=="selectionchange"&&(Ix.has(o)||Fu(o,!1,t),Fu(o,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[al]||(s[al]=!0,Fu("selectionchange",!1,s))}}function Um(t,s,o,u){switch(up(s)){case 2:var m=ab;break;case 8:m=ob;break;default:m=lc}o=m.bind(null,s,o,t),m=void 0,!fr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),u?m!==void 0?t.addEventListener(s,o,{capture:!0,passive:m}):t.addEventListener(s,o,!0):m!==void 0?t.addEventListener(s,o,{passive:m}):t.addEventListener(s,o,!1)}function Ju(t,s,o,u,m){var v=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===m)break;if(_===4)for(_=u.return;_!==null;){var A=_.tag;if((A===3||A===4)&&_.stateNode.containerInfo===m)return;_=_.return}for(;T!==null;){if(_=Hi(T),_===null)return;if(A=_.tag,A===5||A===6||A===26||A===27){u=v=_;continue e}T=T.parentNode}}u=u.return}Pd(function(){var j=v,V=cr(o),G=[];e:{var O=hf.get(t);if(O!==void 0){var P=go,K=t;switch(t){case"keypress":if(mo(o)===0)break e;case"keydown":case"keyup":P=T0;break;case"focusin":K="focus",P=gr;break;case"focusout":K="blur",P=gr;break;case"beforeblur":case"afterblur":P=gr;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=Vd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=f0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=N0;break;case uf:case cf:case df:P=p0;break;case ff:P=R0;break;case"scroll":case"scrollend":P=c0;break;case"wheel":P=I0;break;case"copy":case"cut":case"paste":P=y0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=Gd;break;case"toggle":case"beforetoggle":P=D0}var se=(s&4)!==0,Me=!se&&(t==="scroll"||t==="scrollend"),I=se?O!==null?O+"Capture":null:O;se=[];for(var R=j,U;R!==null;){var H=R;if(U=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||U===null||I===null||(H=Zs(R,I),H!=null&&se.push(ka(R,H,U))),Me)break;R=R.return}0<se.length&&(O=new P(O,K,null,o,V),G.push({event:O,listeners:se}))}}if((s&7)===0){e:{if(O=t==="mouseover"||t==="pointerover",P=t==="mouseout"||t==="pointerout",O&&o!==ur&&(K=o.relatedTarget||o.fromElement)&&(Hi(K)||K[Vi]))break e;if((P||O)&&(O=V.window===V?V:(O=V.ownerDocument)?O.defaultView||O.parentWindow:window,P?(K=o.relatedTarget||o.toElement,P=j,K=K?Hi(K):null,K!==null&&(Me=r(K),se=K.tag,K!==Me||se!==5&&se!==27&&se!==6)&&(K=null)):(P=null,K=j),P!==K)){if(se=Vd,H="onMouseLeave",I="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(se=Gd,H="onPointerLeave",I="onPointerEnter",R="pointer"),Me=P==null?O:Ws(P),U=K==null?O:Ws(K),O=new se(H,R+"leave",P,o,V),O.target=Me,O.relatedTarget=U,H=null,Hi(V)===j&&(se=new se(I,R+"enter",K,o,V),se.target=U,se.relatedTarget=Me,H=se),Me=H,P&&K)t:{for(se=kx,I=P,R=K,U=0,H=I;H;H=se(H))U++;H=0;for(var ee=R;ee;ee=se(ee))H++;for(;0<U-H;)I=se(I),U--;for(;0<H-U;)R=se(R),H--;for(;U--;){if(I===R||R!==null&&I===R.alternate){se=I;break t}I=se(I),R=se(R)}se=null}else se=null;P!==null&&jm(G,O,P,se,!1),K!==null&&Me!==null&&jm(G,Me,K,se,!0)}}e:{if(O=j?Ws(j):window,P=O.nodeName&&O.nodeName.toLowerCase(),P==="select"||P==="input"&&O.type==="file")var ve=Xd;else if(Kd(O))if(Wd)ve=G0;else{ve=V0;var W=B0}else P=O.nodeName,!P||P.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?j&&rr(j.elementType)&&(ve=Xd):ve=H0;if(ve&&(ve=ve(t,j))){Qd(G,ve,o,V);break e}W&&W(t,O,j),t==="focusout"&&j&&O.type==="number"&&j.memoizedProps.value!=null&&lr(O,"number",O.value)}switch(W=j?Ws(j):window,t){case"focusin":(Kd(W)||W.contentEditable==="true")&&(Xi=W,_r=j,la=null);break;case"focusout":la=_r=Xi=null;break;case"mousedown":Sr=!0;break;case"contextmenu":case"mouseup":case"dragend":Sr=!1,lf(G,o,V);break;case"selectionchange":if(F0)break;case"keydown":case"keyup":lf(G,o,V)}var ue;if(vr)e:{switch(t){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else Qi?Jd(t,o)&&(pe="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(pe="onCompositionStart");pe&&(zd&&o.locale!=="ko"&&(Qi||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&Qi&&(ue=qd()):(Un=V,hr="value"in Un?Un.value:Un.textContent,Qi=!0)),W=ol(j,pe),0<W.length&&(pe=new Hd(pe,t,null,o,V),G.push({event:pe,listeners:W}),ue?pe.data=ue:(ue=Yd(o),ue!==null&&(pe.data=ue)))),(ue=j0?O0(t,o):L0(t,o))&&(pe=ol(j,"onBeforeInput"),0<pe.length&&(W=new Hd("onBeforeInput","beforeinput",null,o,V),G.push({event:W,listeners:pe}),W.data=ue)),Ax(G,t,j,o,V)}Dm(G,s)})}function ka(t,s,o){return{instance:t,listener:s,currentTarget:o}}function ol(t,s){for(var o=s+"Capture",u=[];t!==null;){var m=t,v=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=Zs(t,o),m!=null&&u.unshift(ka(t,m,v)),m=Zs(t,s),m!=null&&u.push(ka(t,m,v))),t.tag===3)return u;t=t.return}return[]}function kx(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function jm(t,s,o,u,m){for(var v=s._reactName,_=[];o!==null&&o!==u;){var T=o,A=T.alternate,j=T.stateNode;if(T=T.tag,A!==null&&A===u)break;T!==5&&T!==26&&T!==27||j===null||(A=j,m?(j=Zs(o,v),j!=null&&_.unshift(ka(o,j,A))):m||(j=Zs(o,v),j!=null&&_.push(ka(o,j,A)))),o=o.return}_.length!==0&&t.push({event:s,listeners:_})}var Dx=/\r\n?/g,Ux=/\u0000|\uFFFD/g;function Om(t){return(typeof t=="string"?t:""+t).replace(Dx,`
`).replace(Ux,"")}function Lm(t,s){return s=Om(s),Om(t)===s}function Re(t,s,o,u,m,v){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Ji(t,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Ji(t,""+u);break;case"className":uo(t,"class",u);break;case"tabIndex":uo(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":uo(t,o,u);break;case"style":Od(t,u,v);break;case"data":if(s!=="object"){uo(t,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){t.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(o);break}u=fo(""+u),t.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(o==="formAction"?(s!=="input"&&Re(t,s,"name",m.name,m,null),Re(t,s,"formEncType",m.formEncType,m,null),Re(t,s,"formMethod",m.formMethod,m,null),Re(t,s,"formTarget",m.formTarget,m,null)):(Re(t,s,"encType",m.encType,m,null),Re(t,s,"method",m.method,m,null),Re(t,s,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(o);break}u=fo(""+u),t.setAttribute(o,u);break;case"onClick":u!=null&&(t.onclick=fn);break;case"onScroll":u!=null&&fe("scroll",t);break;case"onScrollEnd":u!=null&&fe("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(a(60));t.innerHTML=o}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}o=fo(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(o,""+u):t.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(o,""):t.removeAttribute(o);break;case"capture":case"download":u===!0?t.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(o,u):t.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(o,u):t.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(o):t.setAttribute(o,u);break;case"popover":fe("beforetoggle",t),fe("toggle",t),ro(t,"popover",u);break;case"xlinkActuate":dn(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":dn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":dn(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":dn(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":dn(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":dn(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":dn(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":dn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":dn(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ro(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=r0.get(o)||o,ro(t,o,u))}}function Yu(t,s,o,u,m,v){switch(o){case"style":Od(t,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(a(60));t.innerHTML=o}}break;case"children":typeof u=="string"?Ji(t,u):(typeof u=="number"||typeof u=="bigint")&&Ji(t,""+u);break;case"onScroll":u!=null&&fe("scroll",t);break;case"onScrollEnd":u!=null&&fe("scrollend",t);break;case"onClick":u!=null&&(t.onclick=fn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nd.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),s=o.slice(2,m?o.length-7:void 0),v=t[gt]||null,v=v!=null?v[o]:null,typeof v=="function"&&t.removeEventListener(s,v,m),typeof u=="function")){typeof v!="function"&&v!==null&&(o in t?t[o]=null:t.hasAttribute(o)&&t.removeAttribute(o)),t.addEventListener(s,u,m);break e}o in t?t[o]=u:u===!0?t.setAttribute(o,""):ro(t,o,u)}}}function ut(t,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fe("error",t),fe("load",t);var u=!1,m=!1,v;for(v in o)if(o.hasOwnProperty(v)){var _=o[v];if(_!=null)switch(v){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:Re(t,s,v,_,o,null)}}m&&Re(t,s,"srcSet",o.srcSet,o,null),u&&Re(t,s,"src",o.src,o,null);return;case"input":fe("invalid",t);var T=v=_=m=null,A=null,j=null;for(u in o)if(o.hasOwnProperty(u)){var V=o[u];if(V!=null)switch(u){case"name":m=V;break;case"type":_=V;break;case"checked":A=V;break;case"defaultChecked":j=V;break;case"value":v=V;break;case"defaultValue":T=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(a(137,s));break;default:Re(t,s,u,V,o,null)}}kd(t,v,T,A,j,_,m,!1);return;case"select":fe("invalid",t),u=_=v=null;for(m in o)if(o.hasOwnProperty(m)&&(T=o[m],T!=null))switch(m){case"value":v=T;break;case"defaultValue":_=T;break;case"multiple":u=T;default:Re(t,s,m,T,o,null)}s=v,o=_,t.multiple=!!u,s!=null?$i(t,!!u,s,!1):o!=null&&$i(t,!!u,o,!0);return;case"textarea":fe("invalid",t),v=m=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(T=o[_],T!=null))switch(_){case"value":u=T;break;case"defaultValue":m=T;break;case"children":v=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:Re(t,s,_,T,o,null)}Ud(t,u,m,v);return;case"option":for(A in o)if(o.hasOwnProperty(A)&&(u=o[A],u!=null))switch(A){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Re(t,s,A,u,o,null)}return;case"dialog":fe("beforetoggle",t),fe("toggle",t),fe("cancel",t),fe("close",t);break;case"iframe":case"object":fe("load",t);break;case"video":case"audio":for(u=0;u<Ia.length;u++)fe(Ia[u],t);break;case"image":fe("error",t),fe("load",t);break;case"details":fe("toggle",t);break;case"embed":case"source":case"link":fe("error",t),fe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in o)if(o.hasOwnProperty(j)&&(u=o[j],u!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:Re(t,s,j,u,o,null)}return;default:if(rr(s)){for(V in o)o.hasOwnProperty(V)&&(u=o[V],u!==void 0&&Yu(t,s,V,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&Re(t,s,T,u,o,null))}function jx(t,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,_=null,T=null,A=null,j=null,V=null;for(P in o){var G=o[P];if(o.hasOwnProperty(P)&&G!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":A=G;default:u.hasOwnProperty(P)||Re(t,s,P,null,u,G)}}for(var O in u){var P=u[O];if(G=o[O],u.hasOwnProperty(O)&&(P!=null||G!=null))switch(O){case"type":v=P;break;case"name":m=P;break;case"checked":j=P;break;case"defaultChecked":V=P;break;case"value":_=P;break;case"defaultValue":T=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(a(137,s));break;default:P!==G&&Re(t,s,O,P,u,G)}}or(t,_,T,A,j,V,v,m);return;case"select":P=_=T=O=null;for(v in o)if(A=o[v],o.hasOwnProperty(v)&&A!=null)switch(v){case"value":break;case"multiple":P=A;default:u.hasOwnProperty(v)||Re(t,s,v,null,u,A)}for(m in u)if(v=u[m],A=o[m],u.hasOwnProperty(m)&&(v!=null||A!=null))switch(m){case"value":O=v;break;case"defaultValue":T=v;break;case"multiple":_=v;default:v!==A&&Re(t,s,m,v,u,A)}s=T,o=_,u=P,O!=null?$i(t,!!o,O,!1):!!u!=!!o&&(s!=null?$i(t,!!o,s,!0):$i(t,!!o,o?[]:"",!1));return;case"textarea":P=O=null;for(T in o)if(m=o[T],o.hasOwnProperty(T)&&m!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Re(t,s,T,null,u,m)}for(_ in u)if(m=u[_],v=o[_],u.hasOwnProperty(_)&&(m!=null||v!=null))switch(_){case"value":O=m;break;case"defaultValue":P=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(a(91));break;default:m!==v&&Re(t,s,_,m,u,v)}Dd(t,O,P);return;case"option":for(var K in o)if(O=o[K],o.hasOwnProperty(K)&&O!=null&&!u.hasOwnProperty(K))switch(K){case"selected":t.selected=!1;break;default:Re(t,s,K,null,u,O)}for(A in u)if(O=u[A],P=o[A],u.hasOwnProperty(A)&&O!==P&&(O!=null||P!=null))switch(A){case"selected":t.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:Re(t,s,A,O,u,P)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var se in o)O=o[se],o.hasOwnProperty(se)&&O!=null&&!u.hasOwnProperty(se)&&Re(t,s,se,null,u,O);for(j in u)if(O=u[j],P=o[j],u.hasOwnProperty(j)&&O!==P&&(O!=null||P!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(a(137,s));break;default:Re(t,s,j,O,u,P)}return;default:if(rr(s)){for(var Me in o)O=o[Me],o.hasOwnProperty(Me)&&O!==void 0&&!u.hasOwnProperty(Me)&&Yu(t,s,Me,void 0,u,O);for(V in u)O=u[V],P=o[V],!u.hasOwnProperty(V)||O===P||O===void 0&&P===void 0||Yu(t,s,V,O,u,P);return}}for(var I in o)O=o[I],o.hasOwnProperty(I)&&O!=null&&!u.hasOwnProperty(I)&&Re(t,s,I,null,u,O);for(G in u)O=u[G],P=o[G],!u.hasOwnProperty(G)||O===P||O==null&&P==null||Re(t,s,G,O,u,P)}function Pm(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ox(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],v=m.transferSize,_=m.initiatorType,T=m.duration;if(v&&T&&Pm(_)){for(_=0,T=m.responseEnd,u+=1;u<o.length;u++){var A=o[u],j=A.startTime;if(j>T)break;var V=A.transferSize,G=A.initiatorType;V&&Pm(G)&&(A=A.responseEnd,_+=V*(A<T?1:(T-j)/(A-j)))}if(--u,s+=8*(v+_)/(m.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Ku=null,Qu=null;function ll(t){return t.nodeType===9?t:t.ownerDocument}function qm(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bm(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Xu(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wu=null;function Lx(){var t=window.event;return t&&t.type==="popstate"?t===Wu?!1:(Wu=t,!0):(Wu=null,!1)}var Vm=typeof setTimeout=="function"?setTimeout:void 0,Px=typeof clearTimeout=="function"?clearTimeout:void 0,Hm=typeof Promise=="function"?Promise:void 0,qx=typeof queueMicrotask=="function"?queueMicrotask:typeof Hm<"u"?function(t){return Hm.resolve(null).then(t).catch(Bx)}:Vm;function Bx(t){setTimeout(function(){throw t})}function Xn(t){return t==="head"}function Gm(t,s){var o=s,u=0;do{var m=o.nextSibling;if(t.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){t.removeChild(m),Ts(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Da(t.ownerDocument.documentElement);else if(o==="head"){o=t.ownerDocument.head,Da(o);for(var v=o.firstChild;v;){var _=v.nextSibling,T=v.nodeName;v[Xs]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&v.rel.toLowerCase()==="stylesheet"||o.removeChild(v),v=_}}else o==="body"&&Da(t.ownerDocument.body);o=m}while(o);Ts(s)}function zm(t,s){var o=t;t=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(t===0)break;t--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||t++;o=u}while(o)}function Zu(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Zu(o),sr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}t.removeChild(o)}}function Vx(t,s,o,u){for(;t.nodeType===1;){var m=o;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[Xs])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(v=t.getAttribute("rel"),v==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(v!==m.rel||t.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||t.getAttribute("title")!==(m.title==null?null:m.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(v=t.getAttribute("src"),(v!==(m.src==null?null:m.src)||t.getAttribute("type")!==(m.type==null?null:m.type)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&t.getAttribute("name")===v)return t}else return t;if(t=$t(t.nextSibling),t===null)break}return null}function Hx(t,s,o){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=$t(t.nextSibling),t===null))return null;return t}function Fm(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=$t(t.nextSibling),t===null))return null;return t}function ec(t){return t.data==="$?"||t.data==="$~"}function tc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Gx(t,s){var o=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function $t(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var nc=null;function $m(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"||o==="/&"){if(s===0)return $t(t.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}t=t.nextSibling}return null}function Jm(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return t;s--}else o!=="/$"&&o!=="/&"||s++}t=t.previousSibling}return null}function Ym(t,s,o){switch(s=ll(o),t){case"html":if(t=s.documentElement,!t)throw Error(a(452));return t;case"head":if(t=s.head,!t)throw Error(a(453));return t;case"body":if(t=s.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Da(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);sr(t)}var Jt=new Map,Km=new Set;function rl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var An=J.d;J.d={f:zx,r:Fx,D:$x,C:Jx,L:Yx,m:Kx,X:Xx,S:Qx,M:Wx};function zx(){var t=An.f(),s=Zo();return t||s}function Fx(t){var s=Gi(t);s!==null&&s.tag===5&&s.type==="form"?fh(s):An.r(t)}var ws=typeof document>"u"?null:document;function Qm(t,s,o){var u=ws;if(u&&typeof s=="string"&&s){var m=qt(s);m='link[rel="'+t+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),Km.has(m)||(Km.add(m),t={rel:t,crossOrigin:o,href:s},u.querySelector(m)===null&&(s=u.createElement("link"),ut(s,"link",t),it(s),u.head.appendChild(s)))}}function $x(t){An.D(t),Qm("dns-prefetch",t,null)}function Jx(t,s){An.C(t,s),Qm("preconnect",t,s)}function Yx(t,s,o){An.L(t,s,o);var u=ws;if(u&&t&&s){var m='link[rel="preload"][as="'+qt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+qt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+qt(o.imageSizes)+'"]')):m+='[href="'+qt(t)+'"]';var v=m;switch(s){case"style":v=_s(t);break;case"script":v=Ss(t)}Jt.has(v)||(t=b({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:t,as:s},o),Jt.set(v,t),u.querySelector(m)!==null||s==="style"&&u.querySelector(Ua(v))||s==="script"&&u.querySelector(ja(v))||(s=u.createElement("link"),ut(s,"link",t),it(s),u.head.appendChild(s)))}}function Kx(t,s){An.m(t,s);var o=ws;if(o&&t){var u=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+qt(u)+'"][href="'+qt(t)+'"]',v=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ss(t)}if(!Jt.has(v)&&(t=b({rel:"modulepreload",href:t},s),Jt.set(v,t),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ja(v)))return}u=o.createElement("link"),ut(u,"link",t),it(u),o.head.appendChild(u)}}}function Qx(t,s,o){An.S(t,s,o);var u=ws;if(u&&t){var m=zi(u).hoistableStyles,v=_s(t);s=s||"default";var _=m.get(v);if(!_){var T={loading:0,preload:null};if(_=u.querySelector(Ua(v)))T.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":s},o),(o=Jt.get(v))&&ic(t,o);var A=_=u.createElement("link");it(A),ut(A,"link",t),A._p=new Promise(function(j,V){A.onload=j,A.onerror=V}),A.addEventListener("load",function(){T.loading|=1}),A.addEventListener("error",function(){T.loading|=2}),T.loading|=4,ul(_,s,u)}_={type:"stylesheet",instance:_,count:1,state:T},m.set(v,_)}}}function Xx(t,s){An.X(t,s);var o=ws;if(o&&t){var u=zi(o).hoistableScripts,m=Ss(t),v=u.get(m);v||(v=o.querySelector(ja(m)),v||(t=b({src:t,async:!0},s),(s=Jt.get(m))&&sc(t,s),v=o.createElement("script"),it(v),ut(v,"link",t),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(m,v))}}function Wx(t,s){An.M(t,s);var o=ws;if(o&&t){var u=zi(o).hoistableScripts,m=Ss(t),v=u.get(m);v||(v=o.querySelector(ja(m)),v||(t=b({src:t,async:!0,type:"module"},s),(s=Jt.get(m))&&sc(t,s),v=o.createElement("script"),it(v),ut(v,"link",t),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(m,v))}}function Xm(t,s,o,u){var m=(m=Xt.current)?rl(m):null;if(!m)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=_s(o.href),o=zi(m).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){t=_s(o.href);var v=zi(m).hoistableStyles,_=v.get(t);if(_||(m=m.ownerDocument||m,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(t,_),(v=m.querySelector(Ua(t)))&&!v._p&&(_.instance=v,_.state.loading=5),Jt.has(t)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Jt.set(t,o),v||Zx(m,t,o,_.state))),s&&u===null)throw Error(a(528,""));return _}if(s&&u!==null)throw Error(a(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ss(o),o=zi(m).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function _s(t){return'href="'+qt(t)+'"'}function Ua(t){return'link[rel="stylesheet"]['+t+"]"}function Wm(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function Zx(t,s,o,u){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=t.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),ut(s,"link",o),it(s),t.head.appendChild(s))}function Ss(t){return'[src="'+qt(t)+'"]'}function ja(t){return"script[async]"+t}function Zm(t,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=t.querySelector('style[data-href~="'+qt(o.href)+'"]');if(u)return s.instance=u,it(u),u;var m=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),it(u),ut(u,"style",m),ul(u,o.precedence,t),s.instance=u;case"stylesheet":m=_s(o.href);var v=t.querySelector(Ua(m));if(v)return s.state.loading|=4,s.instance=v,it(v),v;u=Wm(o),(m=Jt.get(m))&&ic(u,m),v=(t.ownerDocument||t).createElement("link"),it(v);var _=v;return _._p=new Promise(function(T,A){_.onload=T,_.onerror=A}),ut(v,"link",u),s.state.loading|=4,ul(v,o.precedence,t),s.instance=v;case"script":return v=Ss(o.src),(m=t.querySelector(ja(v)))?(s.instance=m,it(m),m):(u=o,(m=Jt.get(v))&&(u=b({},o),sc(u,m)),t=t.ownerDocument||t,m=t.createElement("script"),it(m),ut(m,"link",u),t.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,ul(u,o.precedence,t));return s.instance}function ul(t,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,v=m,_=0;_<u.length;_++){var T=u[_];if(T.dataset.precedence===s)v=T;else if(v!==m)break}v?v.parentNode.insertBefore(t,v.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(t,s.firstChild))}function ic(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function sc(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var cl=null;function ep(t,s,o){if(cl===null){var u=new Map,m=cl=new Map;m.set(o,u)}else m=cl,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(t))return u;for(u.set(t,null),o=o.getElementsByTagName(t),m=0;m<o.length;m++){var v=o[m];if(!(v[Xs]||v[at]||t==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var _=v.getAttribute(s)||"";_=t+_;var T=u.get(_);T?T.push(v):u.set(_,[v])}}return u}function tp(t,s,o){t=t.ownerDocument||t,t.head.insertBefore(o,s==="title"?t.querySelector("head > title"):null)}function eb(t,s,o){if(o===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function np(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function tb(t,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=_s(u.href),v=s.querySelector(Ua(m));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=dl.bind(t),s.then(t,t)),o.state.loading|=4,o.instance=v,it(v);return}v=s.ownerDocument||s,u=Wm(u),(m=Jt.get(m))&&ic(u,m),v=v.createElement("link"),it(v);var _=v;_._p=new Promise(function(T,A){_.onload=T,_.onerror=A}),ut(v,"link",u),o.instance=v}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(t.count++,o=dl.bind(t),s.addEventListener("load",o),s.addEventListener("error",o))}}var ac=0;function nb(t,s){return t.stylesheets&&t.count===0&&hl(t,t.stylesheets),0<t.count||0<t.imgCount?function(o){var u=setTimeout(function(){if(t.stylesheets&&hl(t,t.stylesheets),t.unsuspend){var v=t.unsuspend;t.unsuspend=null,v()}},6e4+s);0<t.imgBytes&&ac===0&&(ac=62500*Ox());var m=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&hl(t,t.stylesheets),t.unsuspend)){var v=t.unsuspend;t.unsuspend=null,v()}},(t.imgBytes>ac?50:800)+s);return t.unsuspend=o,function(){t.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function dl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hl(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var fl=null;function hl(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,fl=new Map,s.forEach(ib,t),fl=null,dl.call(t))}function ib(t,s){if(!(s.state.loading&4)){var o=fl.get(t);if(o)var u=o.get(null);else{o=new Map,fl.set(t,o);for(var m=t.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var _=m[v];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}m=s.instance,_=m.getAttribute("data-precedence"),v=o.get(_)||u,v===u&&o.set(null,m),o.set(_,m),this.count++,u=dl.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),v?v.parentNode.insertBefore(m,v.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(m,t.firstChild)),s.state.loading|=4}}var Oa={$$typeof:k,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function sb(t,s,o,u,m,v,_,T,A){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=er(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=er(0),this.hiddenUpdates=er(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function ip(t,s,o,u,m,v,_,T,A,j,V,G){return t=new sb(t,s,o,_,A,j,V,G,T),s=1,v===!0&&(s|=24),v=Rt(3,null,null,s),t.current=v,v.stateNode=t,s=Pr(),s.refCount++,t.pooledCache=s,s.refCount++,v.memoizedState={element:u,isDehydrated:o,cache:s},Hr(v),t}function sp(t){return t?(t=es,t):es}function ap(t,s,o,u,m,v){m=sp(m),u.context===null?u.context=m:u.pendingContext=m,u=Bn(s),u.payload={element:o},v=v===void 0?null:v,v!==null&&(u.callback=v),o=Vn(t,u,s),o!==null&&(_t(o,t,s),ma(o,t,s))}function op(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<s?o:s}}function oc(t,s){op(t,s),(t=t.alternate)&&op(t,s)}function lp(t){if(t.tag===13||t.tag===31){var s=yi(t,67108864);s!==null&&_t(s,t,67108864),oc(t,67108864)}}function rp(t){if(t.tag===13||t.tag===31){var s=Ut();s=tr(s);var o=yi(t,s);o!==null&&_t(o,t,s),oc(t,s)}}var ml=!0;function ab(t,s,o,u){var m=B.T;B.T=null;var v=J.p;try{J.p=2,lc(t,s,o,u)}finally{J.p=v,B.T=m}}function ob(t,s,o,u){var m=B.T;B.T=null;var v=J.p;try{J.p=8,lc(t,s,o,u)}finally{J.p=v,B.T=m}}function lc(t,s,o,u){if(ml){var m=rc(u);if(m===null)Ju(t,s,u,pl,o),cp(t,u);else if(rb(m,t,s,o,u))u.stopPropagation();else if(cp(t,u),s&4&&-1<lb.indexOf(t)){for(;m!==null;){var v=Gi(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var _=fi(v.pendingLanes);if(_!==0){var T=v;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var A=1<<31-Nt(_);T.entanglements[1]|=A,_&=~A}un(v),(we&6)===0&&(Xo=Et()+500,Ma(0))}}break;case 31:case 13:T=yi(v,2),T!==null&&_t(T,v,2),Zo(),oc(v,2)}if(v=rc(u),v===null&&Ju(t,s,u,pl,o),v===m)break;m=v}m!==null&&u.stopPropagation()}else Ju(t,s,u,null,o)}}function rc(t){return t=cr(t),uc(t)}var pl=null;function uc(t){if(pl=null,t=Hi(t),t!==null){var s=r(t);if(s===null)t=null;else{var o=s.tag;if(o===13){if(t=c(s),t!==null)return t;t=null}else if(o===31){if(t=h(s),t!==null)return t;t=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return pl=t,null}function up(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($v()){case gd:return 2;case yd:return 8;case io:case Jv:return 32;case vd:return 268435456;default:return 32}default:return 32}}var cc=!1,Wn=null,Zn=null,ei=null,La=new Map,Pa=new Map,ti=[],lb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cp(t,s){switch(t){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":La.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pa.delete(s.pointerId)}}function qa(t,s,o,u,m,v){return t===null||t.nativeEvent!==v?(t={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:v,targetContainers:[m]},s!==null&&(s=Gi(s),s!==null&&lp(s)),t):(t.eventSystemFlags|=u,s=t.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),t)}function rb(t,s,o,u,m){switch(s){case"focusin":return Wn=qa(Wn,t,s,o,u,m),!0;case"dragenter":return Zn=qa(Zn,t,s,o,u,m),!0;case"mouseover":return ei=qa(ei,t,s,o,u,m),!0;case"pointerover":var v=m.pointerId;return La.set(v,qa(La.get(v)||null,t,s,o,u,m)),!0;case"gotpointercapture":return v=m.pointerId,Pa.set(v,qa(Pa.get(v)||null,t,s,o,u,m)),!0}return!1}function dp(t){var s=Hi(t.target);if(s!==null){var o=r(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){t.blockedOn=s,Td(t.priority,function(){rp(o)});return}}else if(s===31){if(s=h(o),s!==null){t.blockedOn=s,Td(t.priority,function(){rp(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gl(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var o=rc(t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);ur=u,o.target.dispatchEvent(u),ur=null}else return s=Gi(o),s!==null&&lp(s),t.blockedOn=o,!1;s.shift()}return!0}function fp(t,s,o){gl(t)&&o.delete(s)}function ub(){cc=!1,Wn!==null&&gl(Wn)&&(Wn=null),Zn!==null&&gl(Zn)&&(Zn=null),ei!==null&&gl(ei)&&(ei=null),La.forEach(fp),Pa.forEach(fp)}function yl(t,s){t.blockedOn===s&&(t.blockedOn=null,cc||(cc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ub)))}var vl=null;function hp(t){vl!==t&&(vl=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){vl===t&&(vl=null);for(var s=0;s<t.length;s+=3){var o=t[s],u=t[s+1],m=t[s+2];if(typeof u!="function"){if(uc(u||o)===null)continue;break}var v=Gi(o);v!==null&&(t.splice(s,3),s-=3,ru(v,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Ts(t){function s(A){return yl(A,t)}Wn!==null&&yl(Wn,t),Zn!==null&&yl(Zn,t),ei!==null&&yl(ei,t),La.forEach(s),Pa.forEach(s);for(var o=0;o<ti.length;o++){var u=ti[o];u.blockedOn===t&&(u.blockedOn=null)}for(;0<ti.length&&(o=ti[0],o.blockedOn===null);)dp(o),o.blockedOn===null&&ti.shift();if(o=(t.ownerDocument||t).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],v=o[u+1],_=m[gt]||null;if(typeof v=="function")_||hp(o);else if(_){var T=null;if(v&&v.hasAttribute("formAction")){if(m=v,_=v[gt]||null)T=_.formAction;else if(uc(m)!==null)continue}else T=_.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),hp(o)}}}function mp(){function t(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(_){return m=_})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function dc(t){this._internalRoot=t}xl.prototype.render=dc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));var o=s.current,u=Ut();ap(o,u,t,s,null,null)},xl.prototype.unmount=dc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;ap(t.current,2,null,t,null,null),Zo(),s[Vi]=null}};function xl(t){this._internalRoot=t}xl.prototype.unstable_scheduleHydration=function(t){if(t){var s=Sd();t={blockedOn:null,target:t,priority:s};for(var o=0;o<ti.length&&s!==0&&s<ti[o].priority;o++);ti.splice(o,0,t),o===0&&dp(t)}};var pp=e.version;if(pp!=="19.2.0")throw Error(a(527,pp,"19.2.0"));J.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=g(s),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var cb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{Ys=bl.inject(cb),Ct=bl}catch{}}return Va.createRoot=function(t,s){if(!l(t))throw Error(a(299));var o=!1,u="",m=_h,v=Sh,_=Th;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=ip(t,1,!1,null,null,o,u,null,m,v,_,mp),t[Vi]=s.current,$u(t),new dc(s)},Va.hydrateRoot=function(t,s,o){if(!l(t))throw Error(a(299));var u=!1,m="",v=_h,_=Sh,T=Th,A=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(A=o.formState)),s=ip(t,1,!0,s,o??null,u,m,A,v,_,T,mp),s.context=sp(null),o=s.current,u=Ut(),u=tr(u),m=Bn(u),m.callback=null,Vn(o,m,u),o=u,s.current.lanes=o,Qs(s,o),un(s),t[Vi]=s.current,$u(t),new xl(s)},Va.version="19.2.0",Va}var wp;function vb(){if(wp)return hc.exports;wp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch{}}return n(),hc.exports=yb(),hc.exports}var xb=vb();const bb=Kc(xb);var _p={},wb="@vercel/analytics",_b="1.5.0",Sb=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function xy(){return typeof window<"u"}function by(){try{const n="production"}catch{}return"production"}function Tb(n="auto"){if(n==="auto"){window.vam=by();return}window.vam=n}function Eb(){return(xy()?window.vam:by())||"production"}function Cc(){return Eb()==="development"}function Cb(n){return n.scriptSrc?n.scriptSrc:Cc()?"https://va.vercel-scripts.com/v1/script.debug.js":n.basePath?`${n.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function Nb(n={debug:!0}){var e;if(!xy())return;Tb(n.mode),Sb(),n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend));const i=Cb(n);if(document.head.querySelector(`script[src*="${i}"]`))return;const a=document.createElement("script");a.src=i,a.defer=!0,a.dataset.sdkn=wb+(n.framework?`/${n.framework}`:""),a.dataset.sdkv=_b,n.disableAutoTrack&&(a.dataset.disableAutoTrack="1"),n.endpoint?a.dataset.endpoint=n.endpoint:n.basePath&&(a.dataset.endpoint=`${n.basePath}/insights`),n.dsn&&(a.dataset.dsn=n.dsn),a.onerror=()=>{const l=Cc()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information."},Cc()&&n.debug===!1&&(a.dataset.debug="false"),document.head.appendChild(a)}function Ab({route:n,path:e}){var i;(i=window.va)==null||i.call(window,"pageview",{route:n,path:e})}function Rb(){if(!(typeof process>"u"||typeof _p>"u"))return _p.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function Mb(n){return F.useEffect(()=>{var e;n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]),F.useEffect(()=>{Nb({framework:n.framework||"react",basePath:n.basePath??Rb(),...n.route!==void 0&&{disableAutoTrack:!0},...n})},[]),F.useEffect(()=>{n.route&&n.path&&Ab({route:n.route,path:n.path})},[n.route,n.path]),null}const Ib=n=>{const e=Math.floor((new Date().getTime()-n.getTime())/1e3);let i=e/31536e3;return i>1?Math.floor(i)+"y ago":(i=e/2592e3,i>1?Math.floor(i)+"mo ago":(i=e/86400,i>1?Math.floor(i)+"d ago":(i=e/3600,i>1?Math.floor(i)+"h ago":(i=e/60,i>1?Math.floor(i)+"m ago":Math.floor(e)+"s ago"))))},kb=({notifications:n,onMarkAsRead:e,user:i,onNavigate:a})=>{const[l,r]=F.useState(!1),c=F.useRef(null),h=i?n.some(x=>!x.read):!1;F.useEffect(()=>{const x=b=>{c.current&&!c.current.contains(b.target)&&r(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const y=()=>{i?(!l&&h&&e(),r(x=>!x)):a("auth")},g={news:"fa-newspaper",job:"fa-briefcase",hostel:"fa-hotel",roommate:"fa-users"};return d.jsxs("div",{className:"relative",ref:c,children:[d.jsxs("button",{onClick:y,className:"relative text-2xl text-white hover:text-unistay-yellow transition-colors","aria-label":"Notifications",children:[d.jsx("i",{className:"fas fa-bell"}),h&&d.jsx("span",{className:"absolute top-0 right-0 block h-2.5 w-2.5 rounded-full bg-red-500 ring-2 ring-unistay-navy","aria-hidden":"true"})]}),l&&i&&d.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-md shadow-lg text-unistay-navy z-50 overflow-hidden animate-slide-in-down",style:{animationDuration:"0.3s"},children:[d.jsx("div",{className:"p-3 font-bold border-b text-sm",children:"Notifications"}),n.length>0?d.jsx("div",{className:"max-h-96 overflow-y-auto no-scrollbar",children:n.map(x=>d.jsxs("div",{className:"flex items-start gap-3 p-3 border-b last:border-b-0 hover:bg-gray-50 transition-colors",children:[d.jsx("div",{className:"w-8 flex justify-center pt-1",children:d.jsx("i",{className:`fas ${g[x.type]} text-unistay-navy/60`})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-sm leading-snug",children:x.message}),d.jsx("p",{className:"text-xs text-gray-400 mt-1",children:Ib(x.timestamp)})]})]},x.id))}):d.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No new notifications."})]})]})},Db=({user:n,isAdmin:e,onLogout:i,onNavigate:a})=>{const[l,r]=F.useState(!1),c=F.useRef(null);F.useEffect(()=>{const y=g=>{c.current&&!c.current.contains(g.target)&&r(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const h=y=>{r(!1),a(y)};return d.jsxs("div",{className:"relative",ref:c,children:[d.jsx("button",{onClick:()=>r(!l),className:"flex items-center gap-2","aria-label":"Open user menu",children:d.jsx("div",{className:"w-10 h-10 rounded-full bg-unistay-yellow flex items-center justify-center font-bold text-unistay-navy text-xl",children:n?.name?.charAt(0).toUpperCase()})}),l&&d.jsxs("div",{className:"absolute right-0 mt-3 w-48 bg-white rounded-md shadow-lg py-1 text-unistay-navy z-50 animate-slide-in-down",style:{animationDuration:"0.3s"},children:[d.jsx("div",{className:"px-4 py-2 border-b",children:d.jsx("p",{className:"text-sm font-semibold truncate",children:n.name})}),d.jsx("button",{onClick:()=>h("profile"),className:"w-full text-left block px-4 py-2 text-sm hover:bg-gray-100 font-medium",children:"My Profile"}),e&&d.jsx("button",{onClick:()=>h("admin"),className:"w-full text-left block px-4 py-2 text-sm hover:bg-gray-100",children:"Admin Dashboard"}),d.jsx("button",{onClick:i,className:"w-full text-left block px-4 py-2 text-sm hover:bg-gray-100 text-red-600",children:"Logout"})]})]})},Ub=({onNavigate:n,currentView:e,user:i,isAdmin:a,onLogout:l,notifications:r,onMarkNotificationsAsRead:c})=>{const[h,y]=F.useState(!1),g=[{text:"Hostels",view:"main"},{text:"Roommates",view:"roommateFinder"},{text:"News",view:"blog"},{text:"Events",view:"events"},{text:"Jobs",view:"jobs"}],x=S=>e==="main"&&S==="main"?!0:e===S,b=S=>{n(S),y(!1)},w=e==="main";return e==="admin"||e==="auth"||e==="profile"?null:d.jsxs("header",{className:`bg-unistay-navy text-white shadow-lg ${w?"fixed":"sticky"} top-0 left-0 right-0 z-50`,children:[d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex items-center justify-between h-20",children:[d.jsx("div",{className:"flex items-center",children:d.jsx("button",{onClick:()=>n("main"),className:"flex items-center select-none","aria-label":"Go to homepage",children:d.jsx("img",{src:"/images/hostels/unistay.png",alt:"UniStay Logo",className:"h-10"})})}),d.jsx("nav",{className:"hidden md:flex items-center space-x-6",children:g.map(S=>d.jsx("button",{onClick:()=>n(S.view),className:`font-medium transition-all duration-200 px-1 pb-2 pt-1 border-b-2 ${x(S.view)?"text-unistay-yellow border-unistay-yellow":"border-transparent hover:text-unistay-yellow"}`,children:S.text},S.text))}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx(kb,{notifications:r,onMarkAsRead:c,user:i,onNavigate:n}),i?d.jsx(Db,{user:i,isAdmin:a,onLogout:l,onNavigate:n}):d.jsx("button",{onClick:()=>n("auth"),className:"hidden md:block bg-unistay-yellow text-unistay-navy font-bold py-2 px-6 rounded-full hover:bg-yellow-400 transition-colors",children:"Login"}),d.jsx("button",{onClick:()=>y(!h),className:"md:hidden text-white text-2xl focus:outline-none","aria-label":"Open menu","aria-expanded":h,children:d.jsx("i",{className:`fas ${h?"fa-times":"fa-bars"}`})})]})]})}),d.jsx("div",{className:`md:hidden bg-unistay-navy/95 backdrop-blur-sm overflow-hidden transition-all duration-300 ease-in-out ${h?"max-h-96":"max-h-0"}`,children:d.jsxs("nav",{className:"flex flex-col items-center space-y-4 py-4",children:[g.map(S=>d.jsx("button",{onClick:()=>b(S.view),className:`font-medium text-lg ${x(S.view)?"text-unistay-yellow":"text-white"}`,children:S.text},S.text)),!i&&d.jsx("button",{onClick:()=>b("auth"),className:"bg-unistay-yellow text-unistay-navy font-bold py-2 px-8 rounded-full mt-2",children:"Login"})]})})]})},Bs=()=>{const n=F.useRef(null),[e,i]=F.useState(!1);return F.useEffect(()=>{const a=new IntersectionObserver(([r])=>{r.isIntersecting&&(i(!0),a.unobserve(r.target))},{rootMargin:"0px 0px -100px 0px",threshold:.1}),l=n.current;return l&&a.observe(l),()=>{l&&a.unobserve(l)}},[]),[n,e]},Tt=({size:n="md",color:e="navy",className:i=""})=>{const a={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-8 w-8"},l={white:"text-white",navy:"text-unistay-navy"};return d.jsxs("svg",{className:`animate-spin ${a[n]} ${l[e]} ${i}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},jb=({hostels:n,onHostelSelect:e})=>{const[i,a]=Bs(),[l,r]=F.useState(!1),[c,h]=F.useState(""),[y,g]=F.useState([]),[x,b]=F.useState(!1),w=()=>{if(!c.trim())return;r(!0),b(!0);const E=n.filter(C=>{const N=c.toLowerCase().split(" "),M=`${C.name} ${C.location}`.toLowerCase();return N.every(D=>M.includes(D))});setTimeout(()=>{g(E),r(!1)},500)};F.useEffect(()=>{const E=C=>{const N=document.getElementById("search-container");N&&!N.contains(C.target)&&b(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const S=E=>{E.key==="Enter"&&w()};return d.jsxs("section",{ref:i,className:"relative bg-cover bg-center h-[60vh] min-h-[400px] flex items-center justify-center",style:{backgroundImage:"url('/images/hostels/akamweesi3.jpg')"},children:[d.jsx("div",{className:"absolute inset-0 bg-unistay-navy bg-opacity-60"}),d.jsxs("div",{className:`relative z-10 text-center text-white px-4 transition-all duration-1000 ${a?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,children:[d.jsx("h1",{className:"text-4xl md:text-6xl font-extrabold tracking-tight mb-4",children:"Find Your Perfect Student Home"}),d.jsx("p",{className:"max-w-2xl mx-auto text-lg md:text-xl text-gray-200 mb-8",children:"Discover the best hostels near your university with all the amenities you need for a great student life."}),d.jsx("div",{className:"max-w-2xl mx-auto",children:d.jsxs("div",{id:"search-container",className:"relative",children:[d.jsx("input",{type:"text",placeholder:"Search by hostel name or location...",className:"w-full p-4 pl-12 rounded-full border-2 border-transparent focus:ring-4 focus:ring-unistay-yellow focus:border-unistay-yellow text-gray-800 text-lg shadow-2xl transition",disabled:l,value:c,onChange:E=>h(E.target.value),onKeyPress:S}),d.jsx("i",{className:"fas fa-search absolute left-5 top-1/2 -translate-y-1/2 text-gray-400 text-xl"}),d.jsx("button",{onClick:w,disabled:l,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-unistay-navy hover:bg-opacity-90 text-white font-bold py-2.5 px-8 rounded-full transition-all duration-300 flex items-center justify-center w-[120px] disabled:bg-opacity-70",children:l?d.jsx(Tt,{color:"white",size:"sm"}):"Search"}),x&&d.jsx("div",{className:"absolute mt-2 w-full bg-white rounded-xl shadow-2xl overflow-hidden z-20 transition-all duration-300",children:l?d.jsx("div",{className:"p-4 text-center",children:d.jsx(Tt,{size:"lg"})}):y.length>0?d.jsx("div",{className:"max-h-96 overflow-y-auto",children:y.map(E=>d.jsxs("div",{onClick:()=>{e(E),b(!1),h("")},className:"flex items-center gap-4 p-4 hover:bg-gray-50 cursor-pointer border-b last:border-b-0 transition-colors",children:[d.jsx("div",{className:"w-16 h-16 flex-shrink-0",children:d.jsx("img",{src:E.imageUrl,alt:E.name,className:"w-full h-full object-cover rounded-lg"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-semibold text-unistay-navy",children:E.name}),d.jsxs("p",{className:"text-sm text-gray-500",children:[d.jsx("i",{className:"fas fa-map-marker-alt text-unistay-yellow mr-2"}),E.location]}),d.jsxs("p",{className:"text-sm text-gray-500",children:[d.jsx("i",{className:"fas fa-tag text-unistay-yellow mr-2"}),E.priceRange]})]}),E.isRecommended&&d.jsx("span",{className:"text-unistay-yellow",children:d.jsx("i",{className:"fas fa-star"})})]},E.id))}):c&&d.jsxs("div",{className:"p-8 text-center",children:[d.jsx("i",{className:"fas fa-home text-4xl text-gray-300 mb-4"}),d.jsxs("p",{className:"text-gray-500",children:['No hostels found matching "',c,'"']})]})})]})})]})]})},wy=({hostel:n,onViewHostel:e,onSaveToggle:i,isSaved:a})=>d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden group transform hover:-translate-y-2 transition-all duration-300 h-full flex flex-col",children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:n.imageUrl,alt:n.name,className:"h-56 w-full object-cover"}),d.jsx("button",{onClick:l=>{l.stopPropagation(),i(n.id)},className:"absolute top-4 left-4 bg-black/40 text-white rounded-full h-10 w-10 flex items-center justify-center hover:bg-black/60 transition-all duration-200 transform hover:scale-110 z-10","aria-label":a?"Unsave hostel":"Save hostel",children:d.jsx("i",{className:`${a?"fas":"far"} fa-heart ${a?"text-red-500":""} text-lg`})}),d.jsxs("div",{className:"absolute top-4 right-4 bg-white/80 backdrop-blur-sm text-unistay-navy px-3 py-1 rounded-full font-bold flex items-center gap-1",children:[d.jsx("i",{className:"fas fa-star text-unistay-yellow"}),n.rating]})]}),d.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[d.jsx("h3",{className:"text-xl font-bold text-unistay-navy",children:n.name}),d.jsx("p",{className:"text-gray-600 mt-1 flex-grow",children:n.location}),d.jsxs("div",{className:"flex justify-between items-center mt-4",children:[d.jsx("span",{className:"text-lg font-extrabold text-unistay-navy bg-unistay-yellow/20 px-3 py-1 rounded-lg",children:n.priceRange}),d.jsx("button",{onClick:()=>e(n),className:"bg-unistay-navy text-white font-semibold px-5 py-2 rounded-lg transition-transform transform group-hover:scale-105 group-hover:bg-unistay-yellow group-hover:text-unistay-navy",children:"View"})]})]})]}),Ob=({universities:n,selectedUniversity:e,onSelect:i})=>{const[a,l]=Bs(),[r,c]=F.useState(!1),h=F.useRef(null);return d.jsxs("div",{ref:a,className:`transition-all duration-700 ${l?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,children:[d.jsx("h2",{className:"text-3xl font-bold text-unistay-navy text-center mb-6",children:"Find Hostels At Your University"}),d.jsx("div",{ref:h,className:"flex justify-center flex-wrap gap-4 overflow-hidden transition-all duration-500 ease-in-out",style:{maxHeight:r?`${h.current?.scrollHeight}px`:"70px"},children:n.map(x=>d.jsxs("button",{onClick:()=>i(x),className:`flex items-center gap-3 px-6 py-3 rounded-full text-lg font-semibold border-2 transition-all duration-300 transform hover:scale-105 ${e.id===x.id?"bg-unistay-navy text-white border-unistay-navy shadow-lg":"bg-white text-unistay-navy border-gray-200 hover:border-unistay-navy"}`,children:[d.jsx("img",{src:x.logoUrl,alt:`${x.name} Logo`,className:"w-7 h-7 rounded-full object-cover"}),x.name]},x.id))}),n.length>5&&d.jsx("div",{className:"text-center mt-6",children:d.jsxs("button",{onClick:()=>c(!r),className:"font-semibold text-unistay-navy hover:text-unistay-yellow transition-colors flex items-center gap-2 mx-auto","aria-expanded":r,children:[d.jsx("span",{children:r?"Show Less":"Show More"}),d.jsx("i",{className:`fas fa-chevron-down transition-transform duration-300 ${r?"rotate-180":""}`})]})})]})},Lb=({hostels:n,universityName:e,onViewHostel:i,savedHostelIds:a,onToggleSave:l,hasActiveFilter:r,initialHostelCount:c})=>{const[h,y]=Bs(),[g,x]=F.useState(!1),b=g?n:n.slice(0,5),w=n.length>5;return c===0?d.jsx("div",{ref:h,className:`mt-16 transition-all duration-700 delay-100 ${y?"opacity-100":"opacity-0"}`,children:d.jsxs("div",{className:"text-center py-8 px-4 bg-unistay-bg rounded-2xl",children:[d.jsx("i",{className:"fas fa-bed text-4xl text-gray-300 mb-4"}),d.jsxs("h3",{className:"text-xl font-semibold text-unistay-navy",children:["No Hostels Found for ",e]}),d.jsxs("p",{className:"text-gray-500 mt-2",children:["We don't have specific listings for this university yet. ",d.jsx("br",{})," Please check our general recommendations below!"]})]})}):n.length===0&&r?d.jsx("div",{ref:h,className:`mt-16 transition-all duration-700 delay-100 ${y?"opacity-100":"opacity-0"}`,children:d.jsxs("div",{className:"text-center py-8 px-4 bg-unistay-bg rounded-2xl",children:[d.jsx("i",{className:"fas fa-filter text-4xl text-gray-300 mb-4"}),d.jsx("h3",{className:"text-xl font-semibold text-unistay-navy",children:"No Hostels Match Your Filters"}),d.jsx("p",{className:"text-gray-500 mt-2",children:"Try removing some amenities to see more results."})]})}):d.jsxs("div",{ref:h,className:`mt-16 transition-all duration-700 delay-100 ${y?"opacity-100":"opacity-0"}`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h2",{className:"text-2xl font-bold text-unistay-navy",children:["Hostels Near ",e]}),w&&!r&&d.jsx("button",{onClick:()=>x(!g),className:"text-unistay-yellow font-semibold hover:underline transition-colors duration-200",children:g?"Show Less":"View All"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:b.map(S=>d.jsx("div",{children:d.jsx(wy,{hostel:S,onViewHostel:i,onSaveToggle:l,isSaved:a.has(S.id)})},S.id))}),w&&!g&&!r&&d.jsx("div",{className:"mt-8 text-center",children:d.jsxs("button",{onClick:()=>x(!0),className:"bg-unistay-yellow text-unistay-navy px-6 py-3 rounded-lg font-semibold hover:bg-yellow-400 transition-colors duration-200",children:["Show All ",n.length," Hostels"]})})]})},Pb=({hostels:n,onViewHostel:e,savedHostelIds:i,onToggleSave:a})=>{const[l,r]=Bs();return d.jsxs("div",{ref:l,className:`mt-16 transition-all duration-700 delay-200 ${r?"opacity-100":"opacity-0"}`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-unistay-navy",children:"Recommended For You"}),d.jsx("a",{href:"#",className:"text-unistay-yellow font-semibold hover:underline",children:"See All"})]}),d.jsx("div",{className:"flex overflow-x-auto space-x-6 pb-4 no-scrollbar scroll-snap-x-mandatory",children:n.map((c,h)=>d.jsx("div",{className:`w-80 md:w-96 flex-shrink-0 scroll-snap-align-start transition-transform duration-500 delay-${h*100} ${r?"translate-y-0":"translate-y-5"}`,children:d.jsx(wy,{hostel:c,onViewHostel:e,onSaveToggle:a,isSaved:i.has(c.id)})},c.id))})]})},qb=({universities:n,selectedUniversity:e,onSelectUniversity:i,hostels:a,onViewHostel:l,savedHostelIds:r,onToggleSave:c})=>{const h=a.filter(g=>g.universityId===e.id),y=a.filter(g=>g.isRecommended);return d.jsx("section",{className:"bg-white py-16",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsx(Ob,{universities:n,selectedUniversity:e,onSelect:i}),d.jsx(Lb,{hostels:h,universityName:e.name,onViewHostel:l,savedHostelIds:r,onToggleSave:c,hasActiveFilter:!1,initialHostelCount:h.length}),y.length>0&&d.jsx(Pb,{hostels:y,onViewHostel:l,savedHostelIds:r,onToggleSave:c})]})})},_y=n=>[...n].sort((e,i)=>{const a=new Date(e.timestamp||0);return new Date(i.timestamp||0).getTime()-a.getTime()}),ri=n=>{const e=new Date,i=new Date(n),a=Math.floor((e.getTime()-i.getTime())/1e3),l={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60};if(a<60)return"just now";for(const[r,c]of Object.entries(l)){const h=Math.floor(a/c);if(h>=1)return h===1?`1 ${r} ago`:`${h} ${r}s ago`}return"just now"},Bb=({items:n,onNavigateToBlog:e})=>{const i=_y(n);return d.jsx("div",{className:"space-y-4",children:i.map(a=>d.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[d.jsx("img",{src:a.imageUrl,alt:a.title,className:"w-20 h-20 rounded-lg object-cover flex-shrink-0"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-bold text-unistay-navy",children:a.title}),d.jsxs("div",{className:"flex justify-between items-center mt-2",children:[d.jsx("p",{className:"text-xs text-gray-400",children:a.timestamp?ri(a.timestamp):"Recently"}),d.jsxs("p",{className:"text-xs text-gray-400",children:["Source: ",a.source]})]}),d.jsxs("button",{onClick:e,className:"mt-2 text-sm font-semibold text-unistay-yellow hover:text-unistay-navy transition-colors",children:["Read Full Article ",d.jsx("i",{className:"fas fa-arrow-right ml-1"})]})]})]},a.id))})},Vb=({items:n})=>d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(e=>d.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden group transform hover:-translate-y-1 transition-transform duration-300",children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:e.imageUrl,alt:e.title,className:"h-40 w-full object-cover"}),d.jsxs("div",{className:"absolute top-3 left-3 bg-unistay-yellow text-unistay-navy text-center rounded-lg px-3 py-1 shadow-md",children:[d.jsx("p",{className:"font-extrabold text-xl",children:e.day}),d.jsx("p",{className:"font-semibold text-xs leading-tight",children:e.month})]})]}),d.jsxs("div",{className:"p-4",children:[d.jsx("h3",{className:"font-bold text-lg text-unistay-navy",children:e.title}),d.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[d.jsx("i",{className:"fas fa-map-marker-alt text-unistay-yellow mr-2"}),e.location]})]})]},e.id))}),Hb=({items:n})=>d.jsx("div",{className:"space-y-4",children:n.map(e=>d.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:d.jsx("img",{src:e.imageUrl,alt:e.company,className:"w-12 h-12 object-contain"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-bold text-unistay-navy",children:e.title}),d.jsx("p",{className:"text-sm text-gray-600",children:e.company})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-sm text-gray-500",children:"Apply by"}),d.jsx("p",{className:"font-semibold text-unistay-navy",children:e.deadline})]})]},e.id))}),Gb=({items:n})=>d.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:d.jsx("div",{className:"flex gap-6 pb-4 min-w-min",children:n.map(e=>d.jsxs("div",{className:"flex-shrink-0 w-72 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden group flex flex-col",children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:e.imageUrl,alt:e.title,className:"h-40 w-full object-cover"}),d.jsxs("div",{className:"absolute top-3 right-3 bg-unistay-yellow text-unistay-navy font-bold px-3 py-1 rounded-full text-sm",children:[e.discount,"% OFF"]})]}),d.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[d.jsx("h3",{className:"font-bold text-lg text-unistay-navy",children:e.title}),d.jsx("p",{className:"text-sm text-gray-600 mt-2",children:e.description}),d.jsxs("p",{className:"text-xs text-gray-400 mt-3",children:["Posted by ",e.postedBy]}),d.jsx("p",{className:"text-xs text-gray-400",children:e.timestamp?ri(e.timestamp):"Recently"}),d.jsx("button",{className:"mt-4 w-full bg-unistay-navy text-white font-semibold py-2 px-4 rounded-lg hover:bg-unistay-yellow hover:text-unistay-navy transition-colors",children:"Order Now"})]})]},e.id))})}),zb=({items:n})=>d.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:d.jsx("div",{className:"flex gap-4 pb-4 min-w-min",children:n.map(e=>d.jsxs("div",{className:`flex-shrink-0 w-96 p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow border-l-4 ${e.category==="lost"?"border-red-500 bg-red-50":"border-green-500 bg-green-50"}`,children:[d.jsx("img",{src:e.imageUrl,alt:e.title,className:"w-full h-40 rounded-lg object-cover mb-3"}),d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("h3",{className:"font-bold text-unistay-navy",children:e.title}),d.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${e.category==="lost"?"bg-red-200 text-red-800":"bg-green-200 text-green-800"}`,children:e.category==="lost"?"LOST":"FOUND"})]}),d.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),d.jsxs("p",{className:"text-xs text-gray-400 mb-2",children:["Reported by ",e.postedBy]}),d.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[d.jsx("i",{className:"fas fa-phone"})," ",e.phone]}),d.jsx("p",{className:"text-xs text-gray-400 mt-2",children:e.timestamp?ri(e.timestamp):"Recently"})]},e.id))})}),Fb=({items:n,user:e})=>{const[i,a]=Ls.useState({}),[l,r]=Ls.useState(new Set),c=N=>({"123e4567-e89b-12d3-a456-426614174001":"Makerere","123e4567-e89b-12d3-a456-426614174002":"Kyambogo","123e4567-e89b-12d3-a456-426614174003":"MUBS","123e4567-e89b-12d3-a456-426614174004":"UCU","123e4567-e89b-12d3-a456-426614174005":"UMU Nkozi","123e4567-e89b-12d3-a456-426614174006":"KIU","123e4567-e89b-12d3-a456-426614174007":"MUST","123e4567-e89b-12d3-a456-426614174008":"Aga Khan","123e4567-e89b-12d3-a456-426614174009":"Gulu","123e4567-e89b-12d3-a456-426614174010":"Lira","123e4567-e89b-12d3-a456-426614174011":"IUEA"})[N||""]||"University",h=N=>{e&&(l.has(N)||(a(M=>({...M,[N]:(M[N]||0)+1})),r(M=>new Set(M).add(N))))},y=n.filter(N=>N.gender==="male").sort((N,M)=>{const D=i[N.id]||N.votes||0;return(i[M.id]||M.votes||0)-D}),g=n.filter(N=>N.gender==="female").sort((N,M)=>{const D=i[N.id]||N.votes||0;return(i[M.id]||M.votes||0)-D}),x=y[0],b=g[0],w=y.slice(1),S=g.slice(1),E=({student:N,category:M})=>d.jsxs("div",{className:`group relative flex-shrink-0 w-96 rounded-2xl overflow-hidden shadow-2xl transform hover:scale-105 transition-all duration-500 ${M==="male"?"bg-gradient-to-br from-blue-500 to-blue-700":"bg-gradient-to-br from-pink-500 to-pink-700"}`,children:[d.jsxs("div",{className:`absolute top-0 right-0 z-20 flex items-center gap-2 px-6 py-3 rounded-bl-3xl font-bold text-white shadow-lg ${M==="male"?"bg-blue-700":"bg-pink-700"}`,children:[d.jsx("span",{className:"text-xl",children:M==="male"?"":""}),d.jsxs("span",{children:["#",M==="male"?"MCM":"WCW"]})]}),d.jsxs("div",{className:"relative h-72 overflow-hidden",children:[d.jsx("img",{src:N.imageUrl,alt:N.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-0 group-hover:opacity-70 transition-opacity duration-500"})]}),d.jsxs("div",{className:"relative px-8 py-8 bg-white",children:[d.jsxs("div",{className:`absolute -top-6 right-8 flex flex-col items-center justify-center w-16 h-16 rounded-full shadow-lg font-bold text-white transform group-hover:scale-110 transition-transform duration-300 ${M==="male"?"bg-gradient-to-br from-blue-500 to-blue-600":"bg-gradient-to-br from-pink-500 to-pink-600"}`,children:[d.jsx("span",{className:"text-2xl",children:i[N.id]||N.votes||0}),d.jsx("span",{className:"text-xs",children:"votes"})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("h3",{className:"text-2xl font-black text-gray-900 mb-1",children:N.name}),d.jsx("p",{className:`text-sm font-semibold mb-2 ${M==="male"?"text-blue-600":"text-pink-600"}`,children:N.major}),d.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:[d.jsx("i",{className:"fas fa-university mr-1"}),c(N.universityId)]}),d.jsx("p",{className:"text-gray-700 text-sm leading-relaxed line-clamp-2",children:N.bio})]}),d.jsx("div",{className:`my-4 h-1 rounded-full ${M==="male"?"bg-gradient-to-r from-blue-300 via-blue-500 to-blue-300":"bg-gradient-to-r from-pink-300 via-pink-500 to-pink-300"}`}),d.jsx("div",{className:"flex items-center justify-center",children:d.jsx("span",{className:"text-3xl animate-bounce",children:""})})]})]}),C=({student:N})=>{const M=i[N.id]||0,D=l.has(N.id),k=N.gender==="male";return d.jsxs("div",{className:`group flex-shrink-0 w-80 rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-3 h-full flex flex-col bg-white border-2 ${k?"border-blue-200 hover:border-blue-400":"border-pink-200 hover:border-pink-400"}`,children:[d.jsxs("div",{className:"relative h-56 overflow-hidden bg-gradient-to-br from-gray-200 to-gray-300",children:[d.jsx("img",{src:N.imageUrl,alt:N.name,className:"w-full h-full object-cover group-hover:scale-125 transition-transform duration-500"}),d.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-40 transition-opacity duration-500 ${k?"bg-gradient-to-t from-blue-600 via-transparent to-transparent":"bg-gradient-to-t from-pink-600 via-transparent to-transparent"}`}),d.jsxs("div",{className:`absolute top-3 right-3 flex items-center gap-1 px-3 py-1 rounded-full text-white font-bold text-sm backdrop-blur-md shadow-lg transform group-hover:scale-110 transition-transform duration-300 ${k?"bg-blue-600/80":"bg-pink-600/80"}`,children:[d.jsx("i",{className:"fas fa-fire text-xs"}),M]})]}),d.jsxs("div",{className:"flex-1 flex flex-col p-6",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-900 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:to-pink-600 transition-all duration-300 mb-1",children:N.name}),d.jsx("p",{className:`text-sm font-semibold mb-2 ${k?"text-blue-600":"text-pink-600"}`,children:N.major}),d.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:[d.jsx("i",{className:"fas fa-university mr-1"}),c(N.universityId)]}),d.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-3 mb-4 flex-1",children:N.bio}),d.jsxs("button",{onClick:()=>h(N.id),disabled:!e||D,title:e?D?"You have already voted for this student":"Vote for this student":"Sign in to vote",className:`w-full py-3 px-4 rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 group/btn transform ${e?D?"bg-gray-200 text-gray-700 cursor-not-allowed":k?"bg-gradient-to-r from-blue-500 to-blue-600 text-white hover:from-blue-600 hover:to-blue-700 hover:shadow-lg hover:scale-105":"bg-gradient-to-r from-pink-500 to-pink-600 text-white hover:from-pink-600 hover:to-pink-700 hover:shadow-lg hover:scale-105":"bg-gray-300 text-gray-600 cursor-not-allowed opacity-60"}`,children:[d.jsx("i",{className:`fas ${e?D?"fa-check":"fa-thumbs-up":"fa-lock"} group-hover/btn:scale-125 transition-transform`}),e?D?"Voted":"Vote Now":"Sign in"]})]})]})};return d.jsxs("div",{className:"space-y-16",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"mb-12",children:[d.jsx("h3",{className:"text-3xl font-black text-gray-900 mb-3",children:" Man Crush Monday"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-16 h-1 bg-gradient-to-r from-blue-500 via-blue-600 to-blue-500 rounded-full"}),d.jsx("p",{className:"text-gray-600 font-semibold",children:"Vote for your favorite male student"})]})]}),d.jsxs("div",{className:"mb-16",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[d.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:"Current Winner"}),x&&d.jsxs("span",{className:"ml-auto text-sm font-bold bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2 rounded-full",children:[i[x.id]||x.votes||0," votes"]})]}),x&&d.jsx("div",{className:"flex justify-center",children:d.jsx("div",{children:d.jsx(E,{student:x,category:"male"})},x.id)})]}),w.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[d.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:"Other Nominees"}),d.jsxs("span",{className:"ml-auto text-sm text-white font-bold bg-gray-400 px-4 py-2 rounded-full",children:[w.length," Nominees"]})]}),d.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:d.jsx("div",{className:"flex gap-6 pb-4 min-w-min justify-center mx-auto",children:w.map(N=>d.jsx("div",{children:d.jsx(C,{student:N})},N.id))})})]})]}),d.jsx("div",{className:"py-12",children:d.jsx("div",{className:"h-1 bg-gradient-to-r from-transparent via-gray-300 to-transparent rounded-full"})}),d.jsxs("div",{children:[d.jsxs("div",{className:"mb-12",children:[d.jsx("h3",{className:"text-3xl font-black text-gray-900 mb-3",children:" Women Crush Wednesday"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-16 h-1 bg-gradient-to-r from-pink-500 via-pink-600 to-pink-500 rounded-full"}),d.jsx("p",{className:"text-gray-600 font-semibold",children:"Vote for your favorite female student"})]})]}),d.jsxs("div",{className:"mb-16",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[d.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:"Current Winner"}),b&&d.jsxs("span",{className:"ml-auto text-sm font-bold bg-gradient-to-r from-pink-500 to-pink-600 text-white px-4 py-2 rounded-full",children:[i[b.id]||b.votes||0," votes"]})]}),b&&d.jsx("div",{className:"flex justify-center",children:d.jsx("div",{children:d.jsx(E,{student:b,category:"female"})},b.id)})]}),S.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[d.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:"Other Nominees"}),d.jsxs("span",{className:"ml-auto text-sm text-white font-bold bg-gray-400 px-4 py-2 rounded-full",children:[S.length," Nominees"]})]}),d.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:d.jsx("div",{className:"flex gap-6 pb-4 min-w-min justify-center mx-auto",children:S.map(N=>d.jsx("div",{children:d.jsx(C,{student:N})},N.id))})})]})]})]})},$b=({items:n,user:e,confessionHandler:i})=>{const[a,l]=Ls.useState(new Set),[r,c]=Ls.useState({}),h=b=>{l(w=>{const S=new Set(w);return S.has(b)?S.delete(b):S.add(b),S})},y=async b=>{const w=r[b]?.trim();if(!(!w||!i))try{await i.addComment(b,w,e?.name||"Anonymous"),c(S=>({...S,[b]:""}))}catch{}},g=async(b,w)=>{if(!(!e||!i))try{await i.like(b,w)}catch{}},x=async(b,w)=>{if(!(!e||!i))try{await i.dislike(b,w)}catch{}};return d.jsx("div",{className:"space-y-4",children:n.map(b=>d.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-purple-200",children:[d.jsx("p",{className:"text-gray-800 italic mb-3",children:b.content}),d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsx("span",{className:"text-xs text-gray-500",children:b.timestamp?ri(b.timestamp):"Recently"})}),d.jsxs("div",{className:"flex items-center gap-4 pt-3 border-t border-purple-200",children:[d.jsxs("button",{onClick:()=>g(b.id,b.userLikeStatus),disabled:!e,title:e?"Like this confession":"Sign in to like",className:`flex items-center gap-1 text-sm font-semibold transition-colors ${b.userLikeStatus==="like"?"text-green-600":e?"text-gray-600 hover:text-green-600":"text-gray-400 cursor-not-allowed"}`,children:[d.jsx("i",{className:`fas fa-thumbs-up ${b.userLikeStatus==="like"?"fas":"far"}`}),b.likes]}),d.jsxs("button",{onClick:()=>x(b.id,b.userLikeStatus),disabled:!e,title:e?"Dislike this confession":"Sign in to dislike",className:`flex items-center gap-1 text-sm font-semibold transition-colors ${b.userLikeStatus==="dislike"?"text-red-600":e?"text-gray-600 hover:text-red-600":"text-gray-400 cursor-not-allowed"}`,children:[d.jsx("i",{className:`fas fa-thumbs-down ${b.userLikeStatus==="dislike"?"fas":"far"}`}),b.dislikes]}),d.jsxs("button",{onClick:()=>h(b.id),className:"flex items-center gap-1 text-sm font-semibold text-gray-600 hover:text-blue-600 transition-colors",children:[d.jsx("i",{className:"fas fa-comment"}),b.comments?.length||0]})]}),a.has(b.id)&&d.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-200 space-y-3",children:[e&&d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",placeholder:"Write a comment...",maxLength:150,value:r[b.id]||"",onChange:w=>c(S=>({...S,[b.id]:w.target.value})),className:"flex-1 px-3 py-2 text-sm border border-purple-300 rounded-lg focus:ring-1 focus:ring-purple-400 focus:border-transparent"}),d.jsx("button",{onClick:()=>y(b.id),disabled:!r[b.id]?.trim(),className:"px-3 py-2 bg-purple-600 text-white text-sm font-semibold rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Post"})]}),d.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:b.comments&&b.comments.length>0?b.comments.map(w=>d.jsxs("div",{className:"p-2 bg-white rounded border border-purple-100",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-xs font-semibold text-gray-700",children:w.userName}),d.jsx("span",{className:"text-xs text-gray-500",children:ri(w.timestamp)})]}),d.jsx("p",{className:"text-sm text-gray-700 mt-1",children:w.content})]},w.id)):d.jsx("p",{className:"text-sm text-gray-500 italic text-center py-2",children:"No comments yet. Be the first to comment!"})})]})]},b.id))})},Jb=({news:n,events:e,jobs:i,universities:a,onNavigateToBlog:l,onNavigateToEvents:r,onNavigateToJobs:c,user:h,onNavigate:y,deals:g=[],lostItems:x=[],studentSpotlights:b=[],confessions:w=[],confessionHandler:S})=>{const[E,C]=F.useState("News"),[N,M]=Bs(),D=[{name:"News",icon:"fas fa-newspaper",action:l},{name:"Events",icon:"fas fa-calendar-alt",action:r},{name:"Jobs",icon:"fas fa-briefcase",action:c}],k={News:d.jsx(Bb,{items:n,onNavigateToBlog:l}),Events:d.jsx(Vb,{items:e}),Jobs:d.jsx(Hb,{items:i})};return d.jsx("section",{ref:N,className:"py-16 bg-unistay-bg",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsxs("div",{className:"text-center mb-12 transition-all duration-1000 opacity-100 translate-y-0",children:[d.jsx("h2",{className:"text-3xl font-bold text-unistay-navy sm:text-4xl",children:"Campus Community Hub"}),d.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Stay connected with the latest news, events, and job opportunities from your university."})]}),d.jsxs("div",{className:"transition-all duration-700 delay-200 opacity-100",children:[d.jsx("div",{className:"mb-8 flex justify-center border-b-2 border-gray-200",role:"tablist","aria-label":"Community Hub Tabs",children:D.map(q=>d.jsxs("button",{onClick:()=>C(q.name),className:`px-4 sm:px-8 py-4 font-semibold text-lg border-b-4 transition-all duration-300 -mb-0.5 ${E===q.name?"text-unistay-navy border-unistay-yellow":"text-gray-500 border-transparent hover:text-unistay-navy hover:border-gray-300"}`,role:"tab","aria-selected":E===q.name,"aria-controls":`panel-${q.name}`,children:[d.jsx("i",{className:`${q.icon} mr-2 hidden sm:inline-block`,"aria-hidden":"true"})," ",q.name]},q.name))}),d.jsx("div",{className:"relative min-h-[400px]",children:Object.entries(k).map(([q,z])=>d.jsx("div",{id:`panel-${q}`,role:"tabpanel","aria-labelledby":`tab-${q}`,className:`transition-opacity duration-500 ${E===q?"opacity-100":"opacity-0 absolute w-full pointer-events-none"}`,children:z},q))}),d.jsx("div",{className:"text-center mt-8",children:d.jsxs("button",{onClick:D.find(q=>q.name===E)?.action,className:"font-bold text-unistay-navy hover:text-unistay-yellow transition-colors flex items-center gap-2 mx-auto",children:[d.jsxs("span",{children:["View All ",E]}),d.jsx("i",{className:"fas fa-arrow-right","aria-hidden":"true"})]})})]}),g&&g.length>0&&d.jsxs("div",{className:"mt-16 transition-all duration-700 delay-300 opacity-100",children:[d.jsxs("div",{className:"mb-10",children:[d.jsx("h3",{className:"text-2xl font-bold text-unistay-navy mb-2",children:" Student Deals"}),d.jsx("p",{className:"text-gray-600",children:"Exclusive discounts and offers from local businesses"})]}),d.jsx(Gb,{items:g})]}),x&&x.length>0&&d.jsxs("div",{className:"mt-16 transition-all duration-700 delay-400 opacity-100",children:[d.jsxs("div",{className:"mb-10",children:[d.jsx("h3",{className:"text-2xl font-bold text-unistay-navy mb-2",children:" Lost & Found"}),d.jsx("p",{className:"text-gray-600",children:"Help classmates find their lost items or report something you found"})]}),d.jsx(zb,{items:x})]}),b&&b.length>0&&d.jsxs("div",{className:"mt-16 transition-all duration-700 delay-500 opacity-100",children:[d.jsxs("div",{className:"relative -mx-6 -mt-8 mb-10 z-10",children:[d.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-fixed",style:{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 400"><defs><pattern id="pattern" patternUnits="userSpaceOnUse" width="100" height="100"><circle cx="50" cy="50" r="40" fill="none" stroke="%23FFD700" stroke-width="1" opacity="0.1"/><circle cx="50" cy="50" r="30" fill="none" stroke="%23FFD700" stroke-width="1" opacity="0.15"/><circle cx="50" cy="50" r="20" fill="none" stroke="%23FFD700" stroke-width="1" opacity="0.2"/></pattern></defs><rect width="1200" height="400" fill="%230A2540"/><rect width="1200" height="400" fill="url(%23pattern)"/></svg>')`,backgroundAttachment:"fixed"}}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-unistay-navy via-blue-900 to-unistay-navy"}),d.jsx("div",{className:"relative px-6 py-12 backdrop-blur-sm",children:d.jsxs("div",{className:"max-w-6xl mx-auto",children:[d.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white mb-3",children:"Student Spotlight"}),d.jsx("p",{className:"text-lg md:text-xl text-yellow-200 font-semibold",children:"Get to know a featured student from our community"}),d.jsxs("div",{className:"mt-6 flex gap-2",children:[d.jsx("div",{className:"h-1 w-16 bg-unistay-yellow rounded-full"}),d.jsx("div",{className:"h-1 w-12 bg-unistay-yellow rounded-full opacity-75"}),d.jsx("div",{className:"h-1 w-8 bg-unistay-yellow rounded-full opacity-50"})]})]})})]}),d.jsx(Fb,{items:b,user:h})]}),w&&w.length>0&&d.jsxs("div",{className:"mt-16 transition-all duration-700 delay-600 opacity-100",children:[d.jsxs("div",{className:"mb-10",children:[d.jsx("h3",{className:"text-2xl font-bold text-unistay-navy mb-2",children:" Anonymous Confessions"}),d.jsx("p",{className:"text-gray-600",children:"Share your thoughts anonymously with the community"})]}),d.jsx($b,{items:w,user:h,confessionHandler:S})]})]})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Yb,Kb;function Qb(){return{geminiUrl:Yb,vertexUrl:Kb}}function Xb(n,e,i,a){var l,r;if(!n?.baseUrl){const c=Qb();return e?(l=c.vertexUrl)!==null&&l!==void 0?l:i:(r=c.geminiUrl)!==null&&r!==void 0?r:a}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pi{}function Q(n,e){const i=/\{([^}]+)\}/g;return n.replace(i,(a,l)=>{if(Object.prototype.hasOwnProperty.call(e,l)){const r=e[l];return r!=null?String(r):""}else throw new Error(`Key '${l}' not found in valueMap.`)})}function p(n,e,i){for(let r=0;r<e.length-1;r++){const c=e[r];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in n))if(Array.isArray(i))n[h]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[h])){const y=n[h];if(Array.isArray(i))for(let g=0;g<y.length;g++){const x=y[g];p(x,e.slice(r+1),i[g])}else for(const g of y)p(g,e.slice(r+1),i)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in n||(n[h]=[{}]);const y=n[h];p(y[0],e.slice(r+1),i);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const a=e[e.length-1],l=n[a];if(l!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===l)return;if(typeof l=="object"&&typeof i=="object"&&l!==null&&i!==null)Object.assign(l,i);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else a==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(n,i):n[a]=i}function f(n,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let a=0;a<e.length;a++){if(typeof n!="object"||n===null)return i;const l=e[a];if(l.endsWith("[]")){const r=l.slice(0,-2);if(r in n){const c=n[r];return Array.isArray(c)?c.map(h=>f(h,e.slice(a+1),i)):i}else return i}else n=n[l]}return n}catch(a){if(a instanceof TypeError)return i;throw a}}function Wb(n,e){for(const[i,a]of Object.entries(e)){const l=i.split("."),r=a.split("."),c=new Set;let h=-1;for(let y=0;y<l.length;y++)if(l[y]==="*"){h=y;break}if(h!==-1&&r.length>h)for(let y=h;y<r.length;y++){const g=r[y];g!=="*"&&!g.endsWith("[]")&&!g.endsWith("[0]")&&c.add(g)}Nc(n,l,r,0,c)}}function Nc(n,e,i,a,l){if(a>=e.length||typeof n!="object"||n===null)return;const r=e[a];if(r.endsWith("[]")){const c=r.slice(0,-2),h=n;if(c in h&&Array.isArray(h[c]))for(const y of h[c])Nc(y,e,i,a+1,l)}else if(r==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,h=Object.keys(c).filter(g=>!g.startsWith("_")&&!l.has(g)),y={};for(const g of h)y[g]=c[g];for(const[g,x]of Object.entries(y)){const b=[];for(const w of i.slice(a))w==="*"?b.push(g):b.push(w);p(c,b,x)}for(const g of h)delete c[g]}}else{const c=n;r in c&&Nc(c[r],e,i,a+1,l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qc(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zb(n){const e={},i=f(n,["operationName"]);i!=null&&p(e,["operationName"],i);const a=f(n,["resourceName"]);return a!=null&&p(e,["_url","resourceName"],a),e}function ew(n){const e={},i=f(n,["name"]);i!=null&&p(e,["name"],i);const a=f(n,["metadata"]);a!=null&&p(e,["metadata"],a);const l=f(n,["done"]);l!=null&&p(e,["done"],l);const r=f(n,["error"]);r!=null&&p(e,["error"],r);const c=f(n,["response","generateVideoResponse"]);return c!=null&&p(e,["response"],nw(c)),e}function tw(n){const e={},i=f(n,["name"]);i!=null&&p(e,["name"],i);const a=f(n,["metadata"]);a!=null&&p(e,["metadata"],a);const l=f(n,["done"]);l!=null&&p(e,["done"],l);const r=f(n,["error"]);r!=null&&p(e,["error"],r);const c=f(n,["response"]);return c!=null&&p(e,["response"],iw(c)),e}function nw(n){const e={},i=f(n,["generatedSamples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(c=>sw(c))),p(e,["generatedVideos"],r)}const a=f(n,["raiMediaFilteredCount"]);a!=null&&p(e,["raiMediaFilteredCount"],a);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&p(e,["raiMediaFilteredReasons"],l),e}function iw(n){const e={},i=f(n,["videos"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(c=>aw(c))),p(e,["generatedVideos"],r)}const a=f(n,["raiMediaFilteredCount"]);a!=null&&p(e,["raiMediaFilteredCount"],a);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&p(e,["raiMediaFilteredReasons"],l),e}function sw(n){const e={},i=f(n,["video"]);return i!=null&&p(e,["video"],rw(i)),e}function aw(n){const e={},i=f(n,["_self"]);return i!=null&&p(e,["video"],uw(i)),e}function ow(n){const e={},i=f(n,["operationName"]);return i!=null&&p(e,["_url","operationName"],i),e}function lw(n){const e={},i=f(n,["operationName"]);return i!=null&&p(e,["_url","operationName"],i),e}function rw(n){const e={},i=f(n,["uri"]);i!=null&&p(e,["uri"],i);const a=f(n,["encodedVideo"]);a!=null&&p(e,["videoBytes"],Qc(a));const l=f(n,["encoding"]);return l!=null&&p(e,["mimeType"],l),e}function uw(n){const e={},i=f(n,["gcsUri"]);i!=null&&p(e,["uri"],i);const a=f(n,["bytesBase64Encoded"]);a!=null&&p(e,["videoBytes"],Qc(a));const l=f(n,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Sp;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Sp||(Sp={}));var Tp;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Tp||(Tp={}));var Ep;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Ep||(Ep={}));var li;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(li||(li={}));var Cp;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Cp||(Cp={}));var Np;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Np||(Np={}));var Ap;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Ap||(Ap={}));var Rp;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Rp||(Rp={}));var Mp;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Mp||(Mp={}));var Ip;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ip||(Ip={}));var kp;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(kp||(kp={}));var Dp;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(Dp||(Dp={}));var Up;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Up||(Up={}));var jp;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(jp||(jp={}));var Op;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Op||(Op={}));var Lp;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Lp||(Lp={}));var jl;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(jl||(jl={}));var Pp;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Pp||(Pp={}));var Ac;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ac||(Ac={}));var qp;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(qp||(qp={}));var Bp;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Bp||(Bp={}));var Vp;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(Vp||(Vp={}));var Hp;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Hp||(Hp={}));var Gp;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Gp||(Gp={}));var zp;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(zp||(zp={}));var Fp;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Fp||(Fp={}));var $p;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})($p||($p={}));var Jp;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Jp||(Jp={}));var Yp;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Yp||(Yp={}));var Kp;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Kp||(Kp={}));var Qp;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Qp||(Qp={}));var Xp;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Xp||(Xp={}));var Wp;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Wp||(Wp={}));var Zp;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Zp||(Zp={}));var eg;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(eg||(eg={}));var tg;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(tg||(tg={}));var ng;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(ng||(ng={}));var ig;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(ig||(ig={}));var sg;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(sg||(sg={}));var ag;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(ag||(ag={}));var og;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(og||(og={}));var lg;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(lg||(lg={}));var rg;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(rg||(rg={}));var ug;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ug||(ug={}));var cg;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(cg||(cg={}));var dg;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(dg||(dg={}));var fg;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(fg||(fg={}));var hg;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(hg||(hg={}));var ks;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ks||(ks={}));class Rc{constructor(e){const i={};for(const a of e.headers.entries())i[a[0]]=a[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ha{get text(){var e,i,a,l,r,c,h,y;if(((l=(a=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1;let g="",x=!1;const b=[];for(const w of(y=(h=(c=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[S,E]of Object.entries(w))S!=="text"&&S!=="thought"&&(E!==null||E!==void 0)&&b.push(S);if(typeof w.text=="string"){if(typeof w.thought=="boolean"&&w.thought)continue;x=!0,g+=w.text}}return b.length>0,x?g:void 0}get data(){var e,i,a,l,r,c,h,y;if(((l=(a=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1;let g="";const x=[];for(const b of(y=(h=(c=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[w,S]of Object.entries(b))w!=="inlineData"&&(S!==null||S!==void 0)&&x.push(w);b.inlineData&&typeof b.inlineData.data=="string"&&(g+=atob(b.inlineData.data))}return x.length>0,g.length>0?btoa(g):void 0}get functionCalls(){var e,i,a,l,r,c,h,y;if(((l=(a=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1;const g=(y=(h=(c=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if(g?.length!==0)return g}get executableCode(){var e,i,a,l,r,c,h,y,g;if(((l=(a=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1;const x=(y=(h=(c=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if(x?.length!==0)return(g=x?.[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var e,i,a,l,r,c,h,y,g;if(((l=(a=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1;const x=(y=(h=(c=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if(x?.length!==0)return(g=x?.[0])===null||g===void 0?void 0:g.output}}class mg{}class pg{}class cw{}class dw{}class fw{}class hw{}class gg{}class yg{}class vg{}class mw{}class Ol{_fromAPIResponse({apiResponse:e,isVertexAI:i}){const a=new Ol;let l;const r=e;return i?l=tw(r):l=ew(r),Object.assign(a,l),a}}class xg{}class bg{}class wg{}class pw{}class gw{}class yw{}class _g{}class vw{get text(){var e,i,a;let l="",r=!1;const c=[];for(const h of(a=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&a!==void 0?a:[]){for(const[y,g]of Object.entries(h))y!=="text"&&y!=="thought"&&g!==null&&c.push(y);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;r=!0,l+=h.text}}return c.length>0,r?l:void 0}get data(){var e,i,a;let l="";const r=[];for(const c of(a=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&a!==void 0?a:[]){for(const[h,y]of Object.entries(c))h!=="inlineData"&&y!==null&&r.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(l+=atob(c.inlineData.data))}return r.length>0,l.length>0?btoa(l):void 0}}class xw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function be(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Sy(n,e){const i=be(n,e);return i?i.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}`:i.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${i}`:i:""}function Ty(n){return Array.isArray(n)?n.map(e=>Ll(e)):[Ll(n)]}function Ll(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Ey(n){const e=Ll(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Cy(n){const e=Ll(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Sg(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Ny(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Sg(e)):[Sg(n)]}function Mc(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Tg(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Eg(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ht(n){if(n==null)throw new Error("ContentUnion is required");return Mc(n)?n:{role:"user",parts:Ny(n)}}function Xc(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const a=ht(i);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(n.isVertexAI()){const i=ht(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>ht(i)):[ht(e)]}function Kt(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Tg(n)||Eg(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ht(n)]}const e=[],i=[],a=Mc(n[0]);for(const l of n){const r=Mc(l);if(r!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(l);else{if(Tg(l)||Eg(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(l)}}return a||e.push({role:"user",parts:Ny(i)}),e}function bw(n,e){n.includes("null")&&(e.nullable=!0);const i=n.filter(a=>a!=="null");if(i.length===1)e.type=Object.values(li).includes(i[0].toUpperCase())?i[0].toUpperCase():li.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const a of i)e.anyOf.push({type:Object.values(li).includes(a.toUpperCase())?a.toUpperCase():li.TYPE_UNSPECIFIED})}}function Ds(n){const e={},i=["items"],a=["anyOf"],l=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=n.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,n=r[1]):r[1].type==="null"&&(e.nullable=!0,n=r[0])),n.type instanceof Array&&bw(n.type,e);for(const[c,h]of Object.entries(n))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(li).includes(h.toUpperCase())?h.toUpperCase():li.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=Ds(h);else if(a.includes(c)){const y=[];for(const g of h){if(g.type=="null"){e.nullable=!0;continue}y.push(Ds(g))}e[c]=y}else if(l.includes(c)){const y={};for(const[g,x]of Object.entries(h))y[g]=Ds(x);e[c]=y}else{if(c==="additionalProperties")continue;e[c]=h}return e}function Wc(n){return Ds(n)}function Zc(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ed(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Vs(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ds(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ds(e.response));return n}function Hs(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of n)e.push(i);return e}function ww(n,e,i,a=1){const l=!e.startsWith(`${i}/`)&&e.split("/").length===a;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:l?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}/${e}`:e:l?`${i}/${e}`:e}function Mn(n,e){if(typeof e!="string")throw new Error("name must be a string");return ww(n,e,"cachedContents")}function Ay(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ui(n){return Qc(n)}function _w(n){return n!=null&&typeof n=="object"&&"name"in n}function Sw(n){return n!=null&&typeof n=="object"&&"video"in n}function Tw(n){return n!=null&&typeof n=="object"&&"uri"in n}function Ry(n){var e;let i;if(_w(n)&&(i=n.name),!(Tw(n)&&(i=n.uri,i===void 0))&&!(Sw(n)&&(i=(e=n.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof n=="string"&&(i=n),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const l=i.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${i}`);i=l[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function My(n,e){let i;return n.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function Iy(n){for(const e of["models","tunedModels","publisherModels"])if(Ew(n,e))return n[e];return[]}function Ew(n,e){return n!==null&&typeof n=="object"&&e in n}function Cw(n,e={}){const i=n,a={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(a.responseJsonSchema=i.outputSchema),e.behavior&&(a.behavior=e.behavior),{functionDeclarations:[a]}}function Nw(n,e={}){const i=[],a=new Set;for(const l of n){const r=l.name;if(a.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);a.add(r);const c=Cw(l,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function ky(n,e){let i;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const a=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,l=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(n.isVertexAI()){if(l>0||a!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(a>0||l!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function Aw(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Dy(n){if(typeof n!="object"||n===null)return{};const e=n,i=e.inlinedResponses;if(typeof i!="object"||i===null)return n;const l=i.inlinedResponses;if(!Array.isArray(l)||l.length===0)return n;let r=!1;for(const c of l){if(typeof c!="object"||c===null)continue;const y=c.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Gs(n,e){const i=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function Uy(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rw(n){const e={},i=f(n,["responsesFile"]);i!=null&&p(e,["fileName"],i);const a=f(n,["inlinedResponses","inlinedResponses"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>o_(c))),p(e,["inlinedResponses"],r)}const l=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>c)),p(e,["inlinedEmbedContentResponses"],r)}return e}function Mw(n){const e={},i=f(n,["predictionsFormat"]);i!=null&&p(e,["format"],i);const a=f(n,["gcsDestination","outputUriPrefix"]);a!=null&&p(e,["gcsUri"],a);const l=f(n,["bigqueryDestination","outputUri"]);return l!=null&&p(e,["bigqueryUri"],l),e}function Iw(n){const e={},i=f(n,["format"]);i!=null&&p(e,["predictionsFormat"],i);const a=f(n,["gcsUri"]);a!=null&&p(e,["gcsDestination","outputUriPrefix"],a);const l=f(n,["bigqueryUri"]);if(l!=null&&p(e,["bigqueryDestination","outputUri"],l),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function kl(n){const e={},i=f(n,["name"]);i!=null&&p(e,["name"],i);const a=f(n,["metadata","displayName"]);a!=null&&p(e,["displayName"],a);const l=f(n,["metadata","state"]);l!=null&&p(e,["state"],Uy(l));const r=f(n,["metadata","createTime"]);r!=null&&p(e,["createTime"],r);const c=f(n,["metadata","endTime"]);c!=null&&p(e,["endTime"],c);const h=f(n,["metadata","updateTime"]);h!=null&&p(e,["updateTime"],h);const y=f(n,["metadata","model"]);y!=null&&p(e,["model"],y);const g=f(n,["metadata","output"]);return g!=null&&p(e,["dest"],Rw(Dy(g))),e}function Ic(n){const e={},i=f(n,["name"]);i!=null&&p(e,["name"],i);const a=f(n,["displayName"]);a!=null&&p(e,["displayName"],a);const l=f(n,["state"]);l!=null&&p(e,["state"],Uy(l));const r=f(n,["error"]);r!=null&&p(e,["error"],r);const c=f(n,["createTime"]);c!=null&&p(e,["createTime"],c);const h=f(n,["startTime"]);h!=null&&p(e,["startTime"],h);const y=f(n,["endTime"]);y!=null&&p(e,["endTime"],y);const g=f(n,["updateTime"]);g!=null&&p(e,["updateTime"],g);const x=f(n,["model"]);x!=null&&p(e,["model"],x);const b=f(n,["inputConfig"]);b!=null&&p(e,["src"],kw(b));const w=f(n,["outputConfig"]);return w!=null&&p(e,["dest"],Mw(Dy(w))),e}function kw(n){const e={},i=f(n,["instancesFormat"]);i!=null&&p(e,["format"],i);const a=f(n,["gcsSource","uris"]);a!=null&&p(e,["gcsUri"],a);const l=f(n,["bigquerySource","inputUri"]);return l!=null&&p(e,["bigqueryUri"],l),e}function Dw(n,e){const i={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const a=f(e,["fileName"]);a!=null&&p(i,["fileName"],a);const l=f(e,["inlinedRequests"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>a_(n,c))),p(i,["requests","requests"],r)}return i}function Uw(n){const e={},i=f(n,["format"]);i!=null&&p(e,["instancesFormat"],i);const a=f(n,["gcsUri"]);a!=null&&p(e,["gcsSource","uris"],a);const l=f(n,["bigqueryUri"]);if(l!=null&&p(e,["bigquerySource","inputUri"],l),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function jw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["data"]);i!=null&&p(e,["data"],i);const a=f(n,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}function Ow(n,e){const i={},a=f(e,["name"]);return a!=null&&p(i,["_url","name"],Gs(n,a)),i}function Lw(n,e){const i={},a=f(e,["name"]);return a!=null&&p(i,["_url","name"],Gs(n,a)),i}function Pw(n){const e={},i=f(n,["content"]);i!=null&&p(e,["content"],i);const a=f(n,["citationMetadata"]);a!=null&&p(e,["citationMetadata"],qw(a));const l=f(n,["tokenCount"]);l!=null&&p(e,["tokenCount"],l);const r=f(n,["finishReason"]);r!=null&&p(e,["finishReason"],r);const c=f(n,["urlContextMetadata"]);c!=null&&p(e,["urlContextMetadata"],c);const h=f(n,["avgLogprobs"]);h!=null&&p(e,["avgLogprobs"],h);const y=f(n,["groundingMetadata"]);y!=null&&p(e,["groundingMetadata"],y);const g=f(n,["index"]);g!=null&&p(e,["index"],g);const x=f(n,["logprobsResult"]);x!=null&&p(e,["logprobsResult"],x);const b=f(n,["safetyRatings"]);if(b!=null){let w=b;Array.isArray(w)&&(w=w.map(S=>S)),p(e,["safetyRatings"],w)}return e}function qw(n){const e={},i=f(n,["citationSources"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["citations"],a)}return e}function jy(n){const e={},i=f(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(r=>h_(r))),p(e,["parts"],l)}const a=f(n,["role"]);return a!=null&&p(e,["role"],a),e}function Bw(n,e){const i={},a=f(n,["displayName"]);if(e!==void 0&&a!=null&&p(e,["batch","displayName"],a),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function Vw(n,e){const i={},a=f(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const l=f(n,["dest"]);return e!==void 0&&l!=null&&p(e,["outputConfig"],Iw(Aw(l))),i}function Cg(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["src"]);l!=null&&p(i,["batch","inputConfig"],Dw(n,ky(n,l)));const r=f(e,["config"]);return r!=null&&Bw(r,i),i}function Hw(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["model"],be(n,a));const l=f(e,["src"]);l!=null&&p(i,["inputConfig"],Uw(ky(n,l)));const r=f(e,["config"]);return r!=null&&Vw(r,i),i}function Gw(n,e){const i={},a=f(n,["displayName"]);return e!==void 0&&a!=null&&p(e,["batch","displayName"],a),i}function zw(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["src"]);l!=null&&p(i,["batch","inputConfig"],Xw(n,l));const r=f(e,["config"]);return r!=null&&Gw(r,i),i}function Fw(n,e){const i={},a=f(e,["name"]);return a!=null&&p(i,["_url","name"],Gs(n,a)),i}function $w(n,e){const i={},a=f(e,["name"]);return a!=null&&p(i,["_url","name"],Gs(n,a)),i}function Jw(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["name"]);a!=null&&p(e,["name"],a);const l=f(n,["done"]);l!=null&&p(e,["done"],l);const r=f(n,["error"]);return r!=null&&p(e,["error"],r),e}function Yw(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["name"]);a!=null&&p(e,["name"],a);const l=f(n,["done"]);l!=null&&p(e,["done"],l);const r=f(n,["error"]);return r!=null&&p(e,["error"],r),e}function Kw(n,e){const i={},a=f(e,["contents"]);if(a!=null){let r=Xc(n,a);Array.isArray(r)&&(r=r.map(c=>c)),p(i,["requests[]","request","content"],r)}const l=f(e,["config"]);return l!=null&&(p(i,["_self"],Qw(l,i)),Wb(i,{"requests[].*":"requests[].request.*"})),i}function Qw(n,e){const i={},a=f(n,["taskType"]);e!==void 0&&a!=null&&p(e,["requests[]","taskType"],a);const l=f(n,["title"]);e!==void 0&&l!=null&&p(e,["requests[]","title"],l);const r=f(n,["outputDimensionality"]);if(e!==void 0&&r!=null&&p(e,["requests[]","outputDimensionality"],r),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function Xw(n,e){const i={},a=f(e,["fileName"]);a!=null&&p(i,["file_name"],a);const l=f(e,["inlinedRequests"]);return l!=null&&p(i,["requests"],Kw(n,l)),i}function Ww(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["fileUri"]);i!=null&&p(e,["fileUri"],i);const a=f(n,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}function Zw(n,e,i){const a={},l=f(e,["systemInstruction"]);i!==void 0&&l!=null&&p(i,["systemInstruction"],jy(ht(l)));const r=f(e,["temperature"]);r!=null&&p(a,["temperature"],r);const c=f(e,["topP"]);c!=null&&p(a,["topP"],c);const h=f(e,["topK"]);h!=null&&p(a,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&p(a,["candidateCount"],y);const g=f(e,["maxOutputTokens"]);g!=null&&p(a,["maxOutputTokens"],g);const x=f(e,["stopSequences"]);x!=null&&p(a,["stopSequences"],x);const b=f(e,["responseLogprobs"]);b!=null&&p(a,["responseLogprobs"],b);const w=f(e,["logprobs"]);w!=null&&p(a,["logprobs"],w);const S=f(e,["presencePenalty"]);S!=null&&p(a,["presencePenalty"],S);const E=f(e,["frequencyPenalty"]);E!=null&&p(a,["frequencyPenalty"],E);const C=f(e,["seed"]);C!=null&&p(a,["seed"],C);const N=f(e,["responseMimeType"]);N!=null&&p(a,["responseMimeType"],N);const M=f(e,["responseSchema"]);M!=null&&p(a,["responseSchema"],Wc(M));const D=f(e,["responseJsonSchema"]);if(D!=null&&p(a,["responseJsonSchema"],D),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=f(e,["safetySettings"]);if(i!==void 0&&k!=null){let ce=k;Array.isArray(ce)&&(ce=ce.map(Ze=>m_(Ze))),p(i,["safetySettings"],ce)}const q=f(e,["tools"]);if(i!==void 0&&q!=null){let ce=Hs(q);Array.isArray(ce)&&(ce=ce.map(Ze=>p_(Vs(Ze)))),p(i,["tools"],ce)}const z=f(e,["toolConfig"]);if(i!==void 0&&z!=null&&p(i,["toolConfig"],z),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=f(e,["cachedContent"]);i!==void 0&&L!=null&&p(i,["cachedContent"],Mn(n,L));const $=f(e,["responseModalities"]);$!=null&&p(a,["responseModalities"],$);const ie=f(e,["mediaResolution"]);ie!=null&&p(a,["mediaResolution"],ie);const X=f(e,["speechConfig"]);if(X!=null&&p(a,["speechConfig"],Zc(X)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const he=f(e,["thinkingConfig"]);he!=null&&p(a,["thinkingConfig"],he);const qe=f(e,["imageConfig"]);return qe!=null&&p(a,["imageConfig"],qe),a}function e_(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["candidates"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(g=>Pw(g))),p(e,["candidates"],y)}const l=f(n,["modelVersion"]);l!=null&&p(e,["modelVersion"],l);const r=f(n,["promptFeedback"]);r!=null&&p(e,["promptFeedback"],r);const c=f(n,["responseId"]);c!=null&&p(e,["responseId"],c);const h=f(n,["usageMetadata"]);return h!=null&&p(e,["usageMetadata"],h),e}function t_(n,e){const i={},a=f(e,["name"]);return a!=null&&p(i,["_url","name"],Gs(n,a)),i}function n_(n,e){const i={},a=f(e,["name"]);return a!=null&&p(i,["_url","name"],Gs(n,a)),i}function i_(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(n,["enableWidget"]);return i!=null&&p(e,["enableWidget"],i),e}function s_(n){const e={},i=f(n,["timeRangeFilter"]);if(i!=null&&p(e,["timeRangeFilter"],i),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function a_(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["request","model"],be(n,a));const l=f(e,["contents"]);if(l!=null){let h=Kt(l);Array.isArray(h)&&(h=h.map(y=>jy(y))),p(i,["request","contents"],h)}const r=f(e,["metadata"]);r!=null&&p(i,["metadata"],r);const c=f(e,["config"]);return c!=null&&p(i,["request","generationConfig"],Zw(n,c,f(i,["request"],{}))),i}function o_(n){const e={},i=f(n,["response"]);i!=null&&p(e,["response"],e_(i));const a=f(n,["error"]);return a!=null&&p(e,["error"],a),e}function l_(n,e){const i={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&p(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);if(e!==void 0&&l!=null&&p(e,["_query","pageToken"],l),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function r_(n,e){const i={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&p(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const r=f(n,["filter"]);return e!==void 0&&r!=null&&p(e,["_query","filter"],r),i}function u_(n){const e={},i=f(n,["config"]);return i!=null&&l_(i,e),e}function c_(n){const e={},i=f(n,["config"]);return i!=null&&r_(i,e),e}function d_(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["nextPageToken"]);a!=null&&p(e,["nextPageToken"],a);const l=f(n,["operations"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>kl(c))),p(e,["batchJobs"],r)}return e}function f_(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["nextPageToken"]);a!=null&&p(e,["nextPageToken"],a);const l=f(n,["batchPredictionJobs"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>Ic(c))),p(e,["batchJobs"],r)}return e}function h_(n){const e={},i=f(n,["videoMetadata"]);i!=null&&p(e,["videoMetadata"],i);const a=f(n,["thought"]);a!=null&&p(e,["thought"],a);const l=f(n,["inlineData"]);l!=null&&p(e,["inlineData"],jw(l));const r=f(n,["fileData"]);r!=null&&p(e,["fileData"],Ww(r));const c=f(n,["thoughtSignature"]);c!=null&&p(e,["thoughtSignature"],c);const h=f(n,["functionCall"]);h!=null&&p(e,["functionCall"],h);const y=f(n,["codeExecutionResult"]);y!=null&&p(e,["codeExecutionResult"],y);const g=f(n,["executableCode"]);g!=null&&p(e,["executableCode"],g);const x=f(n,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const b=f(n,["text"]);return b!=null&&p(e,["text"],b),e}function m_(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["category"]);i!=null&&p(e,["category"],i);const a=f(n,["threshold"]);return a!=null&&p(e,["threshold"],a),e}function p_(n){const e={},i=f(n,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(x=>x)),p(e,["functionDeclarations"],g)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=f(n,["googleSearch"]);a!=null&&p(e,["googleSearch"],s_(a));const l=f(n,["googleSearchRetrieval"]);if(l!=null&&p(e,["googleSearchRetrieval"],l),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=f(n,["googleMaps"]);r!=null&&p(e,["googleMaps"],i_(r));const c=f(n,["urlContext"]);c!=null&&p(e,["urlContext"],c);const h=f(n,["computerUse"]);h!=null&&p(e,["computerUse"],h);const y=f(n,["codeExecution"]);return y!=null&&p(e,["codeExecution"],y),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Li;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Li||(Li={}));class Wa{constructor(e,i,a,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,a,l)}init(e,i,a){var l,r;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!a||Object.keys(a).length===0?c={config:{}}:typeof a=="object"?c=Object.assign({},a):c=a,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(r=(l=c.config)===null||l===void 0?void 0:l.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g_ extends Pi{constructor(e){super(),this.apiClient=e,this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)},this.list=async(i={})=>new Wa(Li.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(i),i)}createInlinedGenerateContentRequest(e){const i=Cg(this.apiClient,e),a=i._url,l=Q("{model}:batchGenerateContent",a),h=i.batch.inputConfig.requests,y=h.requests,g=[];for(const x of y){const b=Object.assign({},x);if(b.systemInstruction){const w=b.systemInstruction;delete b.systemInstruction;const S=b.request;S.systemInstruction=w,b.request=S}g.push(b)}return h.requests=g,delete i.config,delete i._url,delete i._query,{path:l,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const a=i?Object.assign({},i):{},l=Date.now().toString();if(a.displayName||(a.displayName=`genaiBatchJob_${l}`),a.dest===void 0){const r=this.getGcsUri(e),c=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?a.dest=`${r.slice(0,-6)}/dest`:a.dest=`${r}_dest_${l}`;else if(c)a.dest=`${c}_dest_${l}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return a}async createInternal(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=Hw(this.apiClient,e);return h=Q("batchPredictionJobs",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>Ic(x))}else{const g=Cg(this.apiClient,e);return h=Q("{model}:batchGenerateContent",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>kl(x))}}async createEmbeddingsInternal(e){var i,a;let l,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=zw(this.apiClient,e);return r=Q("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>kl(y))}}async get(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=n_(this.apiClient,e);return h=Q("batchPredictionJobs/{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>Ic(x))}else{const g=t_(this.apiClient,e);return h=Q("batches/{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>kl(x))}}async cancel(e){var i,a,l,r;let c="",h={};if(this.apiClient.isVertexAI()){const y=Lw(this.apiClient,e);c=Q("batchPredictionJobs/{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}else{const y=Ow(this.apiClient,e);c=Q("batches/{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=c_(e);return h=Q("batchPredictionJobs",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=f_(x),w=new _g;return Object.assign(w,b),w})}else{const g=u_(e);return h=Q("batches",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=d_(x),w=new _g;return Object.assign(w,b),w})}}async delete(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=$w(this.apiClient,e);return h=Q("batchPredictionJobs/{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>Yw(x))}else{const g=Fw(this.apiClient,e);return h=Q("batches/{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>Jw(x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y_(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["data"]);i!=null&&p(e,["data"],i);const a=f(n,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}function Ng(n){const e={},i=f(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(r=>P_(r))),p(e,["parts"],l)}const a=f(n,["role"]);return a!=null&&p(e,["role"],a),e}function v_(n,e){const i={},a=f(n,["ttl"]);e!==void 0&&a!=null&&p(e,["ttl"],a);const l=f(n,["expireTime"]);e!==void 0&&l!=null&&p(e,["expireTime"],l);const r=f(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let x=Kt(c);Array.isArray(x)&&(x=x.map(b=>Ng(b))),p(e,["contents"],x)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&p(e,["systemInstruction"],Ng(ht(h)));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let x=y;Array.isArray(x)&&(x=x.map(b=>q_(b))),p(e,["tools"],x)}const g=f(n,["toolConfig"]);if(e!==void 0&&g!=null&&p(e,["toolConfig"],g),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function x_(n,e){const i={},a=f(n,["ttl"]);e!==void 0&&a!=null&&p(e,["ttl"],a);const l=f(n,["expireTime"]);e!==void 0&&l!=null&&p(e,["expireTime"],l);const r=f(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let b=Kt(c);Array.isArray(b)&&(b=b.map(w=>w)),p(e,["contents"],b)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&p(e,["systemInstruction"],ht(h));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let b=y;Array.isArray(b)&&(b=b.map(w=>B_(w))),p(e,["tools"],b)}const g=f(n,["toolConfig"]);e!==void 0&&g!=null&&p(e,["toolConfig"],g);const x=f(n,["kmsKeyName"]);return e!==void 0&&x!=null&&p(e,["encryption_spec","kmsKeyName"],x),i}function b_(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["model"],Sy(n,a));const l=f(e,["config"]);return l!=null&&v_(l,i),i}function w_(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["model"],Sy(n,a));const l=f(e,["config"]);return l!=null&&x_(l,i),i}function __(n,e){const i={},a=f(e,["name"]);return a!=null&&p(i,["_url","name"],Mn(n,a)),i}function S_(n,e){const i={},a=f(e,["name"]);return a!=null&&p(i,["_url","name"],Mn(n,a)),i}function T_(n){const e={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(e,["sdkHttpResponse"],i),e}function E_(n){const e={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(e,["sdkHttpResponse"],i),e}function C_(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["fileUri"]);i!=null&&p(e,["fileUri"],i);const a=f(n,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}function N_(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(n,["description"]);i!=null&&p(e,["description"],i);const a=f(n,["name"]);a!=null&&p(e,["name"],a);const l=f(n,["parameters"]);l!=null&&p(e,["parameters"],l);const r=f(n,["parametersJsonSchema"]);r!=null&&p(e,["parametersJsonSchema"],r);const c=f(n,["response"]);c!=null&&p(e,["response"],c);const h=f(n,["responseJsonSchema"]);return h!=null&&p(e,["responseJsonSchema"],h),e}function A_(n,e){const i={},a=f(e,["name"]);return a!=null&&p(i,["_url","name"],Mn(n,a)),i}function R_(n,e){const i={},a=f(e,["name"]);return a!=null&&p(i,["_url","name"],Mn(n,a)),i}function M_(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(n,["enableWidget"]);return i!=null&&p(e,["enableWidget"],i),e}function I_(n){const e={},i=f(n,["timeRangeFilter"]);if(i!=null&&p(e,["timeRangeFilter"],i),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function k_(n,e){const i={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&p(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);return e!==void 0&&l!=null&&p(e,["_query","pageToken"],l),i}function D_(n,e){const i={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&p(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);return e!==void 0&&l!=null&&p(e,["_query","pageToken"],l),i}function U_(n){const e={},i=f(n,["config"]);return i!=null&&k_(i,e),e}function j_(n){const e={},i=f(n,["config"]);return i!=null&&D_(i,e),e}function O_(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["nextPageToken"]);a!=null&&p(e,["nextPageToken"],a);const l=f(n,["cachedContents"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>c)),p(e,["cachedContents"],r)}return e}function L_(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["nextPageToken"]);a!=null&&p(e,["nextPageToken"],a);const l=f(n,["cachedContents"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>c)),p(e,["cachedContents"],r)}return e}function P_(n){const e={},i=f(n,["videoMetadata"]);i!=null&&p(e,["videoMetadata"],i);const a=f(n,["thought"]);a!=null&&p(e,["thought"],a);const l=f(n,["inlineData"]);l!=null&&p(e,["inlineData"],y_(l));const r=f(n,["fileData"]);r!=null&&p(e,["fileData"],C_(r));const c=f(n,["thoughtSignature"]);c!=null&&p(e,["thoughtSignature"],c);const h=f(n,["functionCall"]);h!=null&&p(e,["functionCall"],h);const y=f(n,["codeExecutionResult"]);y!=null&&p(e,["codeExecutionResult"],y);const g=f(n,["executableCode"]);g!=null&&p(e,["executableCode"],g);const x=f(n,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const b=f(n,["text"]);return b!=null&&p(e,["text"],b),e}function q_(n){const e={},i=f(n,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(x=>x)),p(e,["functionDeclarations"],g)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=f(n,["googleSearch"]);a!=null&&p(e,["googleSearch"],I_(a));const l=f(n,["googleSearchRetrieval"]);if(l!=null&&p(e,["googleSearchRetrieval"],l),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=f(n,["googleMaps"]);r!=null&&p(e,["googleMaps"],M_(r));const c=f(n,["urlContext"]);c!=null&&p(e,["urlContext"],c);const h=f(n,["computerUse"]);h!=null&&p(e,["computerUse"],h);const y=f(n,["codeExecution"]);return y!=null&&p(e,["codeExecution"],y),e}function B_(n){const e={},i=f(n,["functionDeclarations"]);if(i!=null){let b=i;Array.isArray(b)&&(b=b.map(w=>N_(w))),p(e,["functionDeclarations"],b)}const a=f(n,["retrieval"]);a!=null&&p(e,["retrieval"],a);const l=f(n,["googleSearch"]);l!=null&&p(e,["googleSearch"],l);const r=f(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const c=f(n,["enterpriseWebSearch"]);c!=null&&p(e,["enterpriseWebSearch"],c);const h=f(n,["googleMaps"]);h!=null&&p(e,["googleMaps"],h);const y=f(n,["urlContext"]);y!=null&&p(e,["urlContext"],y);const g=f(n,["computerUse"]);g!=null&&p(e,["computerUse"],g);const x=f(n,["codeExecution"]);return x!=null&&p(e,["codeExecution"],x),e}function V_(n,e){const i={},a=f(n,["ttl"]);e!==void 0&&a!=null&&p(e,["ttl"],a);const l=f(n,["expireTime"]);return e!==void 0&&l!=null&&p(e,["expireTime"],l),i}function H_(n,e){const i={},a=f(n,["ttl"]);e!==void 0&&a!=null&&p(e,["ttl"],a);const l=f(n,["expireTime"]);return e!==void 0&&l!=null&&p(e,["expireTime"],l),i}function G_(n,e){const i={},a=f(e,["name"]);a!=null&&p(i,["_url","name"],Mn(n,a));const l=f(e,["config"]);return l!=null&&V_(l,i),i}function z_(n,e){const i={},a=f(e,["name"]);a!=null&&p(i,["_url","name"],Mn(n,a));const l=f(e,["config"]);return l!=null&&H_(l,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F_ extends Pi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Wa(Li.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(i),i)}async create(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=w_(this.apiClient,e);return h=Q("cachedContents",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>x)}else{const g=b_(this.apiClient,e);return h=Q("cachedContents",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>x)}}async get(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=R_(this.apiClient,e);return h=Q("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>x)}else{const g=A_(this.apiClient,e);return h=Q("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>x)}}async delete(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=S_(this.apiClient,e);return h=Q("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=E_(x),w=new bg;return Object.assign(w,b),w})}else{const g=__(this.apiClient,e);return h=Q("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=T_(x),w=new bg;return Object.assign(w,b),w})}}async update(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=z_(this.apiClient,e);return h=Q("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>x)}else{const g=G_(this.apiClient,e);return h=Q("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>x)}}async listInternal(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=j_(e);return h=Q("cachedContents",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=L_(x),w=new wg;return Object.assign(w,b),w})}else{const g=U_(e);return h=Q("cachedContents",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=O_(x),w=new wg;return Object.assign(w,b),w})}}}function Ag(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],a=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Le(n){return this instanceof Le?(this.v=n,this):new Le(n)}function Us(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(n,e||[]),l,r=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),l[Symbol.asyncIterator]=function(){return this},l;function c(S){return function(E){return Promise.resolve(E).then(S,b)}}function h(S,E){a[S]&&(l[S]=function(C){return new Promise(function(N,M){r.push([S,C,N,M])>1||y(S,C)})},E&&(l[S]=E(l[S])))}function y(S,E){try{g(a[S](E))}catch(C){w(r[0][3],C)}}function g(S){S.value instanceof Le?Promise.resolve(S.value.v).then(x,b):w(r[0][2],S)}function x(S){y("next",S)}function b(S){y("throw",S)}function w(S,E){S(E),r.shift(),r.length&&y(r[0][0],r[0][1])}}function za(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof Ag=="function"?Ag(n):n[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(r){i[r]=n[r]&&function(c){return new Promise(function(h,y){c=n[r](c),l(h,y,c.done,c.value)})}}function l(r,c,h,y){Promise.resolve(y).then(function(g){r({value:g,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $_(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const i=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:Oy(i)}function Oy(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function J_(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Rg(n){if(n===void 0||n.length===0)return[];const e=[],i=n.length;let a=0;for(;a<i;)if(n[a].role==="user")e.push(n[a]),a++;else{const l=[];let r=!0;for(;a<i&&n[a].role==="model";)l.push(n[a]),r&&!Oy(n[a])&&(r=!1),a++;r?e.push(...l):e.pop()}return e}class Y_{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new K_(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class K_{constructor(e,i,a,l={},r=[]){this.apiClient=e,this.modelsModule=i,this.model=a,this.config=l,this.history=r,this.sendPromise=Promise.resolve(),J_(r)}async sendMessage(e){var i;await this.sendPromise;const a=ht(e.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var r,c,h;const y=await l,g=(c=(r=y.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content,x=y.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let w=[];x!=null&&(w=(h=x.slice(b))!==null&&h!==void 0?h:[]);const S=g?[g]:[];this.recordHistory(a,S,w)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),l}async sendMessageStream(e){var i;await this.sendPromise;const a=ht(e.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=l.then(()=>{}).catch(()=>{});const r=await l;return this.processStreamResponse(r,a)}getHistory(e=!1){const i=e?Rg(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var a,l;return Us(this,arguments,function*(){var c,h,y,g;const x=[];try{for(var b=!0,w=za(e),S;S=yield Le(w.next()),c=S.done,!c;b=!0){g=S.value,b=!1;const E=g;if($_(E)){const C=(l=(a=E.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content;C!==void 0&&x.push(C)}yield yield Le(E)}}catch(E){h={error:E}}finally{try{!b&&!c&&(y=w.return)&&(yield Le(y.call(w)))}finally{if(h)throw h.error}}this.recordHistory(i,x)})}recordHistory(e,i,a){let l=[];i.length>0&&i.every(r=>r.role!==void 0)?l=i:l.push({role:"model",parts:[]}),a&&a.length>0?this.history.push(...Rg(a)):this.history.push(e),this.history.push(...l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,zl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q_(n){const e={},i=f(n,["file"]);return i!=null&&p(e,["file"],i),e}function X_(n){const e={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(e,["sdkHttpResponse"],i),e}function W_(n){const e={},i=f(n,["name"]);return i!=null&&p(e,["_url","file"],Ry(i)),e}function Z_(n){const e={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(e,["sdkHttpResponse"],i),e}function eS(n){const e={},i=f(n,["name"]);return i!=null&&p(e,["_url","file"],Ry(i)),e}function tS(n,e){const i={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&p(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);return e!==void 0&&l!=null&&p(e,["_query","pageToken"],l),i}function nS(n){const e={},i=f(n,["config"]);return i!=null&&tS(i,e),e}function iS(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["nextPageToken"]);a!=null&&p(e,["nextPageToken"],a);const l=f(n,["files"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(c=>c)),p(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sS extends Pi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Wa(Li.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,a;let l,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=nS(e);return r=Q("files",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:y.headers},x})),l.then(y=>{const g=iS(y),x=new pw;return Object.assign(x,g),x})}}async createInternal(e){var i,a;let l,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Q_(e);return r=Q("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const g=X_(y),x=new gw;return Object.assign(x,g),x})}}async get(e){var i,a;let l,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=eS(e);return r=Q("files/{file}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var i,a;let l,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=W_(e);return r=Q("files/{file}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:y.headers},x})),l.then(y=>{const g=Z_(y),x=new yw;return Object.assign(x,g),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dl(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["data"]);i!=null&&p(e,["data"],i);const a=f(n,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}function aS(n){const e={},i=f(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(r=>bS(r))),p(e,["parts"],l)}const a=f(n,["role"]);return a!=null&&p(e,["role"],a),e}function oS(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["fileUri"]);i!=null&&p(e,["fileUri"],i);const a=f(n,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}function lS(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(n,["description"]);i!=null&&p(e,["description"],i);const a=f(n,["name"]);a!=null&&p(e,["name"],a);const l=f(n,["parameters"]);l!=null&&p(e,["parameters"],l);const r=f(n,["parametersJsonSchema"]);r!=null&&p(e,["parametersJsonSchema"],r);const c=f(n,["response"]);c!=null&&p(e,["response"],c);const h=f(n,["responseJsonSchema"]);return h!=null&&p(e,["responseJsonSchema"],h),e}function rS(n){const e={},i=f(n,["modelSelectionConfig"]);i!=null&&p(e,["modelConfig"],i);const a=f(n,["audioTimestamp"]);a!=null&&p(e,["audioTimestamp"],a);const l=f(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const r=f(n,["enableAffectiveDialog"]);r!=null&&p(e,["enableAffectiveDialog"],r);const c=f(n,["frequencyPenalty"]);c!=null&&p(e,["frequencyPenalty"],c);const h=f(n,["logprobs"]);h!=null&&p(e,["logprobs"],h);const y=f(n,["maxOutputTokens"]);y!=null&&p(e,["maxOutputTokens"],y);const g=f(n,["mediaResolution"]);g!=null&&p(e,["mediaResolution"],g);const x=f(n,["presencePenalty"]);x!=null&&p(e,["presencePenalty"],x);const b=f(n,["responseJsonSchema"]);b!=null&&p(e,["responseJsonSchema"],b);const w=f(n,["responseLogprobs"]);w!=null&&p(e,["responseLogprobs"],w);const S=f(n,["responseMimeType"]);S!=null&&p(e,["responseMimeType"],S);const E=f(n,["responseModalities"]);E!=null&&p(e,["responseModalities"],E);const C=f(n,["responseSchema"]);C!=null&&p(e,["responseSchema"],C);const N=f(n,["routingConfig"]);N!=null&&p(e,["routingConfig"],N);const M=f(n,["seed"]);M!=null&&p(e,["seed"],M);const D=f(n,["speechConfig"]);D!=null&&p(e,["speechConfig"],Ly(D));const k=f(n,["stopSequences"]);k!=null&&p(e,["stopSequences"],k);const q=f(n,["temperature"]);q!=null&&p(e,["temperature"],q);const z=f(n,["thinkingConfig"]);z!=null&&p(e,["thinkingConfig"],z);const L=f(n,["topK"]);L!=null&&p(e,["topK"],L);const $=f(n,["topP"]);if($!=null&&p(e,["topP"],$),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function uS(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(n,["enableWidget"]);return i!=null&&p(e,["enableWidget"],i),e}function cS(n){const e={},i=f(n,["timeRangeFilter"]);if(i!=null&&p(e,["timeRangeFilter"],i),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function dS(n,e){const i={},a=f(n,["generationConfig"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig"],a);const l=f(n,["responseModalities"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","responseModalities"],l);const r=f(n,["temperature"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","temperature"],r);const c=f(n,["topP"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","topP"],c);const h=f(n,["topK"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","topK"],h);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","maxOutputTokens"],y);const g=f(n,["mediaResolution"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","mediaResolution"],g);const x=f(n,["seed"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","seed"],x);const b=f(n,["speechConfig"]);e!==void 0&&b!=null&&p(e,["setup","generationConfig","speechConfig"],ed(b));const w=f(n,["thinkingConfig"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","thinkingConfig"],w);const S=f(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],S);const E=f(n,["systemInstruction"]);e!==void 0&&E!=null&&p(e,["setup","systemInstruction"],aS(ht(E)));const C=f(n,["tools"]);if(e!==void 0&&C!=null){let L=Hs(C);Array.isArray(L)&&(L=L.map($=>_S(Vs($)))),p(e,["setup","tools"],L)}const N=f(n,["sessionResumption"]);e!==void 0&&N!=null&&p(e,["setup","sessionResumption"],wS(N));const M=f(n,["inputAudioTranscription"]);e!==void 0&&M!=null&&p(e,["setup","inputAudioTranscription"],M);const D=f(n,["outputAudioTranscription"]);e!==void 0&&D!=null&&p(e,["setup","outputAudioTranscription"],D);const k=f(n,["realtimeInputConfig"]);e!==void 0&&k!=null&&p(e,["setup","realtimeInputConfig"],k);const q=f(n,["contextWindowCompression"]);e!==void 0&&q!=null&&p(e,["setup","contextWindowCompression"],q);const z=f(n,["proactivity"]);return e!==void 0&&z!=null&&p(e,["setup","proactivity"],z),i}function fS(n,e){const i={},a=f(n,["generationConfig"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig"],rS(a));const l=f(n,["responseModalities"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","responseModalities"],l);const r=f(n,["temperature"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","temperature"],r);const c=f(n,["topP"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","topP"],c);const h=f(n,["topK"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","topK"],h);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","maxOutputTokens"],y);const g=f(n,["mediaResolution"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","mediaResolution"],g);const x=f(n,["seed"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","seed"],x);const b=f(n,["speechConfig"]);e!==void 0&&b!=null&&p(e,["setup","generationConfig","speechConfig"],Ly(ed(b)));const w=f(n,["thinkingConfig"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","thinkingConfig"],w);const S=f(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],S);const E=f(n,["systemInstruction"]);e!==void 0&&E!=null&&p(e,["setup","systemInstruction"],ht(E));const C=f(n,["tools"]);if(e!==void 0&&C!=null){let L=Hs(C);Array.isArray(L)&&(L=L.map($=>SS(Vs($)))),p(e,["setup","tools"],L)}const N=f(n,["sessionResumption"]);e!==void 0&&N!=null&&p(e,["setup","sessionResumption"],N);const M=f(n,["inputAudioTranscription"]);e!==void 0&&M!=null&&p(e,["setup","inputAudioTranscription"],M);const D=f(n,["outputAudioTranscription"]);e!==void 0&&D!=null&&p(e,["setup","outputAudioTranscription"],D);const k=f(n,["realtimeInputConfig"]);e!==void 0&&k!=null&&p(e,["setup","realtimeInputConfig"],k);const q=f(n,["contextWindowCompression"]);e!==void 0&&q!=null&&p(e,["setup","contextWindowCompression"],q);const z=f(n,["proactivity"]);return e!==void 0&&z!=null&&p(e,["setup","proactivity"],z),i}function hS(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["setup","model"],be(n,a));const l=f(e,["config"]);return l!=null&&p(i,["config"],dS(l,i)),i}function mS(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["setup","model"],be(n,a));const l=f(e,["config"]);return l!=null&&p(i,["config"],fS(l,i)),i}function pS(n){const e={},i=f(n,["musicGenerationConfig"]);return i!=null&&p(e,["musicGenerationConfig"],i),e}function gS(n){const e={},i=f(n,["weightedPrompts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["weightedPrompts"],a)}return e}function yS(n){const e={},i=f(n,["media"]);if(i!=null){let g=Ty(i);Array.isArray(g)&&(g=g.map(x=>Dl(x))),p(e,["mediaChunks"],g)}const a=f(n,["audio"]);a!=null&&p(e,["audio"],Dl(Cy(a)));const l=f(n,["audioStreamEnd"]);l!=null&&p(e,["audioStreamEnd"],l);const r=f(n,["video"]);r!=null&&p(e,["video"],Dl(Ey(r)));const c=f(n,["text"]);c!=null&&p(e,["text"],c);const h=f(n,["activityStart"]);h!=null&&p(e,["activityStart"],h);const y=f(n,["activityEnd"]);return y!=null&&p(e,["activityEnd"],y),e}function vS(n){const e={},i=f(n,["media"]);if(i!=null){let g=Ty(i);Array.isArray(g)&&(g=g.map(x=>x)),p(e,["mediaChunks"],g)}const a=f(n,["audio"]);a!=null&&p(e,["audio"],Cy(a));const l=f(n,["audioStreamEnd"]);l!=null&&p(e,["audioStreamEnd"],l);const r=f(n,["video"]);r!=null&&p(e,["video"],Ey(r));const c=f(n,["text"]);c!=null&&p(e,["text"],c);const h=f(n,["activityStart"]);h!=null&&p(e,["activityStart"],h);const y=f(n,["activityEnd"]);return y!=null&&p(e,["activityEnd"],y),e}function xS(n){const e={},i=f(n,["setupComplete"]);i!=null&&p(e,["setupComplete"],i);const a=f(n,["serverContent"]);a!=null&&p(e,["serverContent"],a);const l=f(n,["toolCall"]);l!=null&&p(e,["toolCall"],l);const r=f(n,["toolCallCancellation"]);r!=null&&p(e,["toolCallCancellation"],r);const c=f(n,["usageMetadata"]);c!=null&&p(e,["usageMetadata"],TS(c));const h=f(n,["goAway"]);h!=null&&p(e,["goAway"],h);const y=f(n,["sessionResumptionUpdate"]);return y!=null&&p(e,["sessionResumptionUpdate"],y),e}function bS(n){const e={},i=f(n,["videoMetadata"]);i!=null&&p(e,["videoMetadata"],i);const a=f(n,["thought"]);a!=null&&p(e,["thought"],a);const l=f(n,["inlineData"]);l!=null&&p(e,["inlineData"],Dl(l));const r=f(n,["fileData"]);r!=null&&p(e,["fileData"],oS(r));const c=f(n,["thoughtSignature"]);c!=null&&p(e,["thoughtSignature"],c);const h=f(n,["functionCall"]);h!=null&&p(e,["functionCall"],h);const y=f(n,["codeExecutionResult"]);y!=null&&p(e,["codeExecutionResult"],y);const g=f(n,["executableCode"]);g!=null&&p(e,["executableCode"],g);const x=f(n,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const b=f(n,["text"]);return b!=null&&p(e,["text"],b),e}function wS(n){const e={},i=f(n,["handle"]);if(i!=null&&p(e,["handle"],i),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ly(n){const e={},i=f(n,["voiceConfig"]);if(i!=null&&p(e,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const a=f(n,["languageCode"]);return a!=null&&p(e,["languageCode"],a),e}function _S(n){const e={},i=f(n,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(x=>x)),p(e,["functionDeclarations"],g)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=f(n,["googleSearch"]);a!=null&&p(e,["googleSearch"],cS(a));const l=f(n,["googleSearchRetrieval"]);if(l!=null&&p(e,["googleSearchRetrieval"],l),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=f(n,["googleMaps"]);r!=null&&p(e,["googleMaps"],uS(r));const c=f(n,["urlContext"]);c!=null&&p(e,["urlContext"],c);const h=f(n,["computerUse"]);h!=null&&p(e,["computerUse"],h);const y=f(n,["codeExecution"]);return y!=null&&p(e,["codeExecution"],y),e}function SS(n){const e={},i=f(n,["functionDeclarations"]);if(i!=null){let b=i;Array.isArray(b)&&(b=b.map(w=>lS(w))),p(e,["functionDeclarations"],b)}const a=f(n,["retrieval"]);a!=null&&p(e,["retrieval"],a);const l=f(n,["googleSearch"]);l!=null&&p(e,["googleSearch"],l);const r=f(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const c=f(n,["enterpriseWebSearch"]);c!=null&&p(e,["enterpriseWebSearch"],c);const h=f(n,["googleMaps"]);h!=null&&p(e,["googleMaps"],h);const y=f(n,["urlContext"]);y!=null&&p(e,["urlContext"],y);const g=f(n,["computerUse"]);g!=null&&p(e,["computerUse"],g);const x=f(n,["codeExecution"]);return x!=null&&p(e,["codeExecution"],x),e}function TS(n){const e={},i=f(n,["promptTokenCount"]);i!=null&&p(e,["promptTokenCount"],i);const a=f(n,["cachedContentTokenCount"]);a!=null&&p(e,["cachedContentTokenCount"],a);const l=f(n,["candidatesTokenCount"]);l!=null&&p(e,["responseTokenCount"],l);const r=f(n,["toolUsePromptTokenCount"]);r!=null&&p(e,["toolUsePromptTokenCount"],r);const c=f(n,["thoughtsTokenCount"]);c!=null&&p(e,["thoughtsTokenCount"],c);const h=f(n,["totalTokenCount"]);h!=null&&p(e,["totalTokenCount"],h);const y=f(n,["promptTokensDetails"]);if(y!=null){let S=y;Array.isArray(S)&&(S=S.map(E=>E)),p(e,["promptTokensDetails"],S)}const g=f(n,["cacheTokensDetails"]);if(g!=null){let S=g;Array.isArray(S)&&(S=S.map(E=>E)),p(e,["cacheTokensDetails"],S)}const x=f(n,["candidatesTokensDetails"]);if(x!=null){let S=x;Array.isArray(S)&&(S=S.map(E=>E)),p(e,["responseTokensDetails"],S)}const b=f(n,["toolUsePromptTokensDetails"]);if(b!=null){let S=b;Array.isArray(S)&&(S=S.map(E=>E)),p(e,["toolUsePromptTokensDetails"],S)}const w=f(n,["trafficType"]);return w!=null&&p(e,["trafficType"],w),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ES(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["data"]);i!=null&&p(e,["data"],i);const a=f(n,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}function CS(n){const e={},i=f(n,["content"]);i!=null&&p(e,["content"],i);const a=f(n,["citationMetadata"]);a!=null&&p(e,["citationMetadata"],NS(a));const l=f(n,["tokenCount"]);l!=null&&p(e,["tokenCount"],l);const r=f(n,["finishReason"]);r!=null&&p(e,["finishReason"],r);const c=f(n,["urlContextMetadata"]);c!=null&&p(e,["urlContextMetadata"],c);const h=f(n,["avgLogprobs"]);h!=null&&p(e,["avgLogprobs"],h);const y=f(n,["groundingMetadata"]);y!=null&&p(e,["groundingMetadata"],y);const g=f(n,["index"]);g!=null&&p(e,["index"],g);const x=f(n,["logprobsResult"]);x!=null&&p(e,["logprobsResult"],x);const b=f(n,["safetyRatings"]);if(b!=null){let w=b;Array.isArray(w)&&(w=w.map(S=>S)),p(e,["safetyRatings"],w)}return e}function NS(n){const e={},i=f(n,["citationSources"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["citations"],a)}return e}function AS(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["contents"]);if(l!=null){let r=Kt(l);Array.isArray(r)&&(r=r.map(c=>c)),p(i,["contents"],r)}return i}function RS(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["tokensInfo"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(r=>r)),p(e,["tokensInfo"],l)}return e}function MS(n){const e={},i=f(n,["values"]);i!=null&&p(e,["values"],i);const a=f(n,["statistics"]);return a!=null&&p(e,["statistics"],IS(a)),e}function IS(n){const e={},i=f(n,["truncated"]);i!=null&&p(e,["truncated"],i);const a=f(n,["token_count"]);return a!=null&&p(e,["tokenCount"],a),e}function Fl(n){const e={},i=f(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(r=>OT(r))),p(e,["parts"],l)}const a=f(n,["role"]);return a!=null&&p(e,["role"],a),e}function kS(n){const e={},i=f(n,["controlType"]);i!=null&&p(e,["controlType"],i);const a=f(n,["enableControlImageComputation"]);return a!=null&&p(e,["computeControl"],a),e}function DS(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function US(n,e){const i={},a=f(n,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],ht(a));const l=f(n,["tools"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>Hy(h))),p(e,["tools"],c)}const r=f(n,["generationConfig"]);return e!==void 0&&r!=null&&p(e,["generationConfig"],ST(r)),i}function jS(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["contents"]);if(l!=null){let c=Kt(l);Array.isArray(c)&&(c=c.map(h=>Fl(h))),p(i,["contents"],c)}const r=f(e,["config"]);return r!=null&&DS(r),i}function OS(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["contents"]);if(l!=null){let c=Kt(l);Array.isArray(c)&&(c=c.map(h=>h)),p(i,["contents"],c)}const r=f(e,["config"]);return r!=null&&US(r,i),i}function LS(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["totalTokens"]);a!=null&&p(e,["totalTokens"],a);const l=f(n,["cachedContentTokenCount"]);return l!=null&&p(e,["cachedContentTokenCount"],l),e}function PS(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["totalTokens"]);return a!=null&&p(e,["totalTokens"],a),e}function qS(n,e){const i={},a=f(e,["model"]);return a!=null&&p(i,["_url","name"],be(n,a)),i}function BS(n,e){const i={},a=f(e,["model"]);return a!=null&&p(i,["_url","name"],be(n,a)),i}function VS(n){const e={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(e,["sdkHttpResponse"],i),e}function HS(n){const e={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(e,["sdkHttpResponse"],i),e}function GS(n,e){const i={},a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const l=f(n,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&p(e,["parameters","aspectRatio"],c);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&p(e,["parameters","guidanceScale"],h);const y=f(n,["seed"]);e!==void 0&&y!=null&&p(e,["parameters","seed"],y);const g=f(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&p(e,["parameters","safetySetting"],g);const x=f(n,["personGeneration"]);e!==void 0&&x!=null&&p(e,["parameters","personGeneration"],x);const b=f(n,["includeSafetyAttributes"]);e!==void 0&&b!=null&&p(e,["parameters","includeSafetyAttributes"],b);const w=f(n,["includeRaiReason"]);e!==void 0&&w!=null&&p(e,["parameters","includeRaiReason"],w);const S=f(n,["language"]);e!==void 0&&S!=null&&p(e,["parameters","language"],S);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const C=f(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&p(e,["parameters","outputOptions","compressionQuality"],C);const N=f(n,["addWatermark"]);e!==void 0&&N!=null&&p(e,["parameters","addWatermark"],N);const M=f(n,["labels"]);e!==void 0&&M!=null&&p(e,["labels"],M);const D=f(n,["editMode"]);e!==void 0&&D!=null&&p(e,["parameters","editMode"],D);const k=f(n,["baseSteps"]);return e!==void 0&&k!=null&&p(e,["parameters","editConfig","baseSteps"],k),i}function zS(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["prompt"]);l!=null&&p(i,["instances[0]","prompt"],l);const r=f(e,["referenceImages"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(y=>HT(y))),p(i,["instances[0]","referenceImages"],h)}const c=f(e,["config"]);return c!=null&&GS(c,i),i}function FS(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["predictions"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(r=>$l(r))),p(e,["generatedImages"],l)}return e}function $S(n,e){const i={},a=f(n,["taskType"]);e!==void 0&&a!=null&&p(e,["requests[]","taskType"],a);const l=f(n,["title"]);e!==void 0&&l!=null&&p(e,["requests[]","title"],l);const r=f(n,["outputDimensionality"]);if(e!==void 0&&r!=null&&p(e,["requests[]","outputDimensionality"],r),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function JS(n,e){const i={},a=f(n,["taskType"]);e!==void 0&&a!=null&&p(e,["instances[]","task_type"],a);const l=f(n,["title"]);e!==void 0&&l!=null&&p(e,["instances[]","title"],l);const r=f(n,["outputDimensionality"]);e!==void 0&&r!=null&&p(e,["parameters","outputDimensionality"],r);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&p(e,["instances[]","mimeType"],c);const h=f(n,["autoTruncate"]);return e!==void 0&&h!=null&&p(e,["parameters","autoTruncate"],h),i}function YS(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["contents"]);if(l!=null){let h=Xc(n,l);Array.isArray(h)&&(h=h.map(y=>y)),p(i,["requests[]","content"],h)}const r=f(e,["config"]);r!=null&&$S(r,i);const c=f(e,["model"]);return c!==void 0&&p(i,["requests[]","model"],be(n,c)),i}function KS(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["contents"]);if(l!=null){let c=Xc(n,l);Array.isArray(c)&&(c=c.map(h=>h)),p(i,["instances[]","content"],c)}const r=f(e,["config"]);return r!=null&&JS(r,i),i}function QS(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["embeddings"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>c)),p(e,["embeddings"],r)}const l=f(n,["metadata"]);return l!=null&&p(e,["metadata"],l),e}function XS(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["predictions[]","embeddings"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>MS(c))),p(e,["embeddings"],r)}const l=f(n,["metadata"]);return l!=null&&p(e,["metadata"],l),e}function WS(n){const e={},i=f(n,["endpoint"]);i!=null&&p(e,["name"],i);const a=f(n,["deployedModelId"]);return a!=null&&p(e,["deployedModelId"],a),e}function ZS(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["fileUri"]);i!=null&&p(e,["fileUri"],i);const a=f(n,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}function eT(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(n,["description"]);i!=null&&p(e,["description"],i);const a=f(n,["name"]);a!=null&&p(e,["name"],a);const l=f(n,["parameters"]);l!=null&&p(e,["parameters"],l);const r=f(n,["parametersJsonSchema"]);r!=null&&p(e,["parametersJsonSchema"],r);const c=f(n,["response"]);c!=null&&p(e,["response"],c);const h=f(n,["responseJsonSchema"]);return h!=null&&p(e,["responseJsonSchema"],h),e}function tT(n,e,i){const a={},l=f(e,["systemInstruction"]);i!==void 0&&l!=null&&p(i,["systemInstruction"],Fl(ht(l)));const r=f(e,["temperature"]);r!=null&&p(a,["temperature"],r);const c=f(e,["topP"]);c!=null&&p(a,["topP"],c);const h=f(e,["topK"]);h!=null&&p(a,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&p(a,["candidateCount"],y);const g=f(e,["maxOutputTokens"]);g!=null&&p(a,["maxOutputTokens"],g);const x=f(e,["stopSequences"]);x!=null&&p(a,["stopSequences"],x);const b=f(e,["responseLogprobs"]);b!=null&&p(a,["responseLogprobs"],b);const w=f(e,["logprobs"]);w!=null&&p(a,["logprobs"],w);const S=f(e,["presencePenalty"]);S!=null&&p(a,["presencePenalty"],S);const E=f(e,["frequencyPenalty"]);E!=null&&p(a,["frequencyPenalty"],E);const C=f(e,["seed"]);C!=null&&p(a,["seed"],C);const N=f(e,["responseMimeType"]);N!=null&&p(a,["responseMimeType"],N);const M=f(e,["responseSchema"]);M!=null&&p(a,["responseSchema"],Wc(M));const D=f(e,["responseJsonSchema"]);if(D!=null&&p(a,["responseJsonSchema"],D),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=f(e,["safetySettings"]);if(i!==void 0&&k!=null){let ce=k;Array.isArray(ce)&&(ce=ce.map(Ze=>GT(Ze))),p(i,["safetySettings"],ce)}const q=f(e,["tools"]);if(i!==void 0&&q!=null){let ce=Hs(q);Array.isArray(ce)&&(ce=ce.map(Ze=>KT(Vs(Ze)))),p(i,["tools"],ce)}const z=f(e,["toolConfig"]);if(i!==void 0&&z!=null&&p(i,["toolConfig"],z),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=f(e,["cachedContent"]);i!==void 0&&L!=null&&p(i,["cachedContent"],Mn(n,L));const $=f(e,["responseModalities"]);$!=null&&p(a,["responseModalities"],$);const ie=f(e,["mediaResolution"]);ie!=null&&p(a,["mediaResolution"],ie);const X=f(e,["speechConfig"]);if(X!=null&&p(a,["speechConfig"],Zc(X)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const he=f(e,["thinkingConfig"]);he!=null&&p(a,["thinkingConfig"],he);const qe=f(e,["imageConfig"]);return qe!=null&&p(a,["imageConfig"],qe),a}function nT(n,e,i){const a={},l=f(e,["systemInstruction"]);i!==void 0&&l!=null&&p(i,["systemInstruction"],ht(l));const r=f(e,["temperature"]);r!=null&&p(a,["temperature"],r);const c=f(e,["topP"]);c!=null&&p(a,["topP"],c);const h=f(e,["topK"]);h!=null&&p(a,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&p(a,["candidateCount"],y);const g=f(e,["maxOutputTokens"]);g!=null&&p(a,["maxOutputTokens"],g);const x=f(e,["stopSequences"]);x!=null&&p(a,["stopSequences"],x);const b=f(e,["responseLogprobs"]);b!=null&&p(a,["responseLogprobs"],b);const w=f(e,["logprobs"]);w!=null&&p(a,["logprobs"],w);const S=f(e,["presencePenalty"]);S!=null&&p(a,["presencePenalty"],S);const E=f(e,["frequencyPenalty"]);E!=null&&p(a,["frequencyPenalty"],E);const C=f(e,["seed"]);C!=null&&p(a,["seed"],C);const N=f(e,["responseMimeType"]);N!=null&&p(a,["responseMimeType"],N);const M=f(e,["responseSchema"]);M!=null&&p(a,["responseSchema"],Wc(M));const D=f(e,["responseJsonSchema"]);D!=null&&p(a,["responseJsonSchema"],D);const k=f(e,["routingConfig"]);k!=null&&p(a,["routingConfig"],k);const q=f(e,["modelSelectionConfig"]);q!=null&&p(a,["modelConfig"],q);const z=f(e,["safetySettings"]);if(i!==void 0&&z!=null){let B=z;Array.isArray(B)&&(B=B.map(J=>J)),p(i,["safetySettings"],B)}const L=f(e,["tools"]);if(i!==void 0&&L!=null){let B=Hs(L);Array.isArray(B)&&(B=B.map(J=>Hy(Vs(J)))),p(i,["tools"],B)}const $=f(e,["toolConfig"]);i!==void 0&&$!=null&&p(i,["toolConfig"],$);const ie=f(e,["labels"]);i!==void 0&&ie!=null&&p(i,["labels"],ie);const X=f(e,["cachedContent"]);i!==void 0&&X!=null&&p(i,["cachedContent"],Mn(n,X));const he=f(e,["responseModalities"]);he!=null&&p(a,["responseModalities"],he);const qe=f(e,["mediaResolution"]);qe!=null&&p(a,["mediaResolution"],qe);const ce=f(e,["speechConfig"]);ce!=null&&p(a,["speechConfig"],Vy(Zc(ce)));const Ze=f(e,["audioTimestamp"]);Ze!=null&&p(a,["audioTimestamp"],Ze);const Qt=f(e,["thinkingConfig"]);Qt!=null&&p(a,["thinkingConfig"],Qt);const dt=f(e,["imageConfig"]);return dt!=null&&p(a,["imageConfig"],dt),a}function Mg(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["contents"]);if(l!=null){let c=Kt(l);Array.isArray(c)&&(c=c.map(h=>Fl(h))),p(i,["contents"],c)}const r=f(e,["config"]);return r!=null&&p(i,["generationConfig"],tT(n,r,i)),i}function Ig(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["contents"]);if(l!=null){let c=Kt(l);Array.isArray(c)&&(c=c.map(h=>h)),p(i,["contents"],c)}const r=f(e,["config"]);return r!=null&&p(i,["generationConfig"],nT(n,r,i)),i}function kg(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["candidates"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(g=>CS(g))),p(e,["candidates"],y)}const l=f(n,["modelVersion"]);l!=null&&p(e,["modelVersion"],l);const r=f(n,["promptFeedback"]);r!=null&&p(e,["promptFeedback"],r);const c=f(n,["responseId"]);c!=null&&p(e,["responseId"],c);const h=f(n,["usageMetadata"]);return h!=null&&p(e,["usageMetadata"],h),e}function Dg(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["candidates"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(x=>x)),p(e,["candidates"],g)}const l=f(n,["createTime"]);l!=null&&p(e,["createTime"],l);const r=f(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const c=f(n,["promptFeedback"]);c!=null&&p(e,["promptFeedback"],c);const h=f(n,["responseId"]);h!=null&&p(e,["responseId"],h);const y=f(n,["usageMetadata"]);return y!=null&&p(e,["usageMetadata"],y),e}function iT(n,e){const i={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const r=f(n,["guidanceScale"]);if(e!==void 0&&r!=null&&p(e,["parameters","guidanceScale"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const y=f(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&p(e,["parameters","includeSafetyAttributes"],y);const g=f(n,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const x=f(n,["language"]);e!==void 0&&x!=null&&p(e,["parameters","language"],x);const b=f(n,["outputMimeType"]);e!==void 0&&b!=null&&p(e,["parameters","outputOptions","mimeType"],b);const w=f(n,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&p(e,["parameters","outputOptions","compressionQuality"],w),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=f(n,["imageSize"]);if(e!==void 0&&S!=null&&p(e,["parameters","sampleImageSize"],S),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function sT(n,e){const i={},a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const l=f(n,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&p(e,["parameters","aspectRatio"],c);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&p(e,["parameters","guidanceScale"],h);const y=f(n,["seed"]);e!==void 0&&y!=null&&p(e,["parameters","seed"],y);const g=f(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&p(e,["parameters","safetySetting"],g);const x=f(n,["personGeneration"]);e!==void 0&&x!=null&&p(e,["parameters","personGeneration"],x);const b=f(n,["includeSafetyAttributes"]);e!==void 0&&b!=null&&p(e,["parameters","includeSafetyAttributes"],b);const w=f(n,["includeRaiReason"]);e!==void 0&&w!=null&&p(e,["parameters","includeRaiReason"],w);const S=f(n,["language"]);e!==void 0&&S!=null&&p(e,["parameters","language"],S);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const C=f(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&p(e,["parameters","outputOptions","compressionQuality"],C);const N=f(n,["addWatermark"]);e!==void 0&&N!=null&&p(e,["parameters","addWatermark"],N);const M=f(n,["labels"]);e!==void 0&&M!=null&&p(e,["labels"],M);const D=f(n,["imageSize"]);e!==void 0&&D!=null&&p(e,["parameters","sampleImageSize"],D);const k=f(n,["enhancePrompt"]);return e!==void 0&&k!=null&&p(e,["parameters","enhancePrompt"],k),i}function aT(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["prompt"]);l!=null&&p(i,["instances[0]","prompt"],l);const r=f(e,["config"]);return r!=null&&iT(r,i),i}function oT(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["prompt"]);l!=null&&p(i,["instances[0]","prompt"],l);const r=f(e,["config"]);return r!=null&&sT(r,i),i}function lT(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>xT(c))),p(e,["generatedImages"],r)}const l=f(n,["positivePromptSafetyAttributes"]);return l!=null&&p(e,["positivePromptSafetyAttributes"],qy(l)),e}function rT(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>$l(c))),p(e,["generatedImages"],r)}const l=f(n,["positivePromptSafetyAttributes"]);return l!=null&&p(e,["positivePromptSafetyAttributes"],By(l)),e}function uT(n,e){const i={},a=f(n,["numberOfVideos"]);if(e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=f(n,["durationSeconds"]);if(e!==void 0&&l!=null&&p(e,["parameters","durationSeconds"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=f(n,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);const c=f(n,["resolution"]);e!==void 0&&c!=null&&p(e,["parameters","resolution"],c);const h=f(n,["personGeneration"]);if(e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(n,["negativePrompt"]);e!==void 0&&y!=null&&p(e,["parameters","negativePrompt"],y);const g=f(n,["enhancePrompt"]);if(e!==void 0&&g!=null&&p(e,["parameters","enhancePrompt"],g),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const x=f(n,["lastFrame"]);e!==void 0&&x!=null&&p(e,["instances[0]","lastFrame"],Jl(x));const b=f(n,["referenceImages"]);if(e!==void 0&&b!=null){let w=b;Array.isArray(w)&&(w=w.map(S=>rE(S))),p(e,["instances[0]","referenceImages"],w)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function cT(n,e){const i={},a=f(n,["numberOfVideos"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&p(e,["parameters","storageUri"],l);const r=f(n,["fps"]);e!==void 0&&r!=null&&p(e,["parameters","fps"],r);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&p(e,["parameters","durationSeconds"],c);const h=f(n,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const y=f(n,["aspectRatio"]);e!==void 0&&y!=null&&p(e,["parameters","aspectRatio"],y);const g=f(n,["resolution"]);e!==void 0&&g!=null&&p(e,["parameters","resolution"],g);const x=f(n,["personGeneration"]);e!==void 0&&x!=null&&p(e,["parameters","personGeneration"],x);const b=f(n,["pubsubTopic"]);e!==void 0&&b!=null&&p(e,["parameters","pubsubTopic"],b);const w=f(n,["negativePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","negativePrompt"],w);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","enhancePrompt"],S);const E=f(n,["generateAudio"]);e!==void 0&&E!=null&&p(e,["parameters","generateAudio"],E);const C=f(n,["lastFrame"]);e!==void 0&&C!=null&&p(e,["instances[0]","lastFrame"],an(C));const N=f(n,["referenceImages"]);if(e!==void 0&&N!=null){let k=N;Array.isArray(k)&&(k=k.map(q=>uE(q))),p(e,["instances[0]","referenceImages"],k)}const M=f(n,["mask"]);e!==void 0&&M!=null&&p(e,["instances[0]","mask"],lE(M));const D=f(n,["compressionQuality"]);return e!==void 0&&D!=null&&p(e,["parameters","compressionQuality"],D),i}function dT(n){const e={},i=f(n,["name"]);i!=null&&p(e,["name"],i);const a=f(n,["metadata"]);a!=null&&p(e,["metadata"],a);const l=f(n,["done"]);l!=null&&p(e,["done"],l);const r=f(n,["error"]);r!=null&&p(e,["error"],r);const c=f(n,["response","generateVideoResponse"]);return c!=null&&p(e,["response"],pT(c)),e}function fT(n){const e={},i=f(n,["name"]);i!=null&&p(e,["name"],i);const a=f(n,["metadata"]);a!=null&&p(e,["metadata"],a);const l=f(n,["done"]);l!=null&&p(e,["done"],l);const r=f(n,["error"]);r!=null&&p(e,["error"],r);const c=f(n,["response"]);return c!=null&&p(e,["response"],gT(c)),e}function hT(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["prompt"]);l!=null&&p(i,["instances[0]","prompt"],l);const r=f(e,["image"]);r!=null&&p(i,["instances[0]","image"],Jl(r));const c=f(e,["video"]);c!=null&&p(i,["instances[0]","video"],Gy(c));const h=f(e,["source"]);h!=null&&yT(h,i);const y=f(e,["config"]);return y!=null&&uT(y,i),i}function mT(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["prompt"]);l!=null&&p(i,["instances[0]","prompt"],l);const r=f(e,["image"]);r!=null&&p(i,["instances[0]","image"],an(r));const c=f(e,["video"]);c!=null&&p(i,["instances[0]","video"],zy(c));const h=f(e,["source"]);h!=null&&vT(h,i);const y=f(e,["config"]);return y!=null&&cT(y,i),i}function pT(n){const e={},i=f(n,["generatedSamples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(c=>wT(c))),p(e,["generatedVideos"],r)}const a=f(n,["raiMediaFilteredCount"]);a!=null&&p(e,["raiMediaFilteredCount"],a);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&p(e,["raiMediaFilteredReasons"],l),e}function gT(n){const e={},i=f(n,["videos"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(c=>_T(c))),p(e,["generatedVideos"],r)}const a=f(n,["raiMediaFilteredCount"]);a!=null&&p(e,["raiMediaFilteredCount"],a);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&p(e,["raiMediaFilteredReasons"],l),e}function yT(n,e){const i={},a=f(n,["prompt"]);e!==void 0&&a!=null&&p(e,["instances[0]","prompt"],a);const l=f(n,["image"]);e!==void 0&&l!=null&&p(e,["instances[0]","image"],Jl(l));const r=f(n,["video"]);return e!==void 0&&r!=null&&p(e,["instances[0]","video"],Gy(r)),i}function vT(n,e){const i={},a=f(n,["prompt"]);e!==void 0&&a!=null&&p(e,["instances[0]","prompt"],a);const l=f(n,["image"]);e!==void 0&&l!=null&&p(e,["instances[0]","image"],an(l));const r=f(n,["video"]);return e!==void 0&&r!=null&&p(e,["instances[0]","video"],zy(r)),i}function xT(n){const e={},i=f(n,["_self"]);i!=null&&p(e,["image"],AT(i));const a=f(n,["raiFilteredReason"]);a!=null&&p(e,["raiFilteredReason"],a);const l=f(n,["_self"]);return l!=null&&p(e,["safetyAttributes"],qy(l)),e}function $l(n){const e={},i=f(n,["_self"]);i!=null&&p(e,["image"],Py(i));const a=f(n,["raiFilteredReason"]);a!=null&&p(e,["raiFilteredReason"],a);const l=f(n,["_self"]);l!=null&&p(e,["safetyAttributes"],By(l));const r=f(n,["prompt"]);return r!=null&&p(e,["enhancedPrompt"],r),e}function bT(n){const e={},i=f(n,["_self"]);i!=null&&p(e,["mask"],Py(i));const a=f(n,["labels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(r=>r)),p(e,["labels"],l)}return e}function wT(n){const e={},i=f(n,["video"]);return i!=null&&p(e,["video"],aE(i)),e}function _T(n){const e={},i=f(n,["_self"]);return i!=null&&p(e,["video"],oE(i)),e}function ST(n){const e={},i=f(n,["modelSelectionConfig"]);i!=null&&p(e,["modelConfig"],i);const a=f(n,["audioTimestamp"]);a!=null&&p(e,["audioTimestamp"],a);const l=f(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const r=f(n,["enableAffectiveDialog"]);r!=null&&p(e,["enableAffectiveDialog"],r);const c=f(n,["frequencyPenalty"]);c!=null&&p(e,["frequencyPenalty"],c);const h=f(n,["logprobs"]);h!=null&&p(e,["logprobs"],h);const y=f(n,["maxOutputTokens"]);y!=null&&p(e,["maxOutputTokens"],y);const g=f(n,["mediaResolution"]);g!=null&&p(e,["mediaResolution"],g);const x=f(n,["presencePenalty"]);x!=null&&p(e,["presencePenalty"],x);const b=f(n,["responseJsonSchema"]);b!=null&&p(e,["responseJsonSchema"],b);const w=f(n,["responseLogprobs"]);w!=null&&p(e,["responseLogprobs"],w);const S=f(n,["responseMimeType"]);S!=null&&p(e,["responseMimeType"],S);const E=f(n,["responseModalities"]);E!=null&&p(e,["responseModalities"],E);const C=f(n,["responseSchema"]);C!=null&&p(e,["responseSchema"],C);const N=f(n,["routingConfig"]);N!=null&&p(e,["routingConfig"],N);const M=f(n,["seed"]);M!=null&&p(e,["seed"],M);const D=f(n,["speechConfig"]);D!=null&&p(e,["speechConfig"],Vy(D));const k=f(n,["stopSequences"]);k!=null&&p(e,["stopSequences"],k);const q=f(n,["temperature"]);q!=null&&p(e,["temperature"],q);const z=f(n,["thinkingConfig"]);z!=null&&p(e,["thinkingConfig"],z);const L=f(n,["topK"]);L!=null&&p(e,["topK"],L);const $=f(n,["topP"]);if($!=null&&p(e,["topP"],$),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function TT(n,e){const i={},a=f(e,["model"]);return a!=null&&p(i,["_url","name"],be(n,a)),i}function ET(n,e){const i={},a=f(e,["model"]);return a!=null&&p(i,["_url","name"],be(n,a)),i}function CT(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(n,["enableWidget"]);return i!=null&&p(e,["enableWidget"],i),e}function NT(n){const e={},i=f(n,["timeRangeFilter"]);if(i!=null&&p(e,["timeRangeFilter"],i),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function AT(n){const e={},i=f(n,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],ui(i));const a=f(n,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}function Py(n){const e={},i=f(n,["gcsUri"]);i!=null&&p(e,["gcsUri"],i);const a=f(n,["bytesBase64Encoded"]);a!=null&&p(e,["imageBytes"],ui(a));const l=f(n,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function Jl(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(n,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],ui(i));const a=f(n,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}function an(n){const e={},i=f(n,["gcsUri"]);i!=null&&p(e,["gcsUri"],i);const a=f(n,["imageBytes"]);a!=null&&p(e,["bytesBase64Encoded"],ui(a));const l=f(n,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function RT(n,e,i){const a={},l=f(e,["pageSize"]);i!==void 0&&l!=null&&p(i,["_query","pageSize"],l);const r=f(e,["pageToken"]);i!==void 0&&r!=null&&p(i,["_query","pageToken"],r);const c=f(e,["filter"]);i!==void 0&&c!=null&&p(i,["_query","filter"],c);const h=f(e,["queryBase"]);return i!==void 0&&h!=null&&p(i,["_url","models_url"],My(n,h)),a}function MT(n,e,i){const a={},l=f(e,["pageSize"]);i!==void 0&&l!=null&&p(i,["_query","pageSize"],l);const r=f(e,["pageToken"]);i!==void 0&&r!=null&&p(i,["_query","pageToken"],r);const c=f(e,["filter"]);i!==void 0&&c!=null&&p(i,["_query","filter"],c);const h=f(e,["queryBase"]);return i!==void 0&&h!=null&&p(i,["_url","models_url"],My(n,h)),a}function IT(n,e){const i={},a=f(e,["config"]);return a!=null&&RT(n,a,i),i}function kT(n,e){const i={},a=f(e,["config"]);return a!=null&&MT(n,a,i),i}function DT(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["nextPageToken"]);a!=null&&p(e,["nextPageToken"],a);const l=f(n,["_self"]);if(l!=null){let r=Iy(l);Array.isArray(r)&&(r=r.map(c=>kc(c))),p(e,["models"],r)}return e}function UT(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["nextPageToken"]);a!=null&&p(e,["nextPageToken"],a);const l=f(n,["_self"]);if(l!=null){let r=Iy(l);Array.isArray(r)&&(r=r.map(c=>Dc(c))),p(e,["models"],r)}return e}function jT(n){const e={},i=f(n,["maskMode"]);i!=null&&p(e,["maskMode"],i);const a=f(n,["segmentationClasses"]);a!=null&&p(e,["maskClasses"],a);const l=f(n,["maskDilation"]);return l!=null&&p(e,["dilation"],l),e}function kc(n){const e={},i=f(n,["name"]);i!=null&&p(e,["name"],i);const a=f(n,["displayName"]);a!=null&&p(e,["displayName"],a);const l=f(n,["description"]);l!=null&&p(e,["description"],l);const r=f(n,["version"]);r!=null&&p(e,["version"],r);const c=f(n,["_self"]);c!=null&&p(e,["tunedModelInfo"],QT(c));const h=f(n,["inputTokenLimit"]);h!=null&&p(e,["inputTokenLimit"],h);const y=f(n,["outputTokenLimit"]);y!=null&&p(e,["outputTokenLimit"],y);const g=f(n,["supportedGenerationMethods"]);return g!=null&&p(e,["supportedActions"],g),e}function Dc(n){const e={},i=f(n,["name"]);i!=null&&p(e,["name"],i);const a=f(n,["displayName"]);a!=null&&p(e,["displayName"],a);const l=f(n,["description"]);l!=null&&p(e,["description"],l);const r=f(n,["versionId"]);r!=null&&p(e,["version"],r);const c=f(n,["deployedModels"]);if(c!=null){let b=c;Array.isArray(b)&&(b=b.map(w=>WS(w))),p(e,["endpoints"],b)}const h=f(n,["labels"]);h!=null&&p(e,["labels"],h);const y=f(n,["_self"]);y!=null&&p(e,["tunedModelInfo"],XT(y));const g=f(n,["defaultCheckpointId"]);g!=null&&p(e,["defaultCheckpointId"],g);const x=f(n,["checkpoints"]);if(x!=null){let b=x;Array.isArray(b)&&(b=b.map(w=>w)),p(e,["checkpoints"],b)}return e}function OT(n){const e={},i=f(n,["videoMetadata"]);i!=null&&p(e,["videoMetadata"],i);const a=f(n,["thought"]);a!=null&&p(e,["thought"],a);const l=f(n,["inlineData"]);l!=null&&p(e,["inlineData"],ES(l));const r=f(n,["fileData"]);r!=null&&p(e,["fileData"],ZS(r));const c=f(n,["thoughtSignature"]);c!=null&&p(e,["thoughtSignature"],c);const h=f(n,["functionCall"]);h!=null&&p(e,["functionCall"],h);const y=f(n,["codeExecutionResult"]);y!=null&&p(e,["codeExecutionResult"],y);const g=f(n,["executableCode"]);g!=null&&p(e,["executableCode"],g);const x=f(n,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const b=f(n,["text"]);return b!=null&&p(e,["text"],b),e}function LT(n){const e={},i=f(n,["productImage"]);return i!=null&&p(e,["image"],an(i)),e}function PT(n,e){const i={},a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const l=f(n,["baseSteps"]);e!==void 0&&l!=null&&p(e,["parameters","editConfig","baseSteps"],l);const r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const c=f(n,["seed"]);e!==void 0&&c!=null&&p(e,["parameters","seed"],c);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const y=f(n,["personGeneration"]);e!==void 0&&y!=null&&p(e,["parameters","personGeneration"],y);const g=f(n,["addWatermark"]);e!==void 0&&g!=null&&p(e,["parameters","addWatermark"],g);const x=f(n,["outputMimeType"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","mimeType"],x);const b=f(n,["outputCompressionQuality"]);e!==void 0&&b!=null&&p(e,["parameters","outputOptions","compressionQuality"],b);const w=f(n,["enhancePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w);const S=f(n,["labels"]);return e!==void 0&&S!=null&&p(e,["labels"],S),i}function qT(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["source"]);l!=null&&VT(l,i);const r=f(e,["config"]);return r!=null&&PT(r,i),i}function BT(n){const e={},i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>$l(l))),p(e,["generatedImages"],a)}return e}function VT(n,e){const i={},a=f(n,["prompt"]);e!==void 0&&a!=null&&p(e,["instances[0]","prompt"],a);const l=f(n,["personImage"]);e!==void 0&&l!=null&&p(e,["instances[0]","personImage","image"],an(l));const r=f(n,["productImages"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>LT(h))),p(e,["instances[0]","productImages"],c)}return i}function HT(n){const e={},i=f(n,["referenceImage"]);i!=null&&p(e,["referenceImage"],an(i));const a=f(n,["referenceId"]);a!=null&&p(e,["referenceId"],a);const l=f(n,["referenceType"]);l!=null&&p(e,["referenceType"],l);const r=f(n,["maskImageConfig"]);r!=null&&p(e,["maskImageConfig"],jT(r));const c=f(n,["controlImageConfig"]);c!=null&&p(e,["controlImageConfig"],kS(c));const h=f(n,["styleImageConfig"]);h!=null&&p(e,["styleImageConfig"],h);const y=f(n,["subjectImageConfig"]);return y!=null&&p(e,["subjectImageConfig"],y),e}function qy(n){const e={},i=f(n,["safetyAttributes","categories"]);i!=null&&p(e,["categories"],i);const a=f(n,["safetyAttributes","scores"]);a!=null&&p(e,["scores"],a);const l=f(n,["contentType"]);return l!=null&&p(e,["contentType"],l),e}function By(n){const e={},i=f(n,["safetyAttributes","categories"]);i!=null&&p(e,["categories"],i);const a=f(n,["safetyAttributes","scores"]);a!=null&&p(e,["scores"],a);const l=f(n,["contentType"]);return l!=null&&p(e,["contentType"],l),e}function GT(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["category"]);i!=null&&p(e,["category"],i);const a=f(n,["threshold"]);return a!=null&&p(e,["threshold"],a),e}function zT(n){const e={},i=f(n,["image"]);return i!=null&&p(e,["image"],an(i)),e}function FT(n,e){const i={},a=f(n,["mode"]);e!==void 0&&a!=null&&p(e,["parameters","mode"],a);const l=f(n,["maxPredictions"]);e!==void 0&&l!=null&&p(e,["parameters","maxPredictions"],l);const r=f(n,["confidenceThreshold"]);e!==void 0&&r!=null&&p(e,["parameters","confidenceThreshold"],r);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&p(e,["parameters","maskDilation"],c);const h=f(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&p(e,["parameters","binaryColorThreshold"],h);const y=f(n,["labels"]);return e!==void 0&&y!=null&&p(e,["labels"],y),i}function $T(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["source"]);l!=null&&YT(l,i);const r=f(e,["config"]);return r!=null&&FT(r,i),i}function JT(n){const e={},i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>bT(l))),p(e,["generatedMasks"],a)}return e}function YT(n,e){const i={},a=f(n,["prompt"]);e!==void 0&&a!=null&&p(e,["instances[0]","prompt"],a);const l=f(n,["image"]);e!==void 0&&l!=null&&p(e,["instances[0]","image"],an(l));const r=f(n,["scribbleImage"]);return e!==void 0&&r!=null&&p(e,["instances[0]","scribble"],zT(r)),i}function Vy(n){const e={},i=f(n,["voiceConfig"]);if(i!=null&&p(e,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const a=f(n,["languageCode"]);return a!=null&&p(e,["languageCode"],a),e}function KT(n){const e={},i=f(n,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(x=>x)),p(e,["functionDeclarations"],g)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=f(n,["googleSearch"]);a!=null&&p(e,["googleSearch"],NT(a));const l=f(n,["googleSearchRetrieval"]);if(l!=null&&p(e,["googleSearchRetrieval"],l),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=f(n,["googleMaps"]);r!=null&&p(e,["googleMaps"],CT(r));const c=f(n,["urlContext"]);c!=null&&p(e,["urlContext"],c);const h=f(n,["computerUse"]);h!=null&&p(e,["computerUse"],h);const y=f(n,["codeExecution"]);return y!=null&&p(e,["codeExecution"],y),e}function Hy(n){const e={},i=f(n,["functionDeclarations"]);if(i!=null){let b=i;Array.isArray(b)&&(b=b.map(w=>eT(w))),p(e,["functionDeclarations"],b)}const a=f(n,["retrieval"]);a!=null&&p(e,["retrieval"],a);const l=f(n,["googleSearch"]);l!=null&&p(e,["googleSearch"],l);const r=f(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const c=f(n,["enterpriseWebSearch"]);c!=null&&p(e,["enterpriseWebSearch"],c);const h=f(n,["googleMaps"]);h!=null&&p(e,["googleMaps"],h);const y=f(n,["urlContext"]);y!=null&&p(e,["urlContext"],y);const g=f(n,["computerUse"]);g!=null&&p(e,["computerUse"],g);const x=f(n,["codeExecution"]);return x!=null&&p(e,["codeExecution"],x),e}function QT(n){const e={},i=f(n,["baseModel"]);i!=null&&p(e,["baseModel"],i);const a=f(n,["createTime"]);a!=null&&p(e,["createTime"],a);const l=f(n,["updateTime"]);return l!=null&&p(e,["updateTime"],l),e}function XT(n){const e={},i=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&p(e,["baseModel"],i);const a=f(n,["createTime"]);a!=null&&p(e,["createTime"],a);const l=f(n,["updateTime"]);return l!=null&&p(e,["updateTime"],l),e}function WT(n,e){const i={},a=f(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const l=f(n,["description"]);e!==void 0&&l!=null&&p(e,["description"],l);const r=f(n,["defaultCheckpointId"]);return e!==void 0&&r!=null&&p(e,["defaultCheckpointId"],r),i}function ZT(n,e){const i={},a=f(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const l=f(n,["description"]);e!==void 0&&l!=null&&p(e,["description"],l);const r=f(n,["defaultCheckpointId"]);return e!==void 0&&r!=null&&p(e,["defaultCheckpointId"],r),i}function eE(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","name"],be(n,a));const l=f(e,["config"]);return l!=null&&WT(l,i),i}function tE(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["config"]);return l!=null&&ZT(l,i),i}function nE(n,e){const i={},a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const l=f(n,["includeRaiReason"]);e!==void 0&&l!=null&&p(e,["parameters","includeRaiReason"],l);const r=f(n,["outputMimeType"]);e!==void 0&&r!=null&&p(e,["parameters","outputOptions","mimeType"],r);const c=f(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&p(e,["parameters","outputOptions","compressionQuality"],c);const h=f(n,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=f(n,["imagePreservationFactor"]);e!==void 0&&y!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const g=f(n,["labels"]);e!==void 0&&g!=null&&p(e,["labels"],g);const x=f(n,["numberOfImages"]);e!==void 0&&x!=null&&p(e,["parameters","sampleCount"],x);const b=f(n,["mode"]);return e!==void 0&&b!=null&&p(e,["parameters","mode"],b),i}function iE(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["_url","model"],be(n,a));const l=f(e,["image"]);l!=null&&p(i,["instances[0]","image"],an(l));const r=f(e,["upscaleFactor"]);r!=null&&p(i,["parameters","upscaleConfig","upscaleFactor"],r);const c=f(e,["config"]);return c!=null&&nE(c,i),i}function sE(n){const e={},i=f(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const a=f(n,["predictions"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(r=>$l(r))),p(e,["generatedImages"],l)}return e}function aE(n){const e={},i=f(n,["uri"]);i!=null&&p(e,["uri"],i);const a=f(n,["encodedVideo"]);a!=null&&p(e,["videoBytes"],ui(a));const l=f(n,["encoding"]);return l!=null&&p(e,["mimeType"],l),e}function oE(n){const e={},i=f(n,["gcsUri"]);i!=null&&p(e,["uri"],i);const a=f(n,["bytesBase64Encoded"]);a!=null&&p(e,["videoBytes"],ui(a));const l=f(n,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}function lE(n){const e={},i=f(n,["image"]);i!=null&&p(e,["_self"],an(i));const a=f(n,["maskMode"]);return a!=null&&p(e,["maskMode"],a),e}function rE(n){const e={},i=f(n,["image"]);i!=null&&p(e,["image"],Jl(i));const a=f(n,["referenceType"]);return a!=null&&p(e,["referenceType"],a),e}function uE(n){const e={},i=f(n,["image"]);i!=null&&p(e,["image"],an(i));const a=f(n,["referenceType"]);return a!=null&&p(e,["referenceType"],a),e}function Gy(n){const e={},i=f(n,["uri"]);i!=null&&p(e,["uri"],i);const a=f(n,["videoBytes"]);a!=null&&p(e,["encodedVideo"],ui(a));const l=f(n,["mimeType"]);return l!=null&&p(e,["encoding"],l),e}function zy(n){const e={},i=f(n,["uri"]);i!=null&&p(e,["gcsUri"],i);const a=f(n,["videoBytes"]);a!=null&&p(e,["bytesBase64Encoded"],ui(a));const l=f(n,["mimeType"]);return l!=null&&p(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cE="Content-Type",dE="X-Server-Timeout",fE="User-Agent",Uc="x-goog-api-client",hE="1.27.0",mE=`google-genai-sdk/${hE}`,pE="v1beta1",gE="v1beta",Ug=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class yE{constructor(e){var i,a;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const l={};this.clientOptions.vertexai?(l.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:pE,l.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(l.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:gE,l.baseUrl="https://generativelanguage.googleapis.com/"),l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&a.push(e.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,a){const l=[this.getRequestUrlInternal(i)];return a&&l.push(this.getBaseResourcePath()),e!==""&&l.push(e),new URL(`${l.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,i,a);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))l.searchParams.append(c,String(h));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,i,l.toString(),e.abortSignal),this.unaryApiCall(l,r,e.httpMethod)}patchHttpOptions(e,i){const a=JSON.parse(JSON.stringify(e));for(const[l,r]of Object.entries(i))typeof r=="object"?a[l]=Object.assign(Object.assign({},a[l]),r):r!==void 0&&(a[l]=r);return a}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,i,a);(!l.searchParams.has("alt")||l.searchParams.get("alt")!=="sse")&&l.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,i,l.toString(),e.abortSignal),this.streamApiCall(l,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,a,l){if(i&&i.timeout||l){const r=new AbortController,c=r.signal;if(i.timeout&&i?.timeout>0){const h=setTimeout(()=>r.abort(),i.timeout);h&&typeof h.unref=="function"&&h.unref()}l&&l.addEventListener("abort",()=>{r.abort()}),e.signal=c}return i&&i.extraBody!==null&&vE(e,i.extraBody),e.headers=await this.getHeadersInternal(i,a),e}async unaryApiCall(e,i,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:a})).then(async l=>(await jg(l),new Rc(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}async streamApiCall(e,i,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:a})).then(async l=>(await jg(l),this.processStreamResponse(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}processStreamResponse(e){var i;return Us(this,arguments,function*(){const l=(i=e?.body)===null||i===void 0?void 0:i.getReader(),r=new TextDecoder("utf-8");if(!l)throw new Error("Response body is empty");try{let c="";for(;;){const{done:h,value:y}=yield Le(l.read());if(h){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const g=r.decode(y,{stream:!0});try{const b=JSON.parse(g);if("error"in b){const w=JSON.parse(JSON.stringify(b.error)),S=w.status,E=w.code,C=`got status: ${S}. ${JSON.stringify(b)}`;if(E>=400&&E<600)throw new zl({message:C,status:E})}}catch(b){if(b.name==="ApiError")throw b}c+=g;let x=c.match(Ug);for(;x;){const b=x[1];try{const w=new Response(b,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Le(new Rc(w)),c=c.slice(x[0].length),x=c.match(Ug)}catch(w){throw new Error(`exception parsing stream chunk ${b}. ${w}`)}}}}finally{l.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const e={},i=mE+" "+this.clientOptions.userAgentExtra;return e[fE]=i,e[Uc]=i,e[cE]="application/json",e}async getHeadersInternal(e,i){const a=new Headers;if(e&&e.headers){for(const[l,r]of Object.entries(e.headers))a.append(l,r);e.timeout&&e.timeout>0&&a.append(dE,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(a,i),a}async uploadFile(e,i){var a;const l={};i!=null&&(l.mimeType=i.mimeType,l.name=i.name,l.displayName=i.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const r=this.clientOptions.uploader,c=await r.stat(e);l.sizeBytes=String(c.size);const h=(a=i?.mimeType)!==null&&a!==void 0?a:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=h;const y=await this.fetchUploadUrl(l,i);return r.upload(e,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i){var a;let l={};i?.httpOptions?l=i.httpOptions:l={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const r={file:e},c=await this.request({path:Q("upload/v1beta/files",r._url),body:JSON.stringify(r),httpMethod:"POST",httpOptions:l});if(!c||!c?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(a=c?.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function jg(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const i=n.status;let a;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?a=await n.json():a={error:{message:await n.text(),code:n.status,status:n.statusText}};const l=JSON.stringify(a);throw i>=400&&i<600?new zl({message:l,status:i}):new Error(l)}}function vE(n,e){if(!e||Object.keys(e).length===0||n.body instanceof Blob)return;let i={};if(typeof n.body=="string"&&n.body.length>0)try{const r=JSON.parse(n.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))i=r;else return}catch{return}function a(r,c){const h=Object.assign({},r);for(const y in c)if(Object.prototype.hasOwnProperty.call(c,y)){const g=c[y],x=h[y];g&&typeof g=="object"&&!Array.isArray(g)&&x&&typeof x=="object"&&!Array.isArray(x)?h[y]=a(x,g):h[y]=g}return h}const l=a(i,e);n.body=JSON.stringify(l)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xE="mcp_used/unknown";let bE=!1;function Fy(n){for(const e of n)if(wE(e)||typeof e=="object"&&"inputSchema"in e)return!0;return bE}function $y(n){var e;const i=(e=n[Uc])!==null&&e!==void 0?e:"";n[Uc]=(i+` ${xE}`).trimStart()}function wE(n){return n!==null&&typeof n=="object"&&n instanceof td}function _E(n,e=100){return Us(this,arguments,function*(){let a,l=0;for(;l<e;){const r=yield Le(n.listTools({cursor:a}));for(const c of r.tools)yield yield Le(c),l++;if(!r.nextCursor)break;a=r.nextCursor}})}class td{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new td(e,i)}async initialize(){var e,i,a,l;if(this.mcpTools.length>0)return;const r={},c=[];for(const x of this.mcpClients)try{for(var h=!0,y=(i=void 0,za(_E(x))),g;g=await y.next(),e=g.done,!e;h=!0){l=g.value,h=!1;const b=l;c.push(b);const w=b.name;if(r[w])throw new Error(`Duplicate function name ${w} found in MCP tools. Please ensure function names are unique.`);r[w]=x}}catch(b){i={error:b}}finally{try{!h&&!e&&(a=y.return)&&await a.call(y)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),Nw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const a of e)if(a.name in this.functionNameToMcpClient){const l=this.functionNameToMcpClient[a.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const c=await l.callTool({name:a.name,arguments:a.args},void 0,r);i.push({functionResponse:{name:a.name,response:c.isError?{error:c}:c}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function SE(n,e,i){const a=new xw;let l;i.data instanceof Blob?l=JSON.parse(await i.data.text()):l=JSON.parse(i.data),Object.assign(a,l),e(a)}class TE{constructor(e,i,a){this.apiClient=e,this.auth=i,this.webSocketFactory=a}async connect(e){var i,a;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");const l=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),c=NE(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),y=`${l}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${h}`;let g=()=>{};const x=new Promise(k=>{g=k}),b=e.callbacks,w=function(){g({})},S=this.apiClient,E={onopen:w,onmessage:k=>{SE(S,b.onmessage,k)},onerror:(i=b?.onerror)!==null&&i!==void 0?i:function(k){},onclose:(a=b?.onclose)!==null&&a!==void 0?a:function(k){}},C=this.webSocketFactory.create(y,CE(c),E);C.connect(),await x;const D={setup:{model:be(this.apiClient,e.model)}};return C.send(JSON.stringify(D)),new EE(C,this.apiClient)}}class EE{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=gS(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=pS(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(ks.PLAY)}pause(){this.sendPlaybackControl(ks.PAUSE)}stop(){this.sendPlaybackControl(ks.STOP)}resetContext(){this.sendPlaybackControl(ks.RESET_CONTEXT)}close(){this.conn.close()}}function CE(n){const e={};return n.forEach((i,a)=>{e[a]=i}),e}function NE(n){const e=new Headers;for(const[i,a]of Object.entries(n))e.append(i,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AE="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function RE(n,e,i){const a=new vw;let l;i.data instanceof Blob?l=await i.data.text():i.data instanceof ArrayBuffer?l=new TextDecoder().decode(i.data):l=i.data;const r=JSON.parse(l);if(n.isVertexAI()){const c=xS(r);Object.assign(a,c)}else Object.assign(a,r);e(a)}class ME{constructor(e,i,a){this.apiClient=e,this.auth=i,this.webSocketFactory=a,this.music=new TE(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,a,l,r,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),g=this.apiClient.getApiVersion();let x;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&Fy(e.config.tools)&&$y(b);const w=UE(b);if(this.apiClient.isVertexAI())x=`${y}/ws/google.cloud.aiplatform.${g}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(w,x);else{const X=this.apiClient.getApiKey();let he="BidiGenerateContent",qe="key";X?.startsWith("auth_tokens/")&&(he="BidiGenerateContentConstrained",qe="access_token"),x=`${y}/ws/google.ai.generativelanguage.${g}.GenerativeService.${he}?${qe}=${X}`}let S=()=>{};const E=new Promise(X=>{S=X}),C=e.callbacks,N=function(){var X;(X=C?.onopen)===null||X===void 0||X.call(C),S({})},M=this.apiClient,D={onopen:N,onmessage:X=>{RE(M,C.onmessage,X)},onerror:(i=C?.onerror)!==null&&i!==void 0?i:function(X){},onclose:(a=C?.onclose)!==null&&a!==void 0?a:function(X){}},k=this.webSocketFactory.create(x,DE(w),D);k.connect(),await E;let q=be(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&q.startsWith("publishers/")){const X=this.apiClient.getProject(),he=this.apiClient.getLocation();q=`projects/${X}/locations/${he}/`+q}let z={};this.apiClient.isVertexAI()&&((l=e.config)===null||l===void 0?void 0:l.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[jl.AUDIO]}:e.config.responseModalities=[jl.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig;const L=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],$=[];for(const X of L)if(this.isCallableTool(X)){const he=X;$.push(await he.tool())}else $.push(X);$.length>0&&(e.config.tools=$);const ie={model:q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?z=mS(this.apiClient,ie):z=hS(this.apiClient,ie),delete z.config,k.send(JSON.stringify(z)),new kE(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const IE={turnComplete:!0};class kE{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let a=[];try{a=Kt(i.turns),e.isVertexAI()||(a=a.map(l=>Fl(l)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:a,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let a=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?a=i.functionResponses:a=[i.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const r of a){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(AE)}return{toolResponse:{functionResponses:a}}}sendClientContent(e){e=Object.assign(Object.assign({},IE),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:vS(e)}:i={realtimeInput:yS(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function DE(n){const e={};return n.forEach((i,a)=>{e[a]=i}),e}function UE(n){const e=new Headers;for(const[i,a]of Object.entries(n))e.append(i,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Og=10;function Lg(n){var e,i,a;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let l=!1;for(const c of(i=n?.tools)!==null&&i!==void 0?i:[])if(js(c)){l=!0;break}if(!l)return!0;const r=(a=n?.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls;return!!(r&&(r<0||!Number.isInteger(r))||r==0)}function js(n){return"callTool"in n&&typeof n.callTool=="function"}function jE(n){var e,i,a;return(a=(i=(e=n.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(l=>js(l)))!==null&&a!==void 0?a:!1}function OE(n){var e,i,a;return(a=(i=(e=n.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(l=>!js(l)))!==null&&a!==void 0?a:!1}function Pg(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LE extends Pi{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var a,l,r,c,h;const y=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!jE(i)||Lg(i.config))return await this.generateContentInternal(y);if(OE(i))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let g,x;const b=Kt(y.contents),w=(r=(l=(a=y.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&r!==void 0?r:Og;let S=0;for(;S<w&&(g=await this.generateContentInternal(y),!(!g.functionCalls||g.functionCalls.length===0));){const E=g.candidates[0].content,C=[];for(const N of(h=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(js(N)){const D=await N.callTool(g.functionCalls);C.push(...D)}S++,x={role:"user",parts:C},y.contents=Kt(y.contents),y.contents.push(E),y.contents.push(x),Pg(y.config)&&(b.push(E),b.push(x))}return Pg(y.config)&&(g.automaticFunctionCallingHistory=b),g},this.generateContentStream=async i=>{if(this.maybeMoveToResponseJsonSchem(i),Lg(i.config)){const a=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(a)}else return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(a=>{var l;let r;const c=[];if(a?.generatedImages)for(const y of a.generatedImages)y&&y?.safetyAttributes&&((l=y?.safetyAttributes)===null||l===void 0?void 0:l.contentType)==="Positive Prompt"?r=y?.safetyAttributes:c.push(y);let h;return r?h={generatedImages:c,positivePromptSafetyAttributes:r,sdkHttpResponse:a.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:a.sdkHttpResponse},h}),this.list=async i=>{var a;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((a=c.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Wa(Li.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async i=>{const a={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(a.referenceImages=i.referenceImages.map(l=>l.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async i=>{let a={numberOfImages:1,mode:"upscale"};i.config&&(a=Object.assign(Object.assign({},a),i.config));const l={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:a};return await this.upscaleImageInternal(l)},this.generateVideos=async i=>{var a,l,r,c,h,y;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((a=i.video)===null||a===void 0)&&a.uri&&(!((l=i.video)===null||l===void 0)&&l.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(r=i.source)===null||r===void 0?void 0:r.video)===null||c===void 0)&&c.uri&&(!((y=(h=i.source)===null||h===void 0?void 0:h.video)===null||y===void 0)&&y.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,a,l;const r=(i=e.config)===null||i===void 0?void 0:i.tools;if(!r)return e;const c=await Promise.all(r.map(async y=>js(y)?await y.tool():y)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&Fy(e.config.tools)){const y=(l=(a=e.config.httpOptions)===null||a===void 0?void 0:a.headers)!==null&&l!==void 0?l:{};let g=Object.assign({},y);Object.keys(g).length===0&&(g=this.apiClient.getDefaultHeaders()),$y(g),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:g})}return h}async initAfcToolsMap(e){var i,a,l;const r=new Map;for(const c of(a=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&a!==void 0?a:[])if(js(c)){const h=c,y=await h.tool();for(const g of(l=y.functionDeclarations)!==null&&l!==void 0?l:[]){if(!g.name)throw new Error("Function declaration name is required.");if(r.has(g.name))throw new Error(`Duplicate tool declaration name: ${g.name}`);r.set(g.name,h)}}return r}async processAfcStream(e){var i,a,l;const r=(l=(a=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:Og;let c=!1,h=0;const y=await this.initAfcToolsMap(e);return(function(g,x,b){var w,S;return Us(this,arguments,function*(){for(var E,C,N,M;h<r;){c&&(h++,c=!1);const z=yield Le(g.processParamsMaybeAddMcpUsage(b)),L=yield Le(g.generateContentStreamInternal(z)),$=[],ie=[];try{for(var D=!0,k=(C=void 0,za(L)),q;q=yield Le(k.next()),E=q.done,!E;D=!0){M=q.value,D=!1;const X=M;if(yield yield Le(X),X.candidates&&(!((w=X.candidates[0])===null||w===void 0)&&w.content)){ie.push(X.candidates[0].content);for(const he of(S=X.candidates[0].content.parts)!==null&&S!==void 0?S:[])if(h<r&&he.functionCall){if(!he.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(he.functionCall.name)){const qe=yield Le(x.get(he.functionCall.name).callTool([he.functionCall]));$.push(...qe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${he.functionCall.name}`)}}}}catch(X){C={error:X}}finally{try{!D&&!E&&(N=k.return)&&(yield Le(N.call(k)))}finally{if(C)throw C.error}}if($.length>0){c=!0;const X=new Ha;X.candidates=[{content:{role:"user",parts:$}}],yield yield Le(X);const he=[];he.push(...ie),he.push({role:"user",parts:$});const qe=Kt(b.contents).concat(he);b.contents=qe}else break}})})(this,y,e)}async generateContentInternal(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=Ig(this.apiClient,e);return h=Q("{model}:generateContent",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=Dg(x),w=new Ha;return Object.assign(w,b),w})}else{const g=Mg(this.apiClient,e);return h=Q("{model}:generateContent",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=kg(x),w=new Ha;return Object.assign(w,b),w})}}async generateContentStreamInternal(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=Ig(this.apiClient,e);return h=Q("{model}:streamGenerateContent?alt=sse",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(b){return Us(this,arguments,function*(){var w,S,E,C;try{for(var N=!0,M=za(b),D;D=yield Le(M.next()),w=D.done,!w;N=!0){C=D.value,N=!1;const k=C,q=Dg(yield Le(k.json()));q.sdkHttpResponse={headers:k.headers};const z=new Ha;Object.assign(z,q),yield yield Le(z)}}catch(k){S={error:k}}finally{try{!N&&!w&&(E=M.return)&&(yield Le(E.call(M)))}finally{if(S)throw S.error}}})})}else{const g=Mg(this.apiClient,e);return h=Q("{model}:streamGenerateContent?alt=sse",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),c.then(function(b){return Us(this,arguments,function*(){var w,S,E,C;try{for(var N=!0,M=za(b),D;D=yield Le(M.next()),w=D.done,!w;N=!0){C=D.value,N=!1;const k=C,q=kg(yield Le(k.json()));q.sdkHttpResponse={headers:k.headers};const z=new Ha;Object.assign(z,q),yield yield Le(z)}}catch(k){S={error:k}}finally{try{!N&&!w&&(E=M.return)&&(yield Le(E.call(M)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=KS(this.apiClient,e);return h=Q("{model}:predict",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=XS(x),w=new mg;return Object.assign(w,b),w})}else{const g=YS(this.apiClient,e);return h=Q("{model}:batchEmbedContents",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=QS(x),w=new mg;return Object.assign(w,b),w})}}async generateImagesInternal(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=oT(this.apiClient,e);return h=Q("{model}:predict",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=rT(x),w=new pg;return Object.assign(w,b),w})}else{const g=aT(this.apiClient,e);return h=Q("{model}:predict",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=lT(x),w=new pg;return Object.assign(w,b),w})}}async editImageInternal(e){var i,a;let l,r="",c={};if(this.apiClient.isVertexAI()){const h=zS(this.apiClient,e);return r=Q("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:y.headers},x})),l.then(y=>{const g=FS(y),x=new cw;return Object.assign(x,g),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,a;let l,r="",c={};if(this.apiClient.isVertexAI()){const h=iE(this.apiClient,e);return r=Q("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:y.headers},x})),l.then(y=>{const g=sE(y),x=new dw;return Object.assign(x,g),x})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,a;let l,r="",c={};if(this.apiClient.isVertexAI()){const h=qT(this.apiClient,e);return r=Q("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const g=BT(y),x=new fw;return Object.assign(x,g),x})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,a;let l,r="",c={};if(this.apiClient.isVertexAI()){const h=$T(this.apiClient,e);return r=Q("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const g=JT(y),x=new hw;return Object.assign(x,g),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=ET(this.apiClient,e);return h=Q("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>Dc(x))}else{const g=TT(this.apiClient,e);return h=Q("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>kc(x))}}async listInternal(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=kT(this.apiClient,e);return h=Q("{models_url}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=UT(x),w=new gg;return Object.assign(w,b),w})}else{const g=IT(this.apiClient,e);return h=Q("{models_url}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=DT(x),w=new gg;return Object.assign(w,b),w})}}async update(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=tE(this.apiClient,e);return h=Q("{model}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>Dc(x))}else{const g=eE(this.apiClient,e);return h=Q("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>kc(x))}}async delete(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=BS(this.apiClient,e);return h=Q("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=HS(x),w=new yg;return Object.assign(w,b),w})}else{const g=qS(this.apiClient,e);return h=Q("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=VS(x),w=new yg;return Object.assign(w,b),w})}}async countTokens(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=OS(this.apiClient,e);return h=Q("{model}:countTokens",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=PS(x),w=new vg;return Object.assign(w,b),w})}else{const g=jS(this.apiClient,e);return h=Q("{model}:countTokens",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=LS(x),w=new vg;return Object.assign(w,b),w})}}async computeTokens(e){var i,a;let l,r="",c={};if(this.apiClient.isVertexAI()){const h=AS(this.apiClient,e);return r=Q("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:y.headers},x})),l.then(y=>{const g=RS(y),x=new mw;return Object.assign(x,g),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=mT(this.apiClient,e);return h=Q("{model}:predictLongRunning",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>{const b=fT(x),w=new Ol;return Object.assign(w,b),w})}else{const g=hT(this.apiClient,e);return h=Q("{model}:predictLongRunning",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>{const b=dT(x),w=new Ol;return Object.assign(w,b),w})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PE extends Pi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,a=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=i.name.split("/operations/")[0];let r;a&&"httpOptions"in a&&(r=a.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:l,config:{httpOptions:r}});return i._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:i.name,config:a});return i._fromAPIResponse({apiResponse:l,isVertexAI:!1})}}async get(e){const i=e.operation,a=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=i.name.split("/operations/")[0];let r;a&&"httpOptions"in a&&(r=a.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:l,config:{httpOptions:r}});return i._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:i.name,config:a});return i._fromAPIResponse({apiResponse:l,isVertexAI:!1})}}async getVideosOperationInternal(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=lw(e);return h=Q("{operationName}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c}else{const g=ow(e);return h=Q("{operationName}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c}}async fetchPredictVideosOperationInternal(e){var i,a;let l,r="",c={};if(this.apiClient.isVertexAI()){const h=Zb(e);return r=Q("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qE(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["data"]);i!=null&&p(e,["data"],i);const a=f(n,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}function BE(n){const e={},i=f(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(r=>YE(r))),p(e,["parts"],l)}const a=f(n,["role"]);return a!=null&&p(e,["role"],a),e}function VE(n,e,i){const a={},l=f(e,["expireTime"]);i!==void 0&&l!=null&&p(i,["expireTime"],l);const r=f(e,["newSessionExpireTime"]);i!==void 0&&r!=null&&p(i,["newSessionExpireTime"],r);const c=f(e,["uses"]);i!==void 0&&c!=null&&p(i,["uses"],c);const h=f(e,["liveConnectConstraints"]);i!==void 0&&h!=null&&p(i,["bidiGenerateContentSetup"],JE(n,h));const y=f(e,["lockAdditionalFields"]);return i!==void 0&&y!=null&&p(i,["fieldMask"],y),a}function HE(n,e){const i={},a=f(e,["config"]);return a!=null&&p(i,["config"],VE(n,a,i)),i}function GE(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["fileUri"]);i!=null&&p(e,["fileUri"],i);const a=f(n,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}function zE(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(n,["enableWidget"]);return i!=null&&p(e,["enableWidget"],i),e}function FE(n){const e={},i=f(n,["timeRangeFilter"]);if(i!=null&&p(e,["timeRangeFilter"],i),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function $E(n,e){const i={},a=f(n,["generationConfig"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig"],a);const l=f(n,["responseModalities"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","responseModalities"],l);const r=f(n,["temperature"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","temperature"],r);const c=f(n,["topP"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","topP"],c);const h=f(n,["topK"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","topK"],h);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","maxOutputTokens"],y);const g=f(n,["mediaResolution"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","mediaResolution"],g);const x=f(n,["seed"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","seed"],x);const b=f(n,["speechConfig"]);e!==void 0&&b!=null&&p(e,["setup","generationConfig","speechConfig"],ed(b));const w=f(n,["thinkingConfig"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","thinkingConfig"],w);const S=f(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],S);const E=f(n,["systemInstruction"]);e!==void 0&&E!=null&&p(e,["setup","systemInstruction"],BE(ht(E)));const C=f(n,["tools"]);if(e!==void 0&&C!=null){let L=Hs(C);Array.isArray(L)&&(L=L.map($=>QE(Vs($)))),p(e,["setup","tools"],L)}const N=f(n,["sessionResumption"]);e!==void 0&&N!=null&&p(e,["setup","sessionResumption"],KE(N));const M=f(n,["inputAudioTranscription"]);e!==void 0&&M!=null&&p(e,["setup","inputAudioTranscription"],M);const D=f(n,["outputAudioTranscription"]);e!==void 0&&D!=null&&p(e,["setup","outputAudioTranscription"],D);const k=f(n,["realtimeInputConfig"]);e!==void 0&&k!=null&&p(e,["setup","realtimeInputConfig"],k);const q=f(n,["contextWindowCompression"]);e!==void 0&&q!=null&&p(e,["setup","contextWindowCompression"],q);const z=f(n,["proactivity"]);return e!==void 0&&z!=null&&p(e,["setup","proactivity"],z),i}function JE(n,e){const i={},a=f(e,["model"]);a!=null&&p(i,["setup","model"],be(n,a));const l=f(e,["config"]);return l!=null&&p(i,["config"],$E(l,i)),i}function YE(n){const e={},i=f(n,["videoMetadata"]);i!=null&&p(e,["videoMetadata"],i);const a=f(n,["thought"]);a!=null&&p(e,["thought"],a);const l=f(n,["inlineData"]);l!=null&&p(e,["inlineData"],qE(l));const r=f(n,["fileData"]);r!=null&&p(e,["fileData"],GE(r));const c=f(n,["thoughtSignature"]);c!=null&&p(e,["thoughtSignature"],c);const h=f(n,["functionCall"]);h!=null&&p(e,["functionCall"],h);const y=f(n,["codeExecutionResult"]);y!=null&&p(e,["codeExecutionResult"],y);const g=f(n,["executableCode"]);g!=null&&p(e,["executableCode"],g);const x=f(n,["functionResponse"]);x!=null&&p(e,["functionResponse"],x);const b=f(n,["text"]);return b!=null&&p(e,["text"],b),e}function KE(n){const e={},i=f(n,["handle"]);if(i!=null&&p(e,["handle"],i),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function QE(n){const e={},i=f(n,["functionDeclarations"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(x=>x)),p(e,["functionDeclarations"],g)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=f(n,["googleSearch"]);a!=null&&p(e,["googleSearch"],FE(a));const l=f(n,["googleSearchRetrieval"]);if(l!=null&&p(e,["googleSearchRetrieval"],l),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=f(n,["googleMaps"]);r!=null&&p(e,["googleMaps"],zE(r));const c=f(n,["urlContext"]);c!=null&&p(e,["urlContext"],c);const h=f(n,["computerUse"]);h!=null&&p(e,["computerUse"],h);const y=f(n,["codeExecution"]);return y!=null&&p(e,["codeExecution"],y),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XE(n){const e=[];for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const a=n[i];if(typeof a=="object"&&a!=null&&Object.keys(a).length>0){const l=Object.keys(a).map(r=>`${i}.${r}`);e.push(...l)}else e.push(i)}return e.join(",")}function WE(n,e){let i=null;const a=n.bidiGenerateContentSetup;if(typeof a=="object"&&a!==null&&"setup"in a){const r=a.setup;typeof r=="object"&&r!==null?(n.bidiGenerateContentSetup=r,i=r):delete n.bidiGenerateContentSetup}else a!==void 0&&delete n.bidiGenerateContentSetup;const l=n.fieldMask;if(i){const r=XE(i);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)r?n.fieldMask=r:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&l!==null&&Array.isArray(l)&&l.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];l.length>0&&(h=l.map(g=>c.includes(g)?`generationConfig.${g}`:g));const y=[];r&&y.push(r),h.length>0&&y.push(...h),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else l!==null&&Array.isArray(l)&&l.length>0?n.fieldMask=l.join(","):delete n.fieldMask;return n}class ZE extends Pi{constructor(e){super(),this.apiClient=e}async create(e){var i,a;let l,r="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=HE(this.apiClient,e);r=Q("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const y=WE(h,e.config);return l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>g)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eC(n,e){const i={},a=f(n,["name"]);return a!=null&&p(i,["_url","name"],a),i}function tC(n,e){const i={},a=f(n,["name"]);return a!=null&&p(i,["_url","name"],a),i}function nC(n,e,i){const a={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const l=f(n,["tunedModelDisplayName"]);if(e!==void 0&&l!=null&&p(e,["displayName"],l),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=f(n,["epochCount"]);e!==void 0&&r!=null&&p(e,["tuningTask","hyperparameters","epochCount"],r);const c=f(n,["learningRateMultiplier"]);if(c!=null&&p(a,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=f(n,["batchSize"]);e!==void 0&&h!=null&&p(e,["tuningTask","hyperparameters","batchSize"],h);const y=f(n,["learningRate"]);if(e!==void 0&&y!=null&&p(e,["tuningTask","hyperparameters","learningRate"],y),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return a}function iC(n,e,i){const a={},l=f(n,["validationDataset"]);e!==void 0&&l!=null&&p(e,["supervisedTuningSpec"],vC(l));const r=f(n,["tunedModelDisplayName"]);e!==void 0&&r!=null&&p(e,["tunedModelDisplayName"],r);const c=f(n,["description"]);e!==void 0&&c!=null&&p(e,["description"],c);const h=f(n,["epochCount"]);e!==void 0&&h!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],h);const y=f(n,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y);const g=f(n,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g);const x=f(n,["adapterSize"]);if(e!==void 0&&x!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],x),f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=f(n,["labels"]);return e!==void 0&&b!=null&&p(e,["labels"],b),a}function sC(n,e){const i={},a=f(n,["baseModel"]);a!=null&&p(i,["baseModel"],a);const l=f(n,["preTunedModel"]);l!=null&&p(i,["preTunedModel"],l);const r=f(n,["trainingDataset"]);r!=null&&p(i,["tuningTask","trainingData"],pC(r));const c=f(n,["config"]);return c!=null&&nC(c,i),i}function aC(n,e){const i={},a=f(n,["baseModel"]);a!=null&&p(i,["baseModel"],a);const l=f(n,["preTunedModel"]);l!=null&&p(i,["preTunedModel"],l);const r=f(n,["trainingDataset"]);r!=null&&gC(r,i);const c=f(n,["config"]);return c!=null&&iC(c,i),i}function oC(n,e){const i={},a=f(n,["name"]);return a!=null&&p(i,["_url","name"],a),i}function lC(n,e){const i={},a=f(n,["name"]);return a!=null&&p(i,["_url","name"],a),i}function rC(n,e,i){const a={},l=f(n,["pageSize"]);e!==void 0&&l!=null&&p(e,["_query","pageSize"],l);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const c=f(n,["filter"]);return e!==void 0&&c!=null&&p(e,["_query","filter"],c),a}function uC(n,e,i){const a={},l=f(n,["pageSize"]);e!==void 0&&l!=null&&p(e,["_query","pageSize"],l);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const c=f(n,["filter"]);return e!==void 0&&c!=null&&p(e,["_query","filter"],c),a}function cC(n,e){const i={},a=f(n,["config"]);return a!=null&&rC(a,i),i}function dC(n,e){const i={},a=f(n,["config"]);return a!=null&&uC(a,i),i}function fC(n,e){const i={},a=f(n,["sdkHttpResponse"]);a!=null&&p(i,["sdkHttpResponse"],a);const l=f(n,["nextPageToken"]);l!=null&&p(i,["nextPageToken"],l);const r=f(n,["tunedModels"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>Jy(h))),p(i,["tuningJobs"],c)}return i}function hC(n,e){const i={},a=f(n,["sdkHttpResponse"]);a!=null&&p(i,["sdkHttpResponse"],a);const l=f(n,["nextPageToken"]);l!=null&&p(i,["nextPageToken"],l);const r=f(n,["tuningJobs"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>jc(h))),p(i,["tuningJobs"],c)}return i}function mC(n,e){const i={},a=f(n,["name"]);a!=null&&p(i,["model"],a);const l=f(n,["name"]);return l!=null&&p(i,["endpoint"],l),i}function pC(n,e){const i={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const a=f(n,["examples"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(r=>r)),p(i,["examples","examples"],l)}return i}function gC(n,e,i){const a={},l=f(n,["gcsUri"]);e!==void 0&&l!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],l);const r=f(n,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],r),f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function Jy(n,e){const i={},a=f(n,["sdkHttpResponse"]);a!=null&&p(i,["sdkHttpResponse"],a);const l=f(n,["name"]);l!=null&&p(i,["name"],l);const r=f(n,["state"]);r!=null&&p(i,["state"],Ay(r));const c=f(n,["createTime"]);c!=null&&p(i,["createTime"],c);const h=f(n,["tuningTask","startTime"]);h!=null&&p(i,["startTime"],h);const y=f(n,["tuningTask","completeTime"]);y!=null&&p(i,["endTime"],y);const g=f(n,["updateTime"]);g!=null&&p(i,["updateTime"],g);const x=f(n,["description"]);x!=null&&p(i,["description"],x);const b=f(n,["baseModel"]);b!=null&&p(i,["baseModel"],b);const w=f(n,["_self"]);return w!=null&&p(i,["tunedModel"],mC(w)),i}function jc(n,e){const i={},a=f(n,["sdkHttpResponse"]);a!=null&&p(i,["sdkHttpResponse"],a);const l=f(n,["name"]);l!=null&&p(i,["name"],l);const r=f(n,["state"]);r!=null&&p(i,["state"],Ay(r));const c=f(n,["createTime"]);c!=null&&p(i,["createTime"],c);const h=f(n,["startTime"]);h!=null&&p(i,["startTime"],h);const y=f(n,["endTime"]);y!=null&&p(i,["endTime"],y);const g=f(n,["updateTime"]);g!=null&&p(i,["updateTime"],g);const x=f(n,["error"]);x!=null&&p(i,["error"],x);const b=f(n,["description"]);b!=null&&p(i,["description"],b);const w=f(n,["baseModel"]);w!=null&&p(i,["baseModel"],w);const S=f(n,["tunedModel"]);S!=null&&p(i,["tunedModel"],S);const E=f(n,["preTunedModel"]);E!=null&&p(i,["preTunedModel"],E);const C=f(n,["supervisedTuningSpec"]);C!=null&&p(i,["supervisedTuningSpec"],C);const N=f(n,["tuningDataStats"]);N!=null&&p(i,["tuningDataStats"],N);const M=f(n,["encryptionSpec"]);M!=null&&p(i,["encryptionSpec"],M);const D=f(n,["partnerModelTuningSpec"]);D!=null&&p(i,["partnerModelTuningSpec"],D);const k=f(n,["customBaseModel"]);k!=null&&p(i,["customBaseModel"],k);const q=f(n,["experiment"]);q!=null&&p(i,["experiment"],q);const z=f(n,["labels"]);z!=null&&p(i,["labels"],z);const L=f(n,["outputUri"]);L!=null&&p(i,["outputUri"],L);const $=f(n,["pipelineJob"]);$!=null&&p(i,["pipelineJob"],$);const ie=f(n,["serviceAccount"]);ie!=null&&p(i,["serviceAccount"],ie);const X=f(n,["tunedModelDisplayName"]);X!=null&&p(i,["tunedModelDisplayName"],X);const he=f(n,["veoTuningSpec"]);return he!=null&&p(i,["veoTuningSpec"],he),i}function yC(n,e){const i={},a=f(n,["sdkHttpResponse"]);a!=null&&p(i,["sdkHttpResponse"],a);const l=f(n,["name"]);l!=null&&p(i,["name"],l);const r=f(n,["metadata"]);r!=null&&p(i,["metadata"],r);const c=f(n,["done"]);c!=null&&p(i,["done"],c);const h=f(n,["error"]);return h!=null&&p(i,["error"],h),i}function vC(n,e){const i={},a=f(n,["gcsUri"]);a!=null&&p(i,["validationDatasetUri"],a);const l=f(n,["vertexDatasetResource"]);return l!=null&&p(i,["validationDatasetUri"],l),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xC extends Pi{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new Wa(Li.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(i),i),this.tune=async i=>{var a;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const l={tunedModelName:i.baseModel};!((a=i.config)===null||a===void 0)&&a.preTunedModelCheckpointId&&(l.checkpointId=i.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},i),{preTunedModel:l});return r.baseModel=void 0,await this.tuneInternal(r)}else{const l=Object.assign({},i);return await this.tuneInternal(l)}else{const l=Object.assign({},i),r=await this.tuneMldevInternal(l);let c="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?c=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(c=r.name.split("/operations/")[0]),{name:c,state:Ac.JOB_STATE_QUEUED}}}}async getInternal(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=lC(e);return h=Q("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>jc(x))}else{const g=oC(e);return h=Q("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>Jy(x))}}async listInternal(e){var i,a,l,r;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=dC(e);return h=Q("tuningJobs",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=hC(x),w=new xg;return Object.assign(w,b),w})}else{const g=cC(e);return h=Q("tunedModels",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),c.then(x=>{const b=fC(x),w=new xg;return Object.assign(w,b),w})}}async cancel(e){var i,a,l,r;let c="",h={};if(this.apiClient.isVertexAI()){const y=tC(e);c=Q("{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}else{const y=eC(e);c=Q("{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async tuneInternal(e){var i,a;let l,r="",c={};if(this.apiClient.isVertexAI()){const h=aC(e);return r=Q("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:y.headers},x})),l.then(y=>jc(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,a;let l,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=sC(e);return r=Q("tunedModels",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:y.headers},x})),l.then(y=>yC(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bC{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const wC=1024*1024*8,_C=3,SC=1e3,TC=2,gc="x-goog-upload-status";async function EC(n,e,i){var a,l,r;let c=0,h=0,y=new Rc(new Response),g="upload";for(c=n.size;h<c;){const b=Math.min(wC,c-h),w=n.slice(h,h+b);h+b>=c&&(g+=", finalize");let S=0,E=SC;for(;S<_C&&(y=await i.request({path:"",body:w,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(h),"Content-Length":String(b)}}}),!(!((a=y?.headers)===null||a===void 0)&&a[gc]));)S++,await NC(E),E=E*TC;if(h+=b,((l=y?.headers)===null||l===void 0?void 0:l[gc])!=="active")break;if(c<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const x=await y?.json();if(((r=y?.headers)===null||r===void 0?void 0:r[gc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return x.file}async function CC(n){return{size:n.size,type:n.type}}function NC(n){return new Promise(e=>setTimeout(e,n))}class AC{async upload(e,i,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await EC(e,i,a)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await CC(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RC{create(e,i,a){return new MC(e,i,a)}}class MC{constructor(e,i,a){this.url=e,this.headers=i,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qg="x-goog-api-key";class IC{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(qg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(qg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kC="gl-node/";class DC{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const a=Xb(e.httpOptions,e.vertexai,void 0,void 0);a&&(e.httpOptions?e.httpOptions.baseUrl=a:e.httpOptions={baseUrl:a}),this.apiVersion=e.apiVersion;const l=new IC(this.apiKey);this.apiClient=new yE({auth:l,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:kC+"web",uploader:new AC,downloader:new bC}),this.models=new LE(this.apiClient),this.live=new ME(this.apiClient,l,new RC),this.batches=new g_(this.apiClient),this.chats=new Y_(this.models,this.apiClient),this.caches=new F_(this.apiClient),this.files=new sS(this.apiClient),this.operations=new PE(this.apiClient),this.authTokens=new ZE(this.apiClient),this.tunings=new xC(this.apiClient)}}new DC({apiKey:"mock_key"});const UC=async(n,e)=>new Promise(i=>{setTimeout(()=>{i(`
          <h3 class="text-xl font-semibold text-unistay-navy mb-2">Finding ${e} (Mock Data)</h3>
          <p class="mb-4">This is a mock guide for ${e} services near ${n}. With a valid API key, Gemini would provide tailored recommendations, popular spots, and student-friendly tips.</p>
          <ul class="list-disc list-inside space-y-2">
            <li>Look for places with student discounts.</li>
            <li>Ask senior students for their recommendations.</li>
            <li>Check notice boards for local service providers.</li>
          </ul>
        `)},1500)}),jC=({service:n,onClick:e,index:i,isVisible:a})=>d.jsxs("div",{onClick:e,className:`bg-white rounded-2xl shadow-lg p-6 text-center cursor-pointer group transform hover:-translate-y-2 transition-all duration-300 ease-in-out ${a?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,style:{transitionDelay:`${a?i*100:0}ms`},children:[d.jsx("div",{className:"w-20 h-20 mx-auto bg-unistay-yellow/20 rounded-full flex items-center justify-center mb-4 transition-all duration-300 group-hover:bg-unistay-yellow",children:d.jsx("i",{className:`${n.icon} text-4xl text-unistay-navy transition-colors duration-300 group-hover:text-white`})}),d.jsx("h3",{className:"text-xl font-bold text-unistay-navy",children:n.name}),d.jsx("p",{className:"text-gray-500 text-sm mt-1",children:n.description})]}),OC=({service:n,universityName:e,onBack:i})=>{const[a,l]=F.useState(null),[r,c]=F.useState(!0);return F.useEffect(()=>{(async()=>{c(!0),l(null);const y=await UC(e,n.name);l(y),c(!1)})()},[n,e]),d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-8 relative animate-fade-in-up",children:[d.jsx("button",{onClick:i,className:"absolute top-4 left-4 h-10 w-10 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors z-10","aria-label":"Go back to services",children:d.jsx("i",{className:"fas fa-arrow-left text-unistay-navy"})}),d.jsxs("div",{className:"text-center mb-6 pt-8",children:[d.jsx("div",{className:"w-24 h-24 mx-auto bg-unistay-yellow rounded-full flex items-center justify-center mb-4",children:d.jsx("i",{className:`${n.icon} text-5xl text-white`})}),d.jsxs("h2",{className:"text-3xl font-extrabold text-unistay-navy",children:[n.name," Services"]}),d.jsxs("p",{className:"text-gray-600 mt-1",children:["Your guide to the best ",n.name.toLowerCase()," options near ",e,"."]})]}),d.jsx("div",{className:"mt-6 p-5 bg-gray-50 rounded-lg border border-gray-200 min-h-[250px] gemini-guide",children:r?d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-unistay-navy p-4",children:[d.jsx(Tt,{color:"navy",size:"lg",className:"mb-4"}),d.jsx("p",{className:"font-semibold",children:"Generating your personalized guide..."})]}):d.jsx("div",{dangerouslySetInnerHTML:{__html:a||""}})})]})},LC=({services:n,selectedUniversity:e})=>{const[i,a]=F.useState(null),[l,r]=Bs(),c=y=>{a(y)},h=()=>{a(null)};return d.jsx("section",{ref:l,id:"services",className:"py-16 bg-gray-100",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsxs("div",{className:`text-center mb-12 transition-opacity duration-1000 ${r?"opacity-100":"opacity-0"}`,children:[d.jsx("h2",{className:"text-3xl font-bold text-unistay-navy sm:text-4xl",children:"Student Life Services"}),d.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Everything you need for a comfortable and productive campus life, right at your fingertips."})]}),d.jsxs("div",{className:"relative min-h-[400px]",children:[d.jsx("div",{className:`transition-all duration-500 ease-in-out ${i?"opacity-0 scale-95 pointer-events-none":"opacity-100 scale-100"}`,children:d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:n.map((y,g)=>d.jsx("div",{children:d.jsx(jC,{service:y,onClick:()=>c(y),index:g,isVisible:r&&!i})},y.id))})}),i&&d.jsx("div",{className:`absolute top-0 left-0 w-full transition-opacity duration-500 ease-in-out ${i?"opacity-100":"opacity-0 pointer-events-none"}`,children:d.jsx(OC,{service:i,universityName:e.name,onBack:h})})]})]})})},Yy=F.createContext(void 0),PC=({children:n})=>{const[e,i]=F.useState([]),a=F.useCallback(r=>{i(c=>c.filter(h=>h.id!==r))},[]),l=F.useCallback(({message:r,type:c,duration:h=5e3})=>{const y=Date.now();let g="An unknown error occurred.";typeof r=="string"?g=r:typeof r=="object"&&r!==null&&r.message?g=r.message:typeof r=="object"&&r!==null&&(g=JSON.stringify(r)),i(x=>[...x,{id:y,message:g,type:c,duration:h}]),setTimeout(()=>{a(y)},h)},[a]);return d.jsx(Yy.Provider,{value:{notifications:e,notify:l,removeNotification:a},children:n})},Za=()=>{const n=F.useContext(Yy);if(n===void 0)throw new Error("useNotifier must be used within a NotificationProvider");return n},qC=()=>{const[n,e]=F.useState({name:"",email:"",phone:"",subject:"",message:""}),[i,a]=F.useState(!1),{notify:l}=Za(),r=h=>{const{name:y,value:g}=h.target;e(x=>({...x,[y]:g}))},c=async h=>{if(h.preventDefault(),!n.name.trim()||!n.email.trim()||!n.phone.trim()||!n.subject.trim()||!n.message.trim()){l("Please fill in all fields","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)){l("Please enter a valid email address","error");return}const g=/^[\d\s\-\+\(\)]+$/,x=n.phone.replace(/\D/g,"");if(!g.test(n.phone)||x.length<10){l("Please enter a valid phone number","error");return}a(!0);try{await new Promise(b=>setTimeout(b,1e3)),l("Message sent successfully! We'll get back to you soon.","success"),e({name:"",email:"",phone:"",subject:"",message:""})}catch{l("Failed to send message. Please try again.","error")}finally{a(!1)}};return d.jsx("section",{className:"py-16 bg-white",children:d.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsxs("div",{className:"text-center mb-12",children:[d.jsx("h2",{className:"text-3xl font-bold text-unistay-navy sm:text-4xl",children:"Contact Us"}),d.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Have a question or feedback? We'd love to hear from you!"})]}),d.jsxs("form",{onSubmit:c,className:"bg-gray-50 rounded-xl shadow-md p-8 space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-unistay-navy mb-2",children:"Full Name"}),d.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:r,placeholder:"Enter your full name",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-unistay-yellow focus:bg-yellow-50 transition-colors",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-unistay-navy mb-2",children:"Email Address"}),d.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:r,placeholder:"your.email@example.com",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-unistay-yellow focus:bg-yellow-50 transition-colors",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"phone",className:"block text-sm font-semibold text-unistay-navy mb-2",children:"Phone Number"}),d.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:r,placeholder:"+234 (0) 800 123 4567",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-unistay-yellow focus:bg-yellow-50 transition-colors",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"subject",className:"block text-sm font-semibold text-unistay-navy mb-2",children:"Subject"}),d.jsx("input",{type:"text",id:"subject",name:"subject",value:n.subject,onChange:r,placeholder:"What is this about?",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-unistay-yellow focus:bg-yellow-50 transition-colors",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"message",className:"block text-sm font-semibold text-unistay-navy mb-2",children:"Message"}),d.jsx("textarea",{id:"message",name:"message",value:n.message,onChange:r,placeholder:"Tell us more about your inquiry...",rows:5,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-unistay-yellow focus:bg-yellow-50 transition-colors resize-none",required:!0})]}),d.jsx("div",{className:"pt-4",children:d.jsx("button",{type:"submit",disabled:i,className:`w-full py-3 px-6 rounded-lg font-semibold text-lg transition-all duration-300 ${i?"bg-gray-400 text-white cursor-not-allowed opacity-75":"bg-unistay-navy text-white hover:bg-unistay-yellow hover:text-unistay-navy"}`,children:i?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx("i",{className:"fas fa-spinner fa-spin"}),"Sending..."]}):d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx("i",{className:"fas fa-paper-plane"}),"Send Message"]})})})]})]})})},BC=({onNavigateToRoommateFinder:n,onNavigateToBlog:e,onNavigateToAuth:i,user:a})=>{const[l,r]=F.useState(!1),c=()=>{window.scrollY>300?r(!0):r(!1)};F.useEffect(()=>(window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)),[]);const h=()=>{window.scrollTo({top:0,behavior:"smooth"})},x={UniStay:[{text:"Hostels",action:h},{text:"About Us",href:"#"},{text:"Contact",href:"#"},{text:"Blog",action:e}],"For Students":[{text:"Find a Roommate",action:a?n:i},{text:"Student Deals",action:a?()=>{alert("The Student Deals feature is coming soon!")}:i},{text:"Campus Guides",action:a?()=>{document.getElementById("campus-guide")?.scrollIntoView({behavior:"smooth"})}:i},!a&&{text:"Login / Sign Up",action:i}].filter(Boolean),Support:[{text:"Help Center",href:"#"},{text:"FAQs",href:"#"},{text:"Terms of Service",href:"#"},{text:"Privacy Policy",href:"#"}]},b=[{icon:"fab fa-facebook-f",href:"#",name:"Facebook"},{icon:"fab fa-twitter",href:"#",name:"Twitter"},{icon:"fab fa-instagram",href:"#",name:"Instagram"},{icon:"fab fa-linkedin-in",href:"#",name:"LinkedIn"}];return d.jsxs("footer",{className:"bg-unistay-navy text-white relative",children:[d.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-8",children:[d.jsxs("div",{className:"col-span-2 md:col-span-4 lg:col-span-1",children:[d.jsx("div",{className:"flex items-center select-none",children:d.jsx("img",{src:"/images/hostels/unistay.png",alt:"UniStay Logo",className:"h-10"})}),d.jsx("p",{className:"mt-4 text-gray-300 text-sm",children:"Your partner in finding the perfect student accommodation."})]}),Object.entries(x).map(([w,S])=>d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-200 tracking-wider uppercase",children:w}),d.jsx("ul",{className:"mt-4 space-y-3",children:S.map(E=>d.jsx("li",{children:E.action?d.jsx("button",{onClick:E.action,className:"text-base text-left text-gray-300 hover:text-unistay-yellow transition-colors duration-200",children:E.text}):d.jsx("a",{href:E.href,className:"text-base text-gray-300 hover:text-unistay-yellow transition-colors duration-200",children:E.text})},E.text))})]},w)),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-200 tracking-wider uppercase",children:"Get the App"}),d.jsxs("div",{className:"mt-4 space-y-3",children:[d.jsx("a",{href:"#","aria-label":"Download on the App Store",children:d.jsx("img",{src:"https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg",alt:"Download on the App Store",className:"h-10"})}),d.jsx("a",{href:"#","aria-label":"Get it on Google Play",children:d.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg",alt:"Get it on Google Play",className:"h-10"})})]})]})]}),d.jsxs("div",{className:"mt-12 border-t border-white/10 pt-8",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-200 tracking-wider uppercase text-center mb-6",children:"Our Sponsors"}),d.jsxs("div",{className:"flex justify-center items-center space-x-8",children:[d.jsx("a",{href:"#",className:"hover:opacity-80 transition-opacity duration-200",children:d.jsx("img",{src:"/images/hostels/rugbyinkitchen.png",alt:"Rugby in Kitchen",className:"h-16 object-contain"})}),d.jsx("a",{href:"#",className:"hover:opacity-80 transition-opacity duration-200",children:d.jsx("img",{src:"/images/hostels/kampanisLogo.jpg",alt:"Kampanis",className:"h-16 object-contain"})})]})]}),d.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[d.jsx("div",{className:"flex space-x-6",children:b.map(w=>d.jsxs("a",{href:w.href,className:"text-gray-400 hover:text-unistay-yellow transition-colors duration-200",children:[d.jsx("span",{className:"sr-only",children:w.name}),d.jsx("i",{className:`${w.icon} text-xl`})]},w.name))}),d.jsxs("p",{className:"text-base text-gray-400 text-center",children:[" ",new Date().getFullYear()," UniStay. All rights reserved."]})]})]})]}),l&&d.jsx("button",{onClick:h,className:"fixed bottom-8 right-8 bg-unistay-yellow text-unistay-navy h-14 w-14 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-yellow-300 animate-fade-in","aria-label":"Go to top",children:d.jsx("i",{className:"fas fa-arrow-up text-2xl"})})]})},VC=({hostel:n,onClose:e})=>{const[i,a]=F.useState(!1);F.useEffect(()=>{const r=c=>{c.key==="Escape"&&e()};return window.addEventListener("keydown",r),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",r),document.body.style.overflow="unset"}},[e]);const l=()=>{a(!0),setTimeout(()=>{a(!1)},2e3)};return d.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-[100] flex items-center justify-center p-4",style:{animation:"fadeIn 0.3s ease-out forwards"},onClick:e,children:[d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto no-scrollbar",style:{animation:"scaleIn 0.3s ease-out forwards"},onClick:r=>r.stopPropagation(),children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-full h-64 object-cover rounded-t-2xl"}),d.jsx("button",{onClick:e,className:"absolute top-4 right-4 bg-white/70 text-unistay-navy rounded-full h-10 w-10 flex items-center justify-center hover:bg-white transition-transform duration-200 hover:scale-110 z-10","aria-label":"Close modal",children:d.jsx("i",{className:"fas fa-times text-xl"})}),d.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-6 bg-gradient-to-t from-black/80 to-transparent rounded-b-t-none rounded-t-2xl",children:[d.jsx("h2",{className:"text-3xl font-extrabold text-white",children:n.name}),d.jsxs("p",{className:"text-gray-200 mt-1",children:[d.jsx("i",{className:"fas fa-map-marker-alt text-unistay-yellow mr-2"}),n.location]})]})]}),d.jsxs("div",{className:"p-6 md:p-8",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[d.jsx("span",{className:"text-xl font-extrabold text-unistay-navy bg-unistay-yellow/30 px-4 py-2 rounded-lg",children:n.priceRange}),d.jsxs("div",{className:"flex items-center gap-2 text-xl font-bold text-unistay-navy",children:[d.jsx("i",{className:"fas fa-star text-unistay-yellow"}),d.jsx("span",{children:n.rating}),d.jsx("span",{className:"text-sm font-normal text-gray-500",children:"(25 reviews)"})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-3",children:"About this hostel"}),d.jsx("p",{className:"text-gray-600 leading-relaxed",children:n.description})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-4",children:"Amenities"}),d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:n.amenities.map(r=>d.jsxs("div",{className:"bg-gray-50 border border-gray-200 p-4 rounded-lg flex items-center gap-4",children:[d.jsx("i",{className:`${r.icon} text-unistay-navy text-2xl w-8 text-center`}),d.jsx("span",{className:"font-semibold text-gray-700",children:r.name})]},r.name))})]}),d.jsx("div",{className:"pt-6 border-t border-gray-200",children:d.jsx("button",{onClick:l,disabled:i,className:"w-full bg-unistay-navy hover:bg-opacity-90 text-white font-bold text-lg py-4 px-8 rounded-full transition-all duration-300 transform hover:scale-105 flex items-center justify-center disabled:bg-opacity-70",children:i?d.jsx(Tt,{color:"white",size:"md"}):"Book Now"})})]})]}),d.jsx("style",{children:`
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.95) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
          }
      `})]})};new Date().toISOString();const Yt=[{id:"123e4567-e89b-12d3-a456-426614174001",name:"Makerere",logoUrl:"/images/hostels/makerere.jpg"},{id:"123e4567-e89b-12d3-a456-426614174002",name:"Kyambogo",logoUrl:"/images/hostels/kyambogo.jpg"},{id:"123e4567-e89b-12d3-a456-426614174003",name:"MUBS",logoUrl:"/images/hostels/mubs.jpg"},{id:"123e4567-e89b-12d3-a456-426614174004",name:"UCU",logoUrl:"/images/hostels/ucu.png"},{id:"123e4567-e89b-12d3-a456-426614174005",name:"UMU Nkozi",logoUrl:"/images/hostels/umu.png"},{id:"123e4567-e89b-12d3-a456-426614174006",name:"KIU",logoUrl:"/images/hostels/kiu.jpg"},{id:"123e4567-e89b-12d3-a456-426614174007",name:"MUST",logoUrl:"/images/hostels/must.jpg"},{id:"123e4567-e89b-12d3-a456-426614174008",name:"Aga Khan",logoUrl:"/images/hostels/agaKhan.jpg"},{id:"123e4567-e89b-12d3-a456-426614174009",name:"Gulu",logoUrl:"/images/hostels/gulu.png"},{id:"123e4567-e89b-12d3-a456-426614174010",name:"Lira",logoUrl:"/images/hostels/lira.png"},{id:"123e4567-e89b-12d3-a456-426614174011",name:"IUEA",logoUrl:"/images/hostels/iuea.jpg"}],HC=[{id:"food",name:"Food",icon:"fas fa-utensils",description:"Best & affordable food spots."},{id:"transport",name:"Transport",icon:"fas fa-motorcycle",description:"Easy ways to get around campus."},{id:"shopping",name:"Shopping",icon:"fas fa-shopping-bag",description:"Your essentials and retail therapy."},{id:"stationery",name:"Stationery",icon:"fas fa-book-open",description:"All your academic supplies."},{id:"laundry",name:"Laundry",icon:"fas fa-tshirt",description:"Quick & convenient laundry services."},{id:"entertainment",name:"Entertainment",icon:"fas fa-ticket-alt",description:"Fun activities and hangout joints."},{id:"internet",name:"Internet",icon:"fas fa-wifi",description:"Reliable internet for study & fun."},{id:"health",name:"Health",icon:"fas fa-heartbeat",description:"Clinics, pharmacies & wellness."}],GC=["Male","Female"],zC=["Male","Female","Any"],FC=["Semester","Full Year","Flexible"],$C=["Early Bird","Night Owl","Flexible"],JC=["Tidy","Average","Relaxed"],YC=["Rarely","Sometimes","Often"],KC=["Socially","Rarely","No"],wl=({children:n})=>d.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-4 border-b pb-2",children:n}),Mi=n=>d.jsx("input",{...n,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-200"}),ii=({children:n,...e})=>d.jsx("select",{...e,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-200",children:n}),QC=n=>d.jsx("textarea",{...n,rows:4,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-200"}),ct=({children:n,...e})=>d.jsx("label",{...e,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),XC=({profile:n,user:e,onProfileUpdate:i,onCancel:a,isProfileIncomplete:l})=>{const r={id:e.id,name:e.name.split(" ")[0],imageUrl:`https://picsum.photos/seed/${e.name.toLowerCase()}/400/400`,age:20,gender:"Female",universityId:Yt[0].id,course:"",yearOfStudy:1,budget:5e5,moveInDate:new Date().toISOString().split("T")[0],leaseDuration:"Semester",bio:"",isSmoker:!1,drinksAlcohol:"No",studySchedule:"Flexible",cleanliness:"Average",guestFrequency:"Rarely",hobbies:"",seekingGender:"Any",...n},[c,h]=F.useState(r),[y,g]=F.useState(!1),x=S=>{const{name:E,value:C,type:N,checked:M}=S.target;h(D=>({...D,[E]:N==="checkbox"?M:C}))},b=S=>{const{name:E,value:C}=S.target;h(N=>({...N,[E]:parseInt(C,10)||0}))},w=async S=>{S.preventDefault(),g(!0),await i(c),g(!1)};return d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-8 animate-fade-in",children:[d.jsx("h2",{className:"text-2xl font-bold text-unistay-navy mb-1",children:l?"Complete Your Profile":n?"Update Your Profile":"Create Your Roommate Profile"}),d.jsx("p",{className:"text-gray-600 mb-6",children:l?"Welcome to UniStay! Please fill out the details below to start finding roommates.":"A detailed profile helps us find you the best matches!"}),d.jsxs("form",{onSubmit:w,className:"space-y-8",children:[d.jsxs("div",{children:[d.jsx(wl,{children:"Personal Details"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx(ct,{htmlFor:"name",children:"First Name"}),d.jsx(Mi,{id:"name",name:"name",value:c.name,onChange:x,required:!0})]}),d.jsxs("div",{children:[d.jsx(ct,{htmlFor:"age",children:"Age"}),d.jsx(Mi,{id:"age",name:"age",type:"number",value:c.age,onChange:b,required:!0})]}),d.jsxs("div",{children:[d.jsx(ct,{htmlFor:"gender",children:"Gender"}),d.jsx(ii,{id:"gender",name:"gender",value:c.gender,onChange:x,children:GC.map(S=>d.jsx("option",{value:S,children:S},S))})]}),d.jsxs("div",{children:[d.jsx(ct,{htmlFor:"universityId",children:"University"}),d.jsx(ii,{id:"universityId",name:"universityId",value:c.universityId,onChange:x,children:Yt.map(S=>d.jsx("option",{value:S.id,children:S.name},S.id))})]}),d.jsxs("div",{children:[d.jsx(ct,{htmlFor:"course",children:"Course of Study"}),d.jsx(Mi,{id:"course",name:"course",value:c.course,onChange:x,placeholder:"e.g., Computer Science",required:!0})]}),d.jsxs("div",{children:[d.jsx(ct,{htmlFor:"yearOfStudy",children:"Year of Study"}),d.jsx(Mi,{id:"yearOfStudy",name:"yearOfStudy",type:"number",min:"1",max:"7",value:c.yearOfStudy,onChange:b,required:!0})]})]})]}),d.jsxs("div",{children:[d.jsx(wl,{children:"Accommodation Needs"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{children:[d.jsx(ct,{htmlFor:"budget",children:"Monthly Budget (UGX)"}),d.jsx(Mi,{id:"budget",name:"budget",type:"number",step:"50000",value:c.budget,onChange:b,required:!0})]}),d.jsxs("div",{children:[d.jsx(ct,{htmlFor:"moveInDate",children:"Move-in Date"}),d.jsx(Mi,{id:"moveInDate",name:"moveInDate",type:"date",value:c.moveInDate,onChange:x,required:!0})]}),d.jsxs("div",{children:[d.jsx(ct,{htmlFor:"leaseDuration",children:"Lease Duration"}),d.jsx(ii,{id:"leaseDuration",name:"leaseDuration",value:c.leaseDuration,onChange:x,children:FC.map(S=>d.jsx("option",{value:S,children:S},S))})]})]})]}),d.jsxs("div",{children:[d.jsx(wl,{children:"Lifestyle & Habits"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{children:[d.jsx(ct,{htmlFor:"studySchedule",children:"Study Schedule"}),d.jsx(ii,{id:"studySchedule",name:"studySchedule",value:c.studySchedule,onChange:x,children:$C.map(S=>d.jsx("option",{value:S,children:S},S))})]}),d.jsxs("div",{children:[d.jsx(ct,{htmlFor:"cleanliness",children:"Cleanliness"}),d.jsx(ii,{id:"cleanliness",name:"cleanliness",value:c.cleanliness,onChange:x,children:JC.map(S=>d.jsx("option",{value:S,children:S},S))})]}),d.jsxs("div",{children:[d.jsx(ct,{htmlFor:"guestFrequency",children:"Guest Frequency"}),d.jsx(ii,{id:"guestFrequency",name:"guestFrequency",value:c.guestFrequency,onChange:x,children:YC.map(S=>d.jsx("option",{value:S,children:S},S))})]}),d.jsxs("div",{children:[d.jsx(ct,{htmlFor:"drinksAlcohol",children:"Drinking Habits"}),d.jsx(ii,{id:"drinksAlcohol",name:"drinksAlcohol",value:c.drinksAlcohol,onChange:x,children:KC.map(S=>d.jsx("option",{value:S,children:S},S))})]}),d.jsxs("div",{className:"flex items-center pt-6",children:[d.jsx("input",{id:"isSmoker",name:"isSmoker",type:"checkbox",checked:c.isSmoker,onChange:x,className:"h-4 w-4 text-unistay-yellow focus:ring-unistay-yellow border-gray-300 rounded"}),d.jsx(ct,{htmlFor:"isSmoker",className:"ml-2",children:"Are you a smoker?"})]})]})]}),d.jsxs("div",{children:[d.jsx(wl,{children:"About You & What You're Looking For"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx(ct,{htmlFor:"seekingGender",children:"Seeking Roommate Gender"}),d.jsx(ii,{id:"seekingGender",name:"seekingGender",value:c.seekingGender,onChange:x,children:zC.map(S=>d.jsx("option",{value:S,children:S},S))})]}),d.jsxs("div",{children:[d.jsx(ct,{htmlFor:"hobbies",children:"Hobbies (comma-separated)"}),d.jsx(Mi,{id:"hobbies",name:"hobbies",value:c.hobbies,onChange:x,placeholder:"e.g., Football, Reading, Movies"})]})]}),d.jsxs("div",{className:"mt-6",children:[d.jsx(ct,{htmlFor:"bio",children:"Short Bio"}),d.jsx(QC,{id:"bio",name:"bio",value:c.bio,onChange:x,placeholder:"Tell potential roommates a little about yourself...",required:!0})]})]}),d.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[n&&!l&&d.jsx("button",{type:"button",onClick:a,className:"bg-gray-200 text-gray-800 font-bold py-2 px-6 rounded-full hover:bg-gray-300 transition-colors",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:y,className:"bg-unistay-yellow text-unistay-navy font-bold py-2 px-6 rounded-full hover:bg-yellow-400 transition-colors disabled:bg-yellow-400/70 disabled:cursor-not-allowed flex items-center justify-center min-w-[150px]",children:y?d.jsx(Tt,{color:"navy",size:"sm"}):n?"Save Changes":"Create Profile & Find Matches"})]})]})]})};function WC(n,e){if(!n||!e)return 0;let i=0;const a={gender:20,budget:25,university:20,lifestyle:25,interest:10},l=n.seekingGender==="Any"||n.seekingGender===e.gender,r=e.seekingGender==="Any"||e.seekingGender===n.gender;l&&r&&(i+=a.gender);const c=Math.abs(n.budget-e.budget),h=Math.max(n.budget,1),y=Math.max(0,1-c/h);i+=y*a.budget,n.universityId===e.universityId&&(i+=a.university);let g=0;const x=5;n.isSmoker===e.isSmoker&&g++,n.studySchedule===e.studySchedule?g++:(n.studySchedule==="Flexible"||e.studySchedule==="Flexible")&&(g+=.5);const b={Tidy:2,Average:1,Relaxed:0};Math.abs(b[n.cleanliness]-b[e.cleanliness])===0?g++:Math.abs(b[n.cleanliness]-b[e.cleanliness])===1&&(g+=.5);const w={Often:2,Sometimes:1,Rarely:0};Math.abs(w[n.guestFrequency]-w[e.guestFrequency])===0?g++:Math.abs(w[n.guestFrequency]-w[e.guestFrequency])===1&&(g+=.5),n.drinksAlcohol===e.drinksAlcohol?g++:(n.drinksAlcohol==="Rarely"||e.drinksAlcohol==="Rarely")&&(g+=.5),i+=g/x*a.lifestyle;let S=0;Math.abs(n.yearOfStudy-e.yearOfStudy)<=1&&(S+=5);const E=n.hobbies.toLowerCase().split(",").map(M=>M.trim()).filter(Boolean),C=e.hobbies.toLowerCase().split(",").map(M=>M.trim()).filter(Boolean),N=E.filter(M=>C.includes(M)).length;return S+=Math.min(5,N*2.5),i+=S/10*a.interest,Math.round(i)}const ZC=({profile:n,score:e,universityName:i})=>{const[a,l]=F.useState(!1),r=()=>{l(!0),setTimeout(()=>{l(!1)},2e3)};return d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden transition-all duration-300 h-full flex flex-col border-4 border-transparent hover:border-unistay-yellow",children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:n.imageUrl,alt:n.name,className:"h-56 w-full object-cover"}),d.jsxs("div",{className:"absolute top-3 right-3 bg-unistay-navy text-white rounded-full h-16 w-16 flex flex-col items-center justify-center font-bold shadow-lg",children:[d.jsxs("span",{className:"text-2xl",children:[e,"%"]}),d.jsx("span",{className:"text-xs",children:"Match"})]})]}),d.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[d.jsxs("h3",{className:"text-xl font-bold text-unistay-navy",children:[n.name,", ",n.age]}),d.jsxs("p",{className:"text-gray-500 text-sm",children:[i,"  ",n.course]}),d.jsx("p",{className:"text-gray-600 mt-3 text-sm flex-grow",children:n.bio}),d.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[d.jsx("span",{className:"bg-gray-200 text-gray-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:n.studySchedule}),d.jsx("span",{className:"bg-gray-200 text-gray-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:n.cleanliness}),d.jsx("span",{className:"bg-gray-200 text-gray-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:n.isSmoker?"Smoker":"Non-Smoker"})]})]}),d.jsx("div",{className:"p-4 bg-gray-50 border-t",children:d.jsx("button",{onClick:r,disabled:a,className:"w-full bg-unistay-navy hover:bg-opacity-90 text-white font-bold py-2 px-4 rounded-full transition-all duration-300 flex items-center justify-center disabled:bg-opacity-70",children:a?d.jsx(Tt,{color:"white",size:"sm"}):"Request to Connect"})})]})},eN=({userProfile:n,profiles:e,universities:i,onEditProfile:a})=>{const l=F.useMemo(()=>new Map(i.map(c=>[c.id,c.name])),[i]),r=F.useMemo(()=>n?e.filter(c=>c.id!==n.id).map(c=>({profile:c,score:WC(n,c)})).sort((c,h)=>h.score-c.score):[],[n,e]);return d.jsxs("div",{className:"animate-fade-in",children:[d.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-8 mb-8",children:d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-unistay-navy",children:"Your Top Roommate Matches"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Based on your profile, here are your most compatible roommates."})]}),d.jsx("button",{onClick:a,className:"bg-unistay-yellow text-unistay-navy font-bold py-2 px-6 rounded-full hover:bg-yellow-400 transition-colors flex-shrink-0",children:"Edit My Profile"})]})}),r.length>0?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.slice(0,9).map(({profile:c,score:h},y)=>d.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:`${y*100}ms`},children:d.jsx(ZC,{profile:c,score:h,universityName:l.get(c.universityId)||"Unknown University"})},c.id))}):d.jsxs("div",{className:"text-center py-16 bg-white rounded-lg shadow-md",children:[d.jsx("i",{className:"fas fa-users text-4xl text-gray-300 mb-4"}),d.jsx("h3",{className:"text-xl font-semibold text-unistay-navy",children:"No Matches Found Yet"}),d.jsx("p",{className:"text-gray-500 mt-2",children:"We couldn't find any compatible roommates right now. More students are signing up every day, so check back soon!"})]})]})},tN=({currentUser:n,currentUserProfile:e,onProfileUpdate:i,profiles:a,universities:l,onNavigateHome:r})=>{const[c,h]=F.useState(!1),y=!e||!e.contactNumber||!e.universityId||!e.course,g=y||c,x=async b=>{await i(b),h(!1)};return d.jsxs("div",{className:"bg-gray-100 min-h-screen",children:[d.jsx("header",{className:"bg-unistay-navy text-white shadow-lg sticky top-0 z-40",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20",children:[d.jsx("h1",{className:"text-3xl font-bold",children:"Find a Roommate"}),d.jsxs("button",{onClick:r,className:"font-semibold hover:text-unistay-yellow transition-colors flex items-center gap-2",children:[d.jsx("i",{className:"fas fa-arrow-left"}),"Back to Home"]})]})}),d.jsx("main",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 pt-24",children:g?d.jsx(XC,{profile:e,user:n,onProfileUpdate:x,onCancel:()=>h(!1),isProfileIncomplete:y}):d.jsx(eN,{userProfile:e,profiles:a,universities:l,onEditProfile:()=>h(!0)})})]})},nN=({news:n,onClose:e})=>{const i=F.useCallback(l=>{l.key==="Escape"&&e()},[e]);F.useEffect(()=>(document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}),[i]);const a=l=>{if(!n)return;const r=encodeURIComponent(window.location.href),c=encodeURIComponent(n.title),h={twitter:`https://twitter.com/intent/tweet?text=${c}&url=${r}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${r}`,linkedin:`https://www.linkedin.com/shareArticle?mini=true&url=${r}&title=${c}`,whatsapp:`https://api.whatsapp.com/send?text=${c}%20${r}`};window.open(h[l],"_blank","noopener,noreferrer")};return n?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative animate-scale-up",children:[d.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Close modal",children:d.jsx("i",{className:"fas fa-times text-xl"})}),d.jsx("div",{className:"w-full h-64 sm:h-80 relative",children:d.jsx("img",{src:n.imageUrl.replace("/100/100","/800/600"),alt:n.title,className:"w-full h-full object-cover"})}),d.jsxs("div",{className:"p-6 sm:p-8",children:[d.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 mb-4",children:[d.jsx("p",{children:n.timestamp?ri(n.timestamp):"Recently posted"}),d.jsxs("p",{children:["Source: ",n.source]})]}),d.jsx("h2",{className:"text-3xl font-bold text-unistay-navy mb-6",children:n.title}),d.jsx("div",{className:"prose max-w-none",children:d.jsx("p",{className:"text-gray-600 leading-relaxed whitespace-pre-line",children:n.description})}),d.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-500",children:"Share this article:"}),d.jsxs("div",{className:"flex gap-4 mt-2",children:[d.jsx("button",{onClick:()=>a("twitter"),className:"text-gray-600 hover:text-[#1DA1F2] transition-colors","aria-label":"Share on Twitter",children:d.jsx("i",{className:"fab fa-twitter"})}),d.jsx("button",{onClick:()=>a("facebook"),className:"text-gray-600 hover:text-[#4267B2] transition-colors","aria-label":"Share on Facebook",children:d.jsx("i",{className:"fab fa-facebook"})}),d.jsx("button",{onClick:()=>a("linkedin"),className:"text-gray-600 hover:text-[#0077b5] transition-colors","aria-label":"Share on LinkedIn",children:d.jsx("i",{className:"fab fa-linkedin"})}),d.jsx("button",{onClick:()=>a("whatsapp"),className:"text-gray-600 hover:text-[#25D366] transition-colors","aria-label":"Share on WhatsApp",children:d.jsx("i",{className:"fab fa-whatsapp"})})]})]}),d.jsxs("button",{onClick:e,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-2 px-6 rounded-lg transition-colors flex items-center gap-2","aria-label":"Close modal",children:[d.jsx("i",{className:"fas fa-times"}),"Close"]})]})})]})]})}):null},iN=({news:n,onNavigateHome:e})=>{const[i,a]=F.useState(null),l=_y(n),r=l.find(h=>h.featured)||(l.length>0?l[0]:null),c=l.filter(h=>h.id!==r?.id);return d.jsxs("div",{className:"bg-gray-50 min-h-screen flex flex-col",children:[d.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20",children:[d.jsx("h1",{className:"text-3xl font-bold text-unistay-navy",children:"UniStay Blog"}),d.jsxs("button",{onClick:e,className:"font-semibold text-unistay-navy hover:text-unistay-yellow transition-colors flex items-center gap-2",children:[d.jsx("i",{className:"fas fa-arrow-left"}),"Back to Home"]})]})}),d.jsxs("main",{className:"flex-grow max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 w-full pt-24",children:[r&&d.jsx("section",{className:`mb-12 group animate-fade-in ${r.featured?"bg-unistay-navy text-white p-8 rounded-2xl":""}`,children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[d.jsx("div",{className:"rounded-2xl overflow-hidden shadow-lg group-hover:shadow-2xl transition-shadow duration-300",children:d.jsx("img",{src:r.imageUrl.replace("/100/100","/600/400"),alt:r.title,className:"w-full h-full object-cover"})}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("p",{className:`font-semibold ${r.featured,"text-unistay-yellow"}`,children:r.featured?"Featured Story":"Latest Article"}),r.featured&&d.jsxs("span",{className:"bg-unistay-yellow text-unistay-navy text-xs px-2 py-1 rounded-full",children:[d.jsx("i",{className:"fas fa-star mr-1"}),"Featured"]})]}),d.jsx("h2",{className:"text-4xl font-extrabold text-unistay-navy mb-4",children:r.title}),d.jsxs("div",{className:`flex items-center gap-4 text-sm ${r.featured?"text-gray-300":"text-gray-500"} mb-6`,children:[d.jsx("p",{children:r.timestamp?ri(r.timestamp):"Recently posted"}),d.jsxs("p",{children:["Source: ",r.source]})]}),d.jsxs("button",{onClick:()=>a(r),className:"mt-6 bg-unistay-navy text-white font-bold py-3 px-8 rounded-full hover:bg-opacity-90 transition-all transform hover:scale-105 flex items-center gap-2",children:["Read Full Article ",d.jsx("i",{className:"fas fa-arrow-right"})]})]})]})}),d.jsxs("section",{className:"animate-fade-in-up",style:{animationDelay:"200ms"},children:[d.jsx("h3",{className:"text-2xl font-bold text-unistay-navy mb-6 border-b pb-2",children:"Latest News"}),c.length>0?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:c.map((h,y)=>d.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden group transform hover:-translate-y-2 transition-transform duration-300 flex flex-col",style:{animation:"fade-in-up 0.5s ease-out forwards",animationDelay:`${y*100}ms`},children:[d.jsx("img",{src:h.imageUrl.replace("/100/100","/400/300"),alt:h.title,className:"h-48 w-full object-cover"}),d.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[d.jsx("h4",{className:"text-xl font-bold text-unistay-navy flex-grow group-hover:text-unistay-yellow transition-colors",children:h.title}),d.jsxs("div",{className:"flex justify-between items-center mt-2 mb-4",children:[d.jsx("p",{className:"text-xs text-gray-400",children:h.timestamp?ri(h.timestamp):"Recently posted"}),d.jsxs("p",{className:"text-xs text-gray-400",children:["Source: ",h.source]})]}),d.jsx("div",{className:"pt-4 border-t border-gray-100 flex justify-end",children:d.jsxs("button",{onClick:()=>a(h),className:"text-sm font-semibold text-unistay-yellow hover:text-unistay-navy transition-colors flex items-center gap-1",children:["Read More ",d.jsx("i",{className:"fas fa-arrow-right"})]})})]})]},h.id))}):d.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-md",children:[d.jsx("i",{className:"fas fa-newspaper text-4xl text-gray-300 mb-4"}),d.jsx("h3",{className:"text-xl font-semibold text-unistay-navy",children:"No More News"}),d.jsx("p",{className:"text-gray-500 mt-2",children:"Check back later for more updates!"})]})]})]}),d.jsx(nN,{news:i,onClose:()=>a(null)})]})},sN=({event:n,onClose:e})=>{const i=Array.isArray(n.contacts)?n.contacts:[];return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative animate-scale-up",children:[d.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white hover:text-unistay-yellow transition-colors z-10 bg-unistay-navy rounded-full w-10 h-10 flex items-center justify-center","aria-label":"Close modal",children:d.jsx("i",{className:"fas fa-times text-xl"})}),d.jsxs("div",{className:"w-full h-96 relative",children:[d.jsx("img",{src:n.imageUrl,alt:n.title,className:"w-full h-full object-cover"}),d.jsxs("div",{className:"absolute top-6 left-6 bg-unistay-yellow text-unistay-navy text-center rounded-xl px-4 py-2 shadow-lg",children:[d.jsx("p",{className:"font-extrabold text-3xl",children:n.day}),d.jsx("p",{className:"font-bold text-lg leading-tight",children:n.month})]})]}),d.jsxs("div",{className:"p-8",children:[d.jsx("h2",{className:"text-3xl font-bold text-unistay-navy mb-4",children:n.title}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[d.jsx("i",{className:"fas fa-map-marker-alt text-unistay-yellow text-xl w-6"}),d.jsx("span",{children:n.location})]}),d.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[d.jsx("i",{className:"fas fa-calendar text-unistay-yellow text-xl w-6"}),d.jsx("span",{children:n.date})]}),n.time&&d.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[d.jsx("i",{className:"fas fa-clock text-unistay-yellow text-xl w-6"}),d.jsx("span",{children:n.time})]}),d.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[d.jsx("i",{className:"fas fa-ticket-alt text-unistay-yellow text-xl w-6"}),d.jsx("span",{children:n.price||"Free Entry"})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"font-bold text-lg text-unistay-navy",children:"Contact Information"}),d.jsxs("div",{className:"space-y-3 text-gray-600",children:[i.length>0&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"font-medium text-unistay-navy",children:"Contact Persons:"}),i.map((a,l)=>d.jsxs("div",{className:"flex items-center gap-3 ml-4",children:[d.jsx("i",{className:"fas fa-user text-unistay-yellow text-lg w-5"}),d.jsx("span",{children:a})]},l))]}),n.phone&&d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("i",{className:"fas fa-phone text-unistay-yellow text-xl w-6"}),d.jsx("a",{href:`tel:${n.phone}`,className:"hover:text-unistay-navy transition-colors",children:n.phone})]}),n.email&&d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("i",{className:"fas fa-envelope text-unistay-yellow text-xl w-6"}),d.jsx("a",{href:`mailto:${n.email}`,className:"hover:text-unistay-navy transition-colors",children:n.email})]}),i.length===0&&!n.phone&&!n.email&&d.jsx("p",{className:"text-gray-500 italic",children:"No contact information provided"})]})]})]}),n.description?d.jsxs("div",{className:"border-t pt-8",children:[d.jsx("h3",{className:"font-bold text-lg text-unistay-navy mb-4",children:"About the Event"}),d.jsx("p",{className:"text-gray-600 whitespace-pre-line leading-relaxed",children:n.description})]}):d.jsx("div",{className:"border-t pt-8",children:d.jsx("p",{className:"text-gray-500 italic",children:"No description provided"})}),d.jsxs("div",{className:"flex flex-wrap gap-4 mt-8 pt-8 border-t",children:[n.phone&&d.jsxs("a",{href:`tel:${n.phone}`,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-opacity-90 transition-colors flex items-center gap-2",children:[d.jsx("i",{className:"fas fa-phone"}),"Call Now"]}),n.email&&d.jsxs("a",{href:`mailto:${n.email}?subject=Regarding: ${n.title}`,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-opacity-90 transition-colors flex items-center gap-2",children:[d.jsx("i",{className:"fas fa-envelope"}),"Send Email"]}),n.price&&n.price!=="Free Entry"&&d.jsxs("div",{className:"bg-unistay-yellow text-unistay-navy px-6 py-3 rounded-lg flex items-center gap-2",children:[d.jsx("i",{className:"fas fa-ticket-alt"}),"Entry Fee: ",n.price]}),d.jsx("button",{onClick:e,className:"bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors ml-auto",children:"Close"})]})]})]})})},aN=({events:n,onNavigateHome:e})=>{const[i,a]=F.useState(null);return d.jsxs("div",{className:"bg-gray-100 min-h-screen",children:[d.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20",children:[d.jsx("h1",{className:"text-3xl font-bold text-unistay-navy",children:"Campus Events"}),d.jsxs("button",{onClick:e,className:"font-semibold text-unistay-navy hover:text-unistay-yellow transition-colors flex items-center gap-2",children:[d.jsx("i",{className:"fas fa-arrow-left"}),"Back to Home"]})]})}),d.jsx("main",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 pt-24",children:n.length>0?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((l,r)=>d.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden group transform hover:-translate-y-2 transition-transform duration-300",style:{animation:"fade-in-up 0.5s ease-out forwards",animationDelay:`${r*100}ms`},children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:l.imageUrl,alt:l.title,className:"h-56 w-full object-cover"}),d.jsxs("div",{className:"absolute top-4 left-4 bg-unistay-yellow text-unistay-navy text-center rounded-lg px-4 py-2 shadow-lg",children:[d.jsx("p",{className:"font-extrabold text-2xl",children:l.day}),d.jsx("p",{className:"font-bold text-sm leading-tight",children:l.month})]})]}),d.jsxs("div",{className:"p-5",children:[d.jsx("h3",{className:"font-bold text-xl text-unistay-navy mb-2 group-hover:text-unistay-yellow transition-colors",children:l.title}),d.jsxs("p",{className:"text-sm text-gray-600",children:[d.jsx("i",{className:"fas fa-calendar-alt text-gray-400 mr-2"}),l.date]}),d.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[d.jsx("i",{className:"fas fa-map-marker-alt text-gray-400 mr-2"}),l.location]}),d.jsx("button",{onClick:()=>a(l),className:"mt-4 w-full bg-unistay-navy text-white font-semibold py-2 rounded-lg hover:bg-opacity-80 transition-all transform hover:scale-105",children:"More Info"})]})]},l.id))}):d.jsxs("div",{className:"text-center py-16 bg-white rounded-lg shadow-md",children:[d.jsx("i",{className:"fas fa-calendar-times text-4xl text-gray-300 mb-4"}),d.jsx("h3",{className:"text-xl font-semibold text-unistay-navy",children:"No Upcoming Events"}),d.jsx("p",{className:"text-gray-500 mt-2",children:"Please check back soon for new events!"})]})}),i&&d.jsx(sN,{event:i,onClose:()=>a(null)})]})},oN=({job:n,onClose:e})=>(F.useEffect(()=>{const i=a=>{a.key==="Escape"&&e()};return window.addEventListener("keydown",i),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",i),document.body.style.overflow="unset"}},[e]),d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-[100] flex items-center justify-center p-4 animate-fade-in",onClick:e,children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] flex flex-col animate-slide-in-down",onClick:i=>i.stopPropagation(),children:[d.jsxs("div",{className:"p-6 border-b border-gray-200",children:[d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-extrabold text-unistay-navy",children:n.title}),d.jsxs("p",{className:"text-gray-600 mt-1",children:[n.company,"  ",d.jsx("span",{className:"text-gray-500",children:n.location})]})]}),d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-unistay-navy transition-colors h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100 flex-shrink-0 ml-4","aria-label":"Close modal",children:d.jsx("i",{className:"fas fa-times text-xl"})})]}),d.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[d.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-1 rounded-full",children:n.type}),d.jsxs("span",{className:"bg-red-100 text-red-800 text-xs font-semibold px-2.5 py-1 rounded-full",children:["Deadline: ",n.deadline]})]})]}),d.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto no-scrollbar flex-grow",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-unistay-navy mb-2",children:"Job Description"}),d.jsx("p",{className:"text-gray-700 leading-relaxed",children:n.description})]}),n.responsibilities&&n.responsibilities.length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-unistay-navy mb-2",children:"Responsibilities"}),d.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:n.responsibilities.map((i,a)=>d.jsx("li",{children:i},a))})]}),n.qualifications&&n.qualifications.length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-unistay-navy mb-2",children:"Qualifications"}),d.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:n.qualifications.map((i,a)=>d.jsx("li",{children:i},a))})]})]}),d.jsx("div",{className:"p-6 border-t border-gray-200 bg-white",children:d.jsx("a",{href:n.howToApply,target:"_blank",rel:"noopener noreferrer",className:"w-full block text-center bg-unistay-navy hover:bg-opacity-90 text-white font-bold text-lg py-3 px-8 rounded-full transition-all duration-300 transform hover:scale-105",children:"Apply Now"})})]})})),lN=({jobs:n,onNavigateHome:e})=>{const[i,a]=F.useState(null),l=c=>{a(c)},r=()=>{a(null)};return d.jsxs("div",{className:"bg-gray-100 min-h-screen",children:[d.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20",children:[d.jsx("h1",{className:"text-3xl font-bold text-unistay-navy",children:"Jobs & Internships"}),d.jsxs("button",{onClick:e,className:"font-semibold text-unistay-navy hover:text-unistay-yellow transition-colors flex items-center gap-2",children:[d.jsx("i",{className:"fas fa-arrow-left"}),"Back to Home"]})]})}),d.jsx("main",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 pt-24",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-unistay-navy mb-6",children:"Current Opportunities"}),n.length>0?d.jsx("div",{className:"space-y-6",children:n.map((c,h)=>d.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 p-4 border rounded-lg hover:shadow-md hover:border-unistay-yellow transition-all duration-300",style:{animation:"fade-in-up 0.5s ease-out forwards",animationDelay:`${h*100}ms`},children:[d.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:d.jsx("img",{src:c.imageUrl,alt:c.company,className:"w-16 h-16 object-contain"})}),d.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[d.jsx("p",{className:"font-bold text-lg text-unistay-navy",children:c.title}),d.jsx("p",{className:"text-md text-gray-700",children:c.company})]}),d.jsxs("div",{className:"text-center sm:text-right flex-shrink-0",children:[d.jsx("p",{className:"text-sm text-gray-500",children:"Apply by"}),d.jsx("p",{className:"font-semibold text-unistay-navy text-lg",children:c.deadline})]}),d.jsx("button",{onClick:()=>l(c),className:"w-full sm:w-auto bg-unistay-navy text-white font-semibold py-2 px-6 rounded-lg hover:bg-opacity-80 transition-all flex-shrink-0 transform hover:scale-105",children:"Details"})]},c.id))}):d.jsxs("div",{className:"text-center py-16",children:[d.jsx("i",{className:"fas fa-briefcase text-4xl text-gray-300 mb-4"}),d.jsx("h3",{className:"text-xl font-semibold text-unistay-navy",children:"No Job Openings"}),d.jsx("p",{className:"text-gray-500 mt-2",children:"New opportunities are posted regularly. Check back soon!"})]})]})}),i&&d.jsx(oN,{job:i,onClose:r})]})};var Oc=function(n,e){return Oc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},Oc(n,e)};function Ky(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Oc(n,e);function i(){this.constructor=n}n.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var Pl=function(){return Pl=Object.assign||function(e){for(var i,a=1,l=arguments.length;a<l;a++){i=arguments[a];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Pl.apply(this,arguments)};function zs(n,e){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.indexOf(a)<0&&(i[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(n);l<a.length;l++)e.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(n,a[l])&&(i[a[l]]=n[a[l]]);return i}function Qy(n,e,i,a){var l=arguments.length,r=l<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,i):a,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,i,a);else for(var h=n.length-1;h>=0;h--)(c=n[h])&&(r=(l<3?c(r):l>3?c(e,i,r):c(e,i))||r);return l>3&&r&&Object.defineProperty(e,i,r),r}function Xy(n,e){return function(i,a){e(i,a,n)}}function Wy(n,e,i,a,l,r){function c(M){if(M!==void 0&&typeof M!="function")throw new TypeError("Function expected");return M}for(var h=a.kind,y=h==="getter"?"get":h==="setter"?"set":"value",g=!e&&n?a.static?n:n.prototype:null,x=e||(g?Object.getOwnPropertyDescriptor(g,a.name):{}),b,w=!1,S=i.length-1;S>=0;S--){var E={};for(var C in a)E[C]=C==="access"?{}:a[C];for(var C in a.access)E.access[C]=a.access[C];E.addInitializer=function(M){if(w)throw new TypeError("Cannot add initializers after decoration has completed");r.push(c(M||null))};var N=(0,i[S])(h==="accessor"?{get:x.get,set:x.set}:x[y],E);if(h==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(b=c(N.get))&&(x.get=b),(b=c(N.set))&&(x.set=b),(b=c(N.init))&&l.unshift(b)}else(b=c(N))&&(h==="field"?l.unshift(b):x[y]=b)}g&&Object.defineProperty(g,a.name,x),w=!0}function Zy(n,e,i){for(var a=arguments.length>2,l=0;l<e.length;l++)i=a?e[l].call(n,i):e[l].call(n);return a?i:void 0}function ev(n){return typeof n=="symbol"?n:"".concat(n)}function tv(n,e,i){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:i?"".concat(i," ",e):e})}function nv(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Z(n,e,i,a){function l(r){return r instanceof i?r:new i(function(c){c(r)})}return new(i||(i=Promise))(function(r,c){function h(x){try{g(a.next(x))}catch(b){c(b)}}function y(x){try{g(a.throw(x))}catch(b){c(b)}}function g(x){x.done?r(x.value):l(x.value).then(h,y)}g((a=a.apply(n,e||[])).next())})}function iv(n,e){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},a,l,r,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=h(0),c.throw=h(1),c.return=h(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(x){return y([g,x])}}function y(g){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(i=0)),i;)try{if(a=1,l&&(r=g[0]&2?l.return:g[0]?l.throw||((r=l.return)&&r.call(l),0):l.next)&&!(r=r.call(l,g[1])).done)return r;switch(l=0,r&&(g=[g[0]&2,r.value]),g[0]){case 0:case 1:r=g;break;case 4:return i.label++,{value:g[1],done:!1};case 5:i.label++,l=g[1],g=[0];continue;case 7:g=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(g[0]===6||g[0]===2)){i=0;continue}if(g[0]===3&&(!r||g[1]>r[0]&&g[1]<r[3])){i.label=g[1];break}if(g[0]===6&&i.label<r[1]){i.label=r[1],r=g;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(g);break}r[2]&&i.ops.pop(),i.trys.pop();continue}g=e.call(n,i)}catch(x){g=[6,x],l=0}finally{a=r=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var Yl=Object.create?(function(n,e,i,a){a===void 0&&(a=i);var l=Object.getOwnPropertyDescriptor(e,i);(!l||("get"in l?!e.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(n,a,l)}):(function(n,e,i,a){a===void 0&&(a=i),n[a]=e[i]});function sv(n,e){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&Yl(e,n,i)}function ql(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],a=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nd(n,e){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),l,r=[],c;try{for(;(e===void 0||e-- >0)&&!(l=a.next()).done;)r.push(l.value)}catch(h){c={error:h}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(c)throw c.error}}return r}function av(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(nd(arguments[e]));return n}function ov(){for(var n=0,e=0,i=arguments.length;e<i;e++)n+=arguments[e].length;for(var a=Array(n),l=0,e=0;e<i;e++)for(var r=arguments[e],c=0,h=r.length;c<h;c++,l++)a[l]=r[c];return a}function lv(n,e,i){if(i||arguments.length===2)for(var a=0,l=e.length,r;a<l;a++)(r||!(a in e))&&(r||(r=Array.prototype.slice.call(e,0,a)),r[a]=e[a]);return n.concat(r||Array.prototype.slice.call(e))}function Ps(n){return this instanceof Ps?(this.v=n,this):new Ps(n)}function rv(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(n,e||[]),l,r=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),l[Symbol.asyncIterator]=function(){return this},l;function c(S){return function(E){return Promise.resolve(E).then(S,b)}}function h(S,E){a[S]&&(l[S]=function(C){return new Promise(function(N,M){r.push([S,C,N,M])>1||y(S,C)})},E&&(l[S]=E(l[S])))}function y(S,E){try{g(a[S](E))}catch(C){w(r[0][3],C)}}function g(S){S.value instanceof Ps?Promise.resolve(S.value.v).then(x,b):w(r[0][2],S)}function x(S){y("next",S)}function b(S){y("throw",S)}function w(S,E){S(E),r.shift(),r.length&&y(r[0][0],r[0][1])}}function uv(n){var e,i;return e={},a("next"),a("throw",function(l){throw l}),a("return"),e[Symbol.iterator]=function(){return this},e;function a(l,r){e[l]=n[l]?function(c){return(i=!i)?{value:Ps(n[l](c)),done:!1}:r?r(c):c}:r}}function cv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof ql=="function"?ql(n):n[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(r){i[r]=n[r]&&function(c){return new Promise(function(h,y){c=n[r](c),l(h,y,c.done,c.value)})}}function l(r,c,h,y){Promise.resolve(y).then(function(g){r({value:g,done:h})},c)}}function dv(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var rN=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},Lc=function(n){return Lc=Object.getOwnPropertyNames||function(e){var i=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[i.length]=a);return i},Lc(n)};function fv(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var i=Lc(n),a=0;a<i.length;a++)i[a]!=="default"&&Yl(e,n,i[a]);return rN(e,n),e}function hv(n){return n&&n.__esModule?n:{default:n}}function mv(n,e,i,a){if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?a:i==="a"?a.call(n):a?a.value:e.get(n)}function pv(n,e,i,a,l){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!l:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?l.call(n,i):l?l.value=i:e.set(n,i),i}function gv(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function yv(n,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var a,l;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");a=e[Symbol.asyncDispose]}if(a===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");a=e[Symbol.dispose],i&&(l=a)}if(typeof a!="function")throw new TypeError("Object not disposable.");l&&(a=function(){try{l.call(this)}catch(r){return Promise.reject(r)}}),n.stack.push({value:e,dispose:a,async:i})}else i&&n.stack.push({async:!0});return e}var uN=typeof SuppressedError=="function"?SuppressedError:function(n,e,i){var a=new Error(i);return a.name="SuppressedError",a.error=n,a.suppressed=e,a};function vv(n){function e(r){n.error=n.hasError?new uN(r,n.error,"An error was suppressed during disposal."):r,n.hasError=!0}var i,a=0;function l(){for(;i=n.stack.pop();)try{if(!i.async&&a===1)return a=0,n.stack.push(i),Promise.resolve().then(l);if(i.dispose){var r=i.dispose.call(i.value);if(i.async)return a|=2,Promise.resolve(r).then(l,function(c){return e(c),l()})}else a|=1}catch(c){e(c)}if(a===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return l()}function xv(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(i,a,l,r,c){return a?e?".jsx":".js":l&&(!r||!c)?i:l+r+"."+c.toLowerCase()+"js"}):n}const cN={__extends:Ky,__assign:Pl,__rest:zs,__decorate:Qy,__param:Xy,__esDecorate:Wy,__runInitializers:Zy,__propKey:ev,__setFunctionName:tv,__metadata:nv,__awaiter:Z,__generator:iv,__createBinding:Yl,__exportStar:sv,__values:ql,__read:nd,__spread:av,__spreadArrays:ov,__spreadArray:lv,__await:Ps,__asyncGenerator:rv,__asyncDelegator:uv,__asyncValues:cv,__makeTemplateObject:dv,__importStar:fv,__importDefault:hv,__classPrivateFieldGet:mv,__classPrivateFieldSet:pv,__classPrivateFieldIn:gv,__addDisposableResource:yv,__disposeResources:vv,__rewriteRelativeImportExtension:xv},dN=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:yv,get __assign(){return Pl},__asyncDelegator:uv,__asyncGenerator:rv,__asyncValues:cv,__await:Ps,__awaiter:Z,__classPrivateFieldGet:mv,__classPrivateFieldIn:gv,__classPrivateFieldSet:pv,__createBinding:Yl,__decorate:Qy,__disposeResources:vv,__esDecorate:Wy,__exportStar:sv,__extends:Ky,__generator:iv,__importDefault:hv,__importStar:fv,__makeTemplateObject:dv,__metadata:nv,__param:Xy,__propKey:ev,__read:nd,__rest:zs,__rewriteRelativeImportExtension:xv,__runInitializers:Zy,__setFunctionName:tv,__spread:av,__spreadArray:lv,__spreadArrays:ov,__values:ql,default:cN},Symbol.toStringTag,{value:"Module"})),fN="modulepreload",hN=function(n){return"/"+n},Bg={},Fs=function(e,i,a){let l=Promise.resolve();if(i&&i.length>0){let c=function(g){return Promise.all(g.map(x=>Promise.resolve(x).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),y=h?.nonce||h?.getAttribute("nonce");l=c(i.map(g=>{if(g=hN(g),g in Bg)return;Bg[g]=!0;const x=g.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${b}`))return;const w=document.createElement("link");if(w.rel=x?"stylesheet":fN,x||(w.as="script"),w.crossOrigin="",w.href=g,y&&w.setAttribute("nonce",y),document.head.appendChild(w),x)return new Promise((S,E)=>{w.addEventListener("load",S),w.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${g}`)))})}))}function r(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return l.then(c=>{for(const h of c||[])h.status==="rejected"&&r(h.reason);return e().catch(r)})},mN=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...i)=>Fs(async()=>{const{default:a}=await Promise.resolve().then(()=>qi);return{default:a}},void 0).then(({default:a})=>a(...i)):e=fetch,(...i)=>e(...i)};class id extends Error{constructor(e,i="FunctionsError",a){super(e),this.name=i,this.context=a}}class Vg extends id{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Hg extends id{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Gg extends id{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Pc;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Pc||(Pc={}));class pN{constructor(e,{headers:i={},customFetch:a,region:l=Pc.Any}={}){this.url=e,this.headers=i,this.region=l,this.fetch=mN(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Z(this,arguments,void 0,function*(i,a={}){var l;try{const{headers:r,method:c,body:h,signal:y}=a;let g={},{region:x}=a;x||(x=this.region);const b=new URL(`${this.url}/${i}`);x&&x!=="any"&&(g["x-region"]=x,b.searchParams.set("forceFunctionRegion",x));let w;h&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",w=h):typeof h=="string"?(g["Content-Type"]="text/plain",w=h):typeof FormData<"u"&&h instanceof FormData?w=h:(g["Content-Type"]="application/json",w=JSON.stringify(h)):w=h;const S=yield this.fetch(b.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),r),body:w,signal:y}).catch(M=>{throw M.name==="AbortError"?M:new Vg(M)}),E=S.headers.get("x-relay-error");if(E&&E==="true")throw new Hg(S);if(!S.ok)throw new Gg(S);let C=((l=S.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),N;return C==="application/json"?N=yield S.json():C==="application/octet-stream"||C==="application/pdf"?N=yield S.blob():C==="text/event-stream"?N=S:C==="multipart/form-data"?N=yield S.formData():N=yield S.text(),{data:N,error:null,response:S}}catch(r){return r instanceof Error&&r.name==="AbortError"?{data:null,error:new Vg(r)}:{data:null,error:r,response:r instanceof Gg||r instanceof Hg?r.context:void 0}}})}}var ft={};const $s=vy(dN);var _l={},Sl={},Tl={},El={},Cl={},gN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},qs=gN();const yN=qs.fetch,bv=qs.fetch.bind(qs),wv=qs.Headers,vN=qs.Request,xN=qs.Response,qi=Object.freeze(Object.defineProperty({__proto__:null,Headers:wv,Request:vN,Response:xN,default:bv,fetch:yN},Symbol.toStringTag,{value:"Module"})),bN=vy(qi);var Nl={},zg;function _v(){if(zg)return Nl;zg=1,Object.defineProperty(Nl,"__esModule",{value:!0});class n extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return Nl.default=n,Nl}var Fg;function Sv(){if(Fg)return Cl;Fg=1,Object.defineProperty(Cl,"__esModule",{value:!0});const n=$s,e=n.__importDefault(bN),i=n.__importDefault(_v());class a{constructor(r){var c,h;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(c=r.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=r.signal,this.isMaybeSingle=(h=r.isMaybeSingle)!==null&&h!==void 0?h:!1,r.fetch?this.fetch=r.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,c){return this.headers=new Headers(this.headers),this.headers.set(r,c),this}then(r,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let y=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var x,b,w,S;let E=null,C=null,N=null,M=g.status,D=g.statusText;if(g.ok){if(this.method!=="HEAD"){const L=await g.text();L===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?C=L:C=JSON.parse(L))}const q=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),z=(w=g.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");q&&z&&z.length>1&&(N=parseInt(z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(E={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,N=null,M=406,D="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const q=await g.text();try{E=JSON.parse(q),Array.isArray(E)&&g.status===404&&(C=[],E=null,M=200,D="OK")}catch{g.status===404&&q===""?(M=204,D="No Content"):E={message:q}}if(E&&this.isMaybeSingle&&(!((S=E?.details)===null||S===void 0)&&S.includes("0 rows"))&&(E=null,M=200,D="OK"),E&&this.shouldThrowOnError)throw new i.default(E)}return{error:E,data:C,count:N,status:M,statusText:D}});return this.shouldThrowOnError||(y=y.catch(g=>{var x,b,w;return{error:{message:`${(x=g?.name)!==null&&x!==void 0?x:"FetchError"}: ${g?.message}`,details:`${(b=g?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(w=g?.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),y.then(r,c)}returns(){return this}overrideTypes(){return this}}return Cl.default=a,Cl}var $g;function Tv(){if($g)return El;$g=1,Object.defineProperty(El,"__esModule",{value:!0});const e=$s.__importDefault(Sv());class i extends e.default{select(l){let r=!1;const c=(l??"*").split("").map(h=>/\s/.test(h)&&!r?"":(h==='"'&&(r=!r),h)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:r=!0,nullsFirst:c,foreignTable:h,referencedTable:y=h}={}){const g=y?`${y}.order`:"order",x=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${x?`${x},`:""}${l}.${r?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:r,referencedTable:c=r}={}){const h=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(h,`${l}`),this}range(l,r,{foreignTable:c,referencedTable:h=c}={}){const y=typeof h>"u"?"offset":`${h}.offset`,g=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(y,`${l}`),this.url.searchParams.set(g,`${r-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:r=!1,settings:c=!1,buffers:h=!1,wal:y=!1,format:g="text"}={}){var x;const b=[l?"analyze":null,r?"verbose":null,c?"settings":null,h?"buffers":null,y?"wal":null].filter(Boolean).join("|"),w=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${w}"; options=${b};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return El.default=i,El}var Jg;function sd(){if(Jg)return Tl;Jg=1,Object.defineProperty(Tl,"__esModule",{value:!0});const e=$s.__importDefault(Tv());class i extends e.default{eq(l,r){return this.url.searchParams.append(l,`eq.${r}`),this}neq(l,r){return this.url.searchParams.append(l,`neq.${r}`),this}gt(l,r){return this.url.searchParams.append(l,`gt.${r}`),this}gte(l,r){return this.url.searchParams.append(l,`gte.${r}`),this}lt(l,r){return this.url.searchParams.append(l,`lt.${r}`),this}lte(l,r){return this.url.searchParams.append(l,`lte.${r}`),this}like(l,r){return this.url.searchParams.append(l,`like.${r}`),this}likeAllOf(l,r){return this.url.searchParams.append(l,`like(all).{${r.join(",")}}`),this}likeAnyOf(l,r){return this.url.searchParams.append(l,`like(any).{${r.join(",")}}`),this}ilike(l,r){return this.url.searchParams.append(l,`ilike.${r}`),this}ilikeAllOf(l,r){return this.url.searchParams.append(l,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(l,r){return this.url.searchParams.append(l,`ilike(any).{${r.join(",")}}`),this}is(l,r){return this.url.searchParams.append(l,`is.${r}`),this}in(l,r){const c=Array.from(new Set(r)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(l,`in.(${c})`),this}contains(l,r){return typeof r=="string"?this.url.searchParams.append(l,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(l,`cs.{${r.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(r)}`),this}containedBy(l,r){return typeof r=="string"?this.url.searchParams.append(l,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(l,`cd.{${r.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(r)}`),this}rangeGt(l,r){return this.url.searchParams.append(l,`sr.${r}`),this}rangeGte(l,r){return this.url.searchParams.append(l,`nxl.${r}`),this}rangeLt(l,r){return this.url.searchParams.append(l,`sl.${r}`),this}rangeLte(l,r){return this.url.searchParams.append(l,`nxr.${r}`),this}rangeAdjacent(l,r){return this.url.searchParams.append(l,`adj.${r}`),this}overlaps(l,r){return typeof r=="string"?this.url.searchParams.append(l,`ov.${r}`):this.url.searchParams.append(l,`ov.{${r.join(",")}}`),this}textSearch(l,r,{config:c,type:h}={}){let y="";h==="plain"?y="pl":h==="phrase"?y="ph":h==="websearch"&&(y="w");const g=c===void 0?"":`(${c})`;return this.url.searchParams.append(l,`${y}fts${g}.${r}`),this}match(l){return Object.entries(l).forEach(([r,c])=>{this.url.searchParams.append(r,`eq.${c}`)}),this}not(l,r,c){return this.url.searchParams.append(l,`not.${r}.${c}`),this}or(l,{foreignTable:r,referencedTable:c=r}={}){const h=c?`${c}.or`:"or";return this.url.searchParams.append(h,`(${l})`),this}filter(l,r,c){return this.url.searchParams.append(l,`${r}.${c}`),this}}return Tl.default=i,Tl}var Yg;function Ev(){if(Yg)return Sl;Yg=1,Object.defineProperty(Sl,"__esModule",{value:!0});const e=$s.__importDefault(sd());class i{constructor(l,{headers:r={},schema:c,fetch:h}){this.url=l,this.headers=new Headers(r),this.schema=c,this.fetch=h}select(l,r){const{head:c=!1,count:h}=r??{},y=c?"HEAD":"GET";let g=!1;const x=(l??"*").split("").map(b=>/\s/.test(b)&&!g?"":(b==='"'&&(g=!g),b)).join("");return this.url.searchParams.set("select",x),h&&this.headers.append("Prefer",`count=${h}`),new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:r,defaultToNull:c=!0}={}){var h;const y="POST";if(r&&this.headers.append("Prefer",`count=${r}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const g=l.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(g.length>0){const x=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(l,{onConflict:r,ignoreDuplicates:c=!1,count:h,defaultToNull:y=!0}={}){var g;const x="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),h&&this.headers.append("Prefer",`count=${h}`),y||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const b=l.reduce((w,S)=>w.concat(Object.keys(S)),[]);if(b.length>0){const w=[...new Set(b)].map(S=>`"${S}"`);this.url.searchParams.set("columns",w.join(","))}}return new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(l,{count:r}={}){var c;const h="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:l}={}){var r;const c="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}}return Sl.default=i,Sl}var Kg;function wN(){if(Kg)return _l;Kg=1,Object.defineProperty(_l,"__esModule",{value:!0});const n=$s,e=n.__importDefault(Ev()),i=n.__importDefault(sd());class a{constructor(r,{headers:c={},schema:h,fetch:y}={}){this.url=r,this.headers=new Headers(c),this.schemaName=h,this.fetch=y}from(r){const c=new URL(`${this.url}/${r}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new a(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,c={},{head:h=!1,get:y=!1,count:g}={}){var x;let b;const w=new URL(`${this.url}/rpc/${r}`);let S;h||y?(b=h?"HEAD":"GET",Object.entries(c).filter(([C,N])=>N!==void 0).map(([C,N])=>[C,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([C,N])=>{w.searchParams.append(C,N)})):(b="POST",S=c);const E=new Headers(this.headers);return g&&E.set("Prefer",`count=${g}`),new i.default({method:b,url:w,headers:E,schema:this.schemaName,body:S,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return _l.default=a,_l}var Qg;function _N(){if(Qg)return ft;Qg=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.PostgrestError=ft.PostgrestBuilder=ft.PostgrestTransformBuilder=ft.PostgrestFilterBuilder=ft.PostgrestQueryBuilder=ft.PostgrestClient=void 0;const n=$s,e=n.__importDefault(wN());ft.PostgrestClient=e.default;const i=n.__importDefault(Ev());ft.PostgrestQueryBuilder=i.default;const a=n.__importDefault(sd());ft.PostgrestFilterBuilder=a.default;const l=n.__importDefault(Tv());ft.PostgrestTransformBuilder=l.default;const r=n.__importDefault(Sv());ft.PostgrestBuilder=r.default;const c=n.__importDefault(_v());return ft.PostgrestError=c.default,ft.default={PostgrestClient:e.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:r.default,PostgrestError:c.default},ft}var SN=_N();const TN=Kc(SN),{PostgrestClient:EN,PostgrestQueryBuilder:sR,PostgrestFilterBuilder:aR,PostgrestTransformBuilder:oR,PostgrestBuilder:lR,PostgrestError:rR}=TN;class CN{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const a=i.node,l=parseInt(a.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const a=this.getWebSocketConstructor();return new a(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const NN="2.76.1",AN=`realtime-js/${NN}`,RN="1.0.0",qc=1e4,MN=1e3,IN=100;var Fa;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Fa||(Fa={}));var nt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(nt||(nt={}));var sn;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(sn||(sn={}));var Bc;(function(n){n.websocket="websocket"})(Bc||(Bc={}));var Ui;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ui||(Ui={}));class kN{constructor(){this.HEADER_LENGTH=1}decode(e,i){return e.constructor===ArrayBuffer?i(this._binaryDecode(e)):i(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const i=new DataView(e),a=new TextDecoder;return this._decodeBroadcast(e,i,a)}_decodeBroadcast(e,i,a){const l=i.getUint8(1),r=i.getUint8(2);let c=this.HEADER_LENGTH+2;const h=a.decode(e.slice(c,c+l));c=c+l;const y=a.decode(e.slice(c,c+r));c=c+r;const g=JSON.parse(a.decode(e.slice(c,e.byteLength)));return{ref:null,topic:h,event:y,payload:g}}}class Cv{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ue;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ue||(Ue={}));const Xg=(n,e,i={})=>{var a;const l=(a=i.skipTypes)!==null&&a!==void 0?a:[];return e?Object.keys(e).reduce((r,c)=>(r[c]=DN(c,n,e,l),r),{}):{}},DN=(n,e,i,a)=>{const l=e.find(h=>h.name===n),r=l?.type,c=i[n];return r&&!a.includes(r)?Nv(r,c):Vc(c)},Nv=(n,e)=>{if(n.charAt(0)==="_"){const i=n.slice(1,n.length);return LN(e,i)}switch(n){case Ue.bool:return UN(e);case Ue.float4:case Ue.float8:case Ue.int2:case Ue.int4:case Ue.int8:case Ue.numeric:case Ue.oid:return jN(e);case Ue.json:case Ue.jsonb:return ON(e);case Ue.timestamp:return PN(e);case Ue.abstime:case Ue.date:case Ue.daterange:case Ue.int4range:case Ue.int8range:case Ue.money:case Ue.reltime:case Ue.text:case Ue.time:case Ue.timestamptz:case Ue.timetz:case Ue.tsrange:case Ue.tstzrange:return Vc(e);default:return Vc(e)}},Vc=n=>n,UN=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},jN=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},ON=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},LN=(n,e)=>{if(typeof n!="string")return n;const i=n.length-1,a=n[i];if(n[0]==="{"&&a==="}"){let r;const c=n.slice(1,i);try{r=JSON.parse("["+c+"]")}catch{r=c?c.split(","):[]}return r.map(h=>Nv(e,h))}return n},PN=n=>typeof n=="string"?n.replace(" ","T"):n,Av=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class yc{constructor(e,i,a={},l=qc){this.channel=e,this.event=i,this.payload=a,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var a;return this._hasReceived(e)&&i((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(a=>a.status===e).forEach(a=>a.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Wg;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Wg||(Wg={}));class $a{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},l=>{const{onJoin:r,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$a.syncState(this.state,l,r,c),this.pendingDiffs.forEach(y=>{this.state=$a.syncDiff(this.state,y,r,c)}),this.pendingDiffs=[],h()}),this.channel._on(a.diff,{},l=>{const{onJoin:r,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=$a.syncDiff(this.state,l,r,c),h())}),this.onJoin((l,r,c)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:r,newPresences:c})}),this.onLeave((l,r,c)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:r,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,a,l){const r=this.cloneDeep(e),c=this.transformState(i),h={},y={};return this.map(r,(g,x)=>{c[g]||(y[g]=x)}),this.map(c,(g,x)=>{const b=r[g];if(b){const w=x.map(N=>N.presence_ref),S=b.map(N=>N.presence_ref),E=x.filter(N=>S.indexOf(N.presence_ref)<0),C=b.filter(N=>w.indexOf(N.presence_ref)<0);E.length>0&&(h[g]=E),C.length>0&&(y[g]=C)}else h[g]=x}),this.syncDiff(r,{joins:h,leaves:y},a,l)}static syncDiff(e,i,a,l){const{joins:r,leaves:c}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return a||(a=()=>{}),l||(l=()=>{}),this.map(r,(h,y)=>{var g;const x=(g=e[h])!==null&&g!==void 0?g:[];if(e[h]=this.cloneDeep(y),x.length>0){const b=e[h].map(S=>S.presence_ref),w=x.filter(S=>b.indexOf(S.presence_ref)<0);e[h].unshift(...w)}a(h,x,y)}),this.map(c,(h,y)=>{let g=e[h];if(!g)return;const x=y.map(b=>b.presence_ref);g=g.filter(b=>x.indexOf(b.presence_ref)<0),e[h]=g,l(h,g,y),g.length===0&&delete e[h]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(a=>i(a,e[a]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,a)=>{const l=e[a];return"metas"in l?i[a]=l.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):i[a]=l,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Zg;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Zg||(Zg={}));var Ja;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Ja||(Ja={}));var Rn;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Rn||(Rn={}));class ad{constructor(e,i={config:{}},a){var l,r;if(this.topic=e,this.params=i,this.socket=a,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new yc(this,sn.join,this.params,this.timeout),this.rejoinTimer=new Cv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(sn.reply,{},(c,h)=>{this._trigger(this._replyEventName(h),c)}),this.presence=new $a(this),this.broadcastEndpointURL=Av(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((r=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||r===void 0)&&r.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var a,l,r;if(this.socket.isConnected()||this.socket.connect(),this.state==nt.closed){const{config:{broadcast:c,presence:h,private:y}}=this.params,g=(l=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(S=>S.filter))!==null&&l!==void 0?l:[],x=!!this.bindings[Ja.PRESENCE]&&this.bindings[Ja.PRESENCE].length>0||((r=this.params.config.presence)===null||r===void 0?void 0:r.enabled)===!0,b={},w={broadcast:c,presence:Object.assign(Object.assign({},h),{enabled:x}),postgres_changes:g,private:y};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(S=>e?.(Rn.CHANNEL_ERROR,S)),this._onClose(()=>e?.(Rn.CLOSED)),this.updateJoinPayload(Object.assign({config:w},b)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:S})=>{var E;if(this.socket.setAuth(),S===void 0){e?.(Rn.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,N=(E=C?.length)!==null&&E!==void 0?E:0,M=[];for(let D=0;D<N;D++){const k=C[D],{filter:{event:q,schema:z,table:L,filter:$}}=k,ie=S&&S[D];if(ie&&ie.event===q&&ie.schema===z&&ie.table===L&&ie.filter===$)M.push(Object.assign(Object.assign({},k),{id:ie.id}));else{this.unsubscribe(),this.state=nt.errored,e?.(Rn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,e&&e(Rn.SUBSCRIBED);return}}).receive("error",S=>{this.state=nt.errored,e?.(Rn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{e?.(Rn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,a){return this.state===nt.joined&&e===Ja.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,i,a)}async httpSend(e,i,a={}){var l;const r=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(i==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:r,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(l=a.timeout)!==null&&l!==void 0?l:this.timeout);if(h.status===202)return{success:!0};let y=h.statusText;try{const g=await h.json();y=g.error||g.message||y}catch{}return Promise.reject(new Error(y))}async send(e,i={}){var a,l;if(!this._canPush()&&e.type==="broadcast"){const{event:r,payload:c}=e,y={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:c,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,y,(a=i.timeout)!==null&&a!==void 0?a:this.timeout);return await((l=g.body)===null||l===void 0?void 0:l.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var c,h,y;const g=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((y=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||y===void 0)&&y.ack)&&r("ok"),g.receive("ok",()=>r("ok")),g.receive("error",()=>r("error")),g.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=nt.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(sn.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(l=>{a=new yc(this,sn.leave,{},e),a.receive("ok",()=>{i(),l("ok")}).receive("timeout",()=>{i(),l("timed out")}).receive("error",()=>{l("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nt.closed,this.bindings={}}async _fetchWithTimeout(e,i,a){const l=new AbortController,r=setTimeout(()=>l.abort(),a),c=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:l.signal}));return clearTimeout(r),c}_push(e,i,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new yc(this,e,i,a);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>IN){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,a){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,a){var l,r;const c=e.toLocaleLowerCase(),{close:h,error:y,leave:g,join:x}=sn;if(a&&[h,y,g,x].indexOf(c)>=0&&a!==this._joinRef())return;let w=this._onMessage(c,i,a);if(i&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(S=>{var E,C,N;return((E=S.filter)===null||E===void 0?void 0:E.event)==="*"||((N=(C=S.filter)===null||C===void 0?void 0:C.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===c}).map(S=>S.callback(w,a)):(r=this.bindings[c])===null||r===void 0||r.filter(S=>{var E,C,N,M,D,k;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in S){const q=S.id,z=(E=S.filter)===null||E===void 0?void 0:E.event;return q&&((C=i.ids)===null||C===void 0?void 0:C.includes(q))&&(z==="*"||z?.toLocaleLowerCase()===((N=i.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const q=(D=(M=S?.filter)===null||M===void 0?void 0:M.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return q==="*"||q===((k=i?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===c}).map(S=>{if(typeof w=="object"&&"ids"in w){const E=w.data,{schema:C,table:N,commit_timestamp:M,type:D,errors:k}=E;w=Object.assign(Object.assign({},{schema:C,table:N,commit_timestamp:M,eventType:D,new:{},old:{},errors:k}),this._getPayloadRecords(E))}S.callback(w,a)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,a){const l=e.toLocaleLowerCase(),r={type:l,filter:i,callback:a};return this.bindings[l]?this.bindings[l].push(r):this.bindings[l]=[r],this}_off(e,i){const a=e.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(l=>{var r;return!(((r=l.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===a&&ad.isEqual(l.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const a in e)if(e[a]!==i[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(sn.close,{},e)}_onError(e){this._on(sn.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=Xg(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=Xg(e.columns,e.old_record)),i}}const vc=()=>{},Al={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},qN=[1e3,2e3,5e3,1e4],BN=1e4,VN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class HN{constructor(e,i){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qc,this.transport=null,this.heartbeatIntervalMs=Al.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vc,this.ref=0,this.reconnectTimer=null,this.logger=vc,this.conn=null,this.sendBuffer=[],this.serializer=new kN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let r;return l?r=l:typeof fetch>"u"?r=(...c)=>Fs(async()=>{const{default:h}=await Promise.resolve().then(()=>qi);return{default:h}},void 0).then(({default:h})=>h(...c)).catch(h=>{throw new Error(`Failed to load @supabase/node-fetch: ${h.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):r=fetch,(...c)=>r(...c)},!(!((a=i?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${Bc.websocket}`,this.httpEndpoint=Av(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=CN.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:RN}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},e?this.conn.close(e,i??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,a){this.logger(e,i,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Fa.connecting:return Ui.Connecting;case Fa.open:return Ui.Open;case Fa.closing:return Ui.Closing;default:return Ui.Closed}}isConnected(){return this.connectionState()===Ui.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const a=`realtime:${e}`,l=this.getChannels().find(r=>r.topic===a);if(l)return l;{const r=new ad(`realtime:${e}`,i,this);return this.channels.push(r),r}}push(e){const{topic:i,event:a,payload:l,ref:r}=e,c=()=>{this.encode(e,h=>{var y;(y=this.conn)===null||y===void 0||y.send(h)})};this.log("push",`${i} ${a} (${r})`,l),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(MN,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Al.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(a=>a.topic===e&&(a._isJoined()||a._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:l,payload:r,ref:c}=i,h=c?`(${c})`:"",y=r.status||"";this.log("receive",`${y} ${a} ${l} ${h}`.trim(),r),this.channels.filter(g=>g._isMember(a)).forEach(g=>g._trigger(l,r,c)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(sn.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const a=e.match(/\?/)?"&":"?",l=new URLSearchParams(i);return`${e}${a}${l}`}_workerObjectUrl(e){let i;if(e)i=e;else{const a=new Blob([VN],{type:"application/javascript"});i=URL.createObjectURL(a)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i;e?i=e:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(a=>{const l={access_token:i,version:AN};i&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(sn.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(a=>{try{a(i)}catch(l){this.log("error",`error in ${e} callback`,l)}})}catch(a){this.log("error",`error triggering ${e} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new Cv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Al.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,a,l,r,c,h,y,g,x;if(this.transport=(i=e?.transport)!==null&&i!==void 0?i:null,this.timeout=(a=e?.timeout)!==null&&a!==void 0?a:qc,this.heartbeatIntervalMs=(l=e?.heartbeatIntervalMs)!==null&&l!==void 0?l:Al.HEARTBEAT_INTERVAL,this.worker=(r=e?.worker)!==null&&r!==void 0?r:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(h=e?.heartbeatCallback)!==null&&h!==void 0?h:vc,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=e?.reconnectAfterMs)!==null&&y!==void 0?y:(b=>qN[b-1]||BN),this.encode=(g=e?.encode)!==null&&g!==void 0?g:((b,w)=>w(JSON.stringify(b))),this.decode=(x=e?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class od extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ve(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class GN extends od{constructor(e,i,a){super(e),this.name="StorageApiError",this.status=i,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Hc extends od{constructor(e,i){super(e),this.name="StorageUnknownError",this.originalError=i}}const ld=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...i)=>Fs(async()=>{const{default:a}=await Promise.resolve().then(()=>qi);return{default:a}},void 0).then(({default:a})=>a(...i)):e=fetch,(...i)=>e(...i)},zN=()=>Z(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Fs(()=>Promise.resolve().then(()=>qi),void 0)).Response:Response}),Gc=n=>{if(Array.isArray(n))return n.map(i=>Gc(i));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([i,a])=>{const l=i.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));e[l]=Gc(a)}),e},FN=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},xc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),$N=(n,e,i)=>Z(void 0,void 0,void 0,function*(){const a=yield zN();n instanceof a&&!i?.noResolveJson?n.json().then(l=>{const r=n.status||500,c=l?.statusCode||r+"";e(new GN(xc(l),r,c))}).catch(l=>{e(new Hc(xc(l),l))}):e(new Hc(xc(n),n))}),JN=(n,e,i,a)=>{const l={method:n,headers:e?.headers||{}};return n==="GET"||!a?l:(FN(a)?(l.headers=Object.assign({"Content-Type":"application/json"},e?.headers),l.body=JSON.stringify(a)):l.body=a,e?.duplex&&(l.duplex=e.duplex),Object.assign(Object.assign({},l),i))};function eo(n,e,i,a,l,r){return Z(this,void 0,void 0,function*(){return new Promise((c,h)=>{n(i,JN(e,a,l,r)).then(y=>{if(!y.ok)throw y;return a?.noResolveJson?y:y.json()}).then(y=>c(y)).catch(y=>$N(y,h,a))})})}function Ka(n,e,i,a){return Z(this,void 0,void 0,function*(){return eo(n,"GET",e,i,a)})}function nn(n,e,i,a,l){return Z(this,void 0,void 0,function*(){return eo(n,"POST",e,a,l,i)})}function zc(n,e,i,a,l){return Z(this,void 0,void 0,function*(){return eo(n,"PUT",e,a,l,i)})}function YN(n,e,i,a){return Z(this,void 0,void 0,function*(){return eo(n,"HEAD",e,Object.assign(Object.assign({},i),{noResolveJson:!0}),a)})}function rd(n,e,i,a,l){return Z(this,void 0,void 0,function*(){return eo(n,"DELETE",e,a,l,i)})}class KN{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i}then(e,i){return this.execute().then(e,i)}execute(){return Z(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ve(e))return{data:null,error:e};throw e}})}}var Rv;class QN{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i,this[Rv]="BlobDownloadBuilder",this.promise=null}asStream(){return new KN(this.downloadFn,this.shouldThrowOnError)}then(e,i){return this.getPromise().then(e,i)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Z(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ve(e))return{data:null,error:e};throw e}})}}Rv=Symbol.toStringTag;const XN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ey={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class WN{constructor(e,i={},a,l){this.shouldThrowOnError=!1,this.url=e,this.headers=i,this.bucketId=a,this.fetch=ld(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,i,a,l){return Z(this,void 0,void 0,function*(){try{let r;const c=Object.assign(Object.assign({},ey),l);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const y=c.metadata;typeof Blob<"u"&&a instanceof Blob?(r=new FormData,r.append("cacheControl",c.cacheControl),y&&r.append("metadata",this.encodeMetadata(y)),r.append("",a)):typeof FormData<"u"&&a instanceof FormData?(r=a,r.append("cacheControl",c.cacheControl),y&&r.append("metadata",this.encodeMetadata(y))):(r=a,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,y&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(y)))),l?.headers&&(h=Object.assign(Object.assign({},h),l.headers));const g=this._removeEmptyFolders(i),x=this._getFinalPath(g),b=yield(e=="PUT"?zc:nn)(this.fetch,`${this.url}/object/${x}`,r,Object.assign({headers:h},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:g,id:b.Id,fullPath:b.Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}upload(e,i,a){return Z(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,i,a)})}uploadToSignedUrl(e,i,a,l){return Z(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),c=this._getFinalPath(r),h=new URL(this.url+`/object/upload/sign/${c}`);h.searchParams.set("token",i);try{let y;const g=Object.assign({upsert:ey.upsert},l),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&a instanceof Blob?(y=new FormData,y.append("cacheControl",g.cacheControl),y.append("",a)):typeof FormData<"u"&&a instanceof FormData?(y=a,y.append("cacheControl",g.cacheControl)):(y=a,x["cache-control"]=`max-age=${g.cacheControl}`,x["content-type"]=g.contentType);const b=yield zc(this.fetch,h.toString(),y,{headers:x});return{data:{path:r,fullPath:b.Key},error:null}}catch(y){if(this.shouldThrowOnError)throw y;if(Ve(y))return{data:null,error:y};throw y}})}createSignedUploadUrl(e,i){return Z(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e);const l=Object.assign({},this.headers);i?.upsert&&(l["x-upsert"]="true");const r=yield nn(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:l}),c=new URL(this.url+r.url),h=c.searchParams.get("token");if(!h)throw new od("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:h},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ve(a))return{data:null,error:a};throw a}})}update(e,i,a){return Z(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,i,a)})}move(e,i,a){return Z(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ve(l))return{data:null,error:l};throw l}})}copy(e,i,a){return Z(this,void 0,void 0,function*(){try{return{data:{path:(yield nn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ve(l))return{data:null,error:l};throw l}})}createSignedUrl(e,i,a){return Z(this,void 0,void 0,function*(){try{let l=this._getFinalPath(e),r=yield nn(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:i},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const c=a?.download?`&download=${a.download===!0?"":a.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${c}`)},{data:r,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ve(l))return{data:null,error:l};throw l}})}createSignedUrls(e,i,a){return Z(this,void 0,void 0,function*(){try{const l=yield nn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:e},{headers:this.headers}),r=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:l.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${r}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ve(l))return{data:null,error:l};throw l}})}download(e,i){const l=typeof i?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(i?.transform||{}),c=r?`?${r}`:"",h=this._getFinalPath(e),y=()=>Ka(this.fetch,`${this.url}/${l}/${h}${c}`,{headers:this.headers,noResolveJson:!0});return new QN(y,this.shouldThrowOnError)}info(e){return Z(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{const a=yield Ka(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:Gc(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ve(a))return{data:null,error:a};throw a}})}exists(e){return Z(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{return yield YN(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ve(a)&&a instanceof Hc){const l=a.originalError;if([400,404].includes(l?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(e,i){const a=this._getFinalPath(e),l=[],r=i?.download?`download=${i.download===!0?"":i.download}`:"";r!==""&&l.push(r);const h=typeof i?.transform<"u"?"render/image":"object",y=this.transformOptsToQueryString(i?.transform||{});y!==""&&l.push(y);let g=l.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${a}${g}`)}}}remove(e){return Z(this,void 0,void 0,function*(){try{return{data:yield rd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}list(e,i,a){return Z(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},XN),i),{prefix:e||""});return{data:yield nn(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},a),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ve(l))return{data:null,error:l};throw l}})}listV2(e,i){return Z(this,void 0,void 0,function*(){try{const a=Object.assign({},e);return{data:yield nn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ve(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const i=[];return e.width&&i.push(`width=${e.width}`),e.height&&i.push(`height=${e.height}`),e.resize&&i.push(`resize=${e.resize}`),e.format&&i.push(`format=${e.format}`),e.quality&&i.push(`quality=${e.quality}`),i.join("&")}}const Mv="2.76.1",Iv={"X-Client-Info":`storage-js/${Mv}`};class ZN{constructor(e,i={},a,l){this.shouldThrowOnError=!1;const r=new URL(e);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase.")),this.url=r.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Iv),i),this.fetch=ld(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Z(this,void 0,void 0,function*(){try{return{data:yield Ka(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ve(e))return{data:null,error:e};throw e}})}getBucket(e){return Z(this,void 0,void 0,function*(){try{return{data:yield Ka(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}createBucket(e){return Z(this,arguments,void 0,function*(i,a={public:!1}){try{return{data:yield nn(this.fetch,`${this.url}/bucket`,{id:i,name:i,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ve(l))return{data:null,error:l};throw l}})}updateBucket(e,i){return Z(this,void 0,void 0,function*(){try{return{data:yield zc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ve(a))return{data:null,error:a};throw a}})}emptyBucket(e){return Z(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}deleteBucket(e){return Z(this,void 0,void 0,function*(){try{return{data:yield rd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}}class eA{constructor(e,i={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Iv),i),this.fetch=ld(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Z(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}listBuckets(e){return Z(this,void 0,void 0,function*(){try{const i=new URLSearchParams;e?.limit!==void 0&&i.set("limit",e.limit.toString()),e?.offset!==void 0&&i.set("offset",e.offset.toString()),e?.sortColumn&&i.set("sortColumn",e.sortColumn),e?.sortOrder&&i.set("sortOrder",e.sortOrder),e?.search&&i.set("search",e.search);const a=i.toString(),l=a?`${this.url}/bucket?${a}`:`${this.url}/bucket`,r=yield Ka(this.fetch,l,{headers:this.headers});return{data:Array.isArray(r)?r.filter(h=>h.type==="ANALYTICS"):[],error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}deleteBucket(e){return Z(this,void 0,void 0,function*(){try{return{data:yield rd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}}const ud={"X-Client-Info":`storage-js/${Mv}`,"Content-Type":"application/json"};class kv extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ot(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class bc extends kv{constructor(e,i,a){super(e),this.name="StorageVectorsApiError",this.status=i,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class tA extends kv{constructor(e,i){super(e),this.name="StorageVectorsUnknownError",this.originalError=i}}var ty;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(ty||(ty={}));const cd=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...i)=>Fs(async()=>{const{default:a}=await Promise.resolve().then(()=>qi);return{default:a}},void 0).then(({default:a})=>a(...i)):e=fetch,(...i)=>e(...i)},nA=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},ny=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),iA=(n,e,i)=>Z(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!i?.noResolveJson){const l=n.status||500,r=n;if(typeof r.json=="function")r.json().then(c=>{const h=c?.statusCode||c?.code||l+"";e(new bc(ny(c),l,h))}).catch(()=>{const c=l+"",h=r.statusText||`HTTP ${l} error`;e(new bc(h,l,c))});else{const c=l+"",h=r.statusText||`HTTP ${l} error`;e(new bc(h,l,c))}}else e(new tA(ny(n),n))}),sA=(n,e,i,a)=>{const l={method:n,headers:e?.headers||{}};return a?(nA(a)?(l.headers=Object.assign({"Content-Type":"application/json"},e?.headers),l.body=JSON.stringify(a)):l.body=a,Object.assign(Object.assign({},l),i)):l};function aA(n,e,i,a,l,r){return Z(this,void 0,void 0,function*(){return new Promise((c,h)=>{n(i,sA(e,a,l,r)).then(y=>{if(!y.ok)throw y;if(a?.noResolveJson)return y;const g=y.headers.get("content-type");return!g||!g.includes("application/json")?{}:y.json()}).then(y=>c(y)).catch(y=>iA(y,h,a))})})}function Lt(n,e,i,a,l){return Z(this,void 0,void 0,function*(){return aA(n,"POST",e,a,l,i)})}class oA{constructor(e,i={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ud),i),this.fetch=cd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Z(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}})}getIndex(e,i){return Z(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ot(a))return{data:null,error:a};throw a}})}listIndexes(e){return Z(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}})}deleteIndex(e,i){return Z(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ot(a))return{data:null,error:a};throw a}})}}class lA{constructor(e,i={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ud),i),this.fetch=cd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Z(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Lt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}})}getVectors(e){return Z(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}})}listVectors(e){return Z(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Lt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}})}queryVectors(e){return Z(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}})}deleteVectors(e){return Z(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Lt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}})}}class rA{constructor(e,i={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ud),i),this.fetch=cd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Z(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}})}getBucket(e){return Z(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}})}listBuckets(){return Z(this,arguments,void 0,function*(e={}){try{return{data:yield Lt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}})}deleteBucket(e){return Z(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}})}}class uA extends rA{constructor(e,i={}){super(e,i.headers||{},i.fetch)}from(e){return new cA(this.url,this.headers,e,this.fetch)}}class cA extends oA{constructor(e,i,a,l){super(e,i,l),this.vectorBucketName=a}createIndex(e){const i=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Z(this,void 0,void 0,function*(){return i.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Z(this,arguments,void 0,function*(i={}){return e.listIndexes.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const i=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Z(this,void 0,void 0,function*(){return i.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const i=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Z(this,void 0,void 0,function*(){return i.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new dA(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class dA extends lA{constructor(e,i,a,l,r){super(e,i,r),this.vectorBucketName=a,this.indexName=l}putVectors(e){const i=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Z(this,void 0,void 0,function*(){return i.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const i=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Z(this,void 0,void 0,function*(){return i.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Z(this,arguments,void 0,function*(i={}){return e.listVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const i=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Z(this,void 0,void 0,function*(){return i.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const i=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Z(this,void 0,void 0,function*(){return i.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class fA extends ZN{constructor(e,i={},a,l){super(e,i,a,l)}from(e){return new WN(this.url,this.headers,e,this.fetch)}get vectors(){return new uA(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new eA(this.url+"/iceberg",this.headers,this.fetch)}}const hA="2.76.1";let Ga="";typeof Deno<"u"?Ga="deno":typeof document<"u"?Ga="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ga="react-native":Ga="node";const mA={"X-Client-Info":`supabase-js-${Ga}/${hA}`},pA={headers:mA},gA={schema:"public"},yA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vA={},xA=n=>{let e;return n?e=n:typeof fetch>"u"?e=bv:e=fetch,(...i)=>e(...i)},bA=()=>typeof Headers>"u"?wv:Headers,wA=(n,e,i)=>{const a=xA(i),l=bA();return async(r,c)=>{var h;const y=(h=await e())!==null&&h!==void 0?h:n;let g=new l(c?.headers);return g.has("apikey")||g.set("apikey",n),g.has("Authorization")||g.set("Authorization",`Bearer ${y}`),a(r,Object.assign(Object.assign({},c),{headers:g}))}};function _A(n){return n.endsWith("/")?n:n+"/"}function SA(n,e){var i,a;const{db:l,auth:r,realtime:c,global:h}=n,{db:y,auth:g,realtime:x,global:b}=e,w={db:Object.assign(Object.assign({},y),l),auth:Object.assign(Object.assign({},g),r),realtime:Object.assign(Object.assign({},x),c),storage:{},global:Object.assign(Object.assign(Object.assign({},b),h),{headers:Object.assign(Object.assign({},(i=b?.headers)!==null&&i!==void 0?i:{}),(a=h?.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return n.accessToken?w.accessToken=n.accessToken:delete w.accessToken,w}function TA(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_A(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Dv="2.76.1",Ms=30*1e3,Fc=3,wc=Fc*Ms,EA="http://localhost:9999",CA="supabase.auth.token",NA={"X-Client-Info":`gotrue-js/${Dv}`},$c="X-Supabase-Api-Version",Uv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},AA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,RA=600*1e3;class Qa extends Error{constructor(e,i,a){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=a}}function ne(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class MA extends Qa{constructor(e,i,a){super(e,i,a),this.name="AuthApiError",this.status=i,this.code=a}}function IA(n){return ne(n)&&n.name==="AuthApiError"}class ji extends Qa{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class ci extends Qa{constructor(e,i,a,l){super(e,a,l),this.name=i,this.status=a}}class ai extends ci{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kA(n){return ne(n)&&n.name==="AuthSessionMissingError"}class Es extends ci{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Rl extends ci{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ml extends ci{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function DA(n){return ne(n)&&n.name==="AuthImplicitGrantRedirectError"}class iy extends ci{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jc extends ci{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function _c(n){return ne(n)&&n.name==="AuthRetryableFetchError"}class sy extends ci{constructor(e,i,a){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=a}}class Yc extends ci{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ay=` 	
\r=`.split(""),UA=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<ay.length;e+=1)n[ay[e].charCodeAt(0)]=-2;for(let e=0;e<Bl.length;e+=1)n[Bl[e].charCodeAt(0)]=e;return n})();function oy(n,e,i){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;i(Bl[a]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;i(Bl[a]),e.queuedBits-=6}}function jv(n,e,i){const a=UA[n];if(a>-1)for(e.queue=e.queue<<6|a,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function ly(n){const e=[],i=c=>{e.push(String.fromCodePoint(c))},a={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},r=c=>{LA(c,a,i)};for(let c=0;c<n.length;c+=1)jv(n.charCodeAt(c),l,r);return e.join("")}function jA(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function OA(n,e){for(let i=0;i<n.length;i+=1){let a=n.charCodeAt(i);if(a>55295&&a<=56319){const l=(a-55296)*1024&65535;a=(n.charCodeAt(i+1)-56320&65535|l)+65536,i+=1}jA(a,e)}}function LA(n,e,i){if(e.utf8seq===0){if(n<=127){i(n);return}for(let a=1;a<6;a+=1)if((n>>7-a&1)===0){e.utf8seq=a;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function Os(n){const e=[],i={queue:0,queuedBits:0},a=l=>{e.push(l)};for(let l=0;l<n.length;l+=1)jv(n.charCodeAt(l),i,a);return new Uint8Array(e)}function PA(n){const e=[];return OA(n,i=>e.push(i)),new Uint8Array(e)}function Oi(n){const e=[],i={queue:0,queuedBits:0},a=l=>{e.push(l)};return n.forEach(l=>oy(l,i,a)),oy(null,i,a),e.join("")}function qA(n){return Math.round(Date.now()/1e3)+n}function BA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const jt=()=>typeof window<"u"&&typeof document<"u",Ii={tested:!1,writable:!1},Ov=()=>{if(!jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ii.tested)return Ii.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ii.tested=!0,Ii.writable=!0}catch{Ii.tested=!0,Ii.writable=!1}return Ii.writable};function VA(n){const e={},i=new URL(n);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((l,r)=>{e[r]=l})}catch{}return i.searchParams.forEach((a,l)=>{e[l]=a}),e}const Lv=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...i)=>Fs(async()=>{const{default:a}=await Promise.resolve().then(()=>qi);return{default:a}},void 0).then(({default:a})=>a(...i)):e=fetch,(...i)=>e(...i)},HA=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Is=async(n,e,i)=>{await n.setItem(e,JSON.stringify(i))},ki=async(n,e)=>{const i=await n.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},si=async(n,e)=>{await n.removeItem(e)};class Kl{constructor(){this.promise=new Kl.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}Kl.promiseConstructor=Promise;function Sc(n){const e=n.split(".");if(e.length!==3)throw new Yc("Invalid JWT structure");for(let a=0;a<e.length;a++)if(!AA.test(e[a]))throw new Yc("JWT not in base64url format");return{header:JSON.parse(ly(e[0])),payload:JSON.parse(ly(e[1])),signature:Os(e[2]),raw:{header:e[0],payload:e[1]}}}async function GA(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function zA(n,e){return new Promise((a,l)=>{(async()=>{for(let r=0;r<1/0;r++)try{const c=await n(r);if(!e(r,null,c)){a(c);return}}catch(c){if(!e(r,c)){l(c);return}}})()})}function FA(n){return("0"+n.toString(16)).substr(-2)}function $A(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=i.length;let l="";for(let r=0;r<56;r++)l+=i.charAt(Math.floor(Math.random()*a));return l}return crypto.getRandomValues(e),Array.from(e,FA).join("")}async function JA(n){const i=new TextEncoder().encode(n),a=await crypto.subtle.digest("SHA-256",i),l=new Uint8Array(a);return Array.from(l).map(r=>String.fromCharCode(r)).join("")}async function YA(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return n;const i=await JA(n);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cs(n,e,i=!1){const a=$A();let l=a;i&&(l+="/PASSWORD_RECOVERY"),await Is(n,`${e}-code-verifier`,l);const r=await YA(a);return[r,a===r?"plain":"s256"]}const KA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function QA(n){const e=n.headers.get($c);if(!e||!e.match(KA))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function XA(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function WA(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ZA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ns(n){if(!ZA.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Tc(){const n={};return new Proxy(n,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const a=i.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ry(n){return JSON.parse(JSON.stringify(n))}const Di=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),e1=[502,503,504];async function uy(n){var e;if(!HA(n))throw new Jc(Di(n),0);if(e1.includes(n.status))throw new Jc(Di(n),n.status);let i;try{i=await n.json()}catch(r){throw new ji(Di(r),r)}let a;const l=QA(n);if(l&&l.getTime()>=Uv["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?a=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(a=i.error_code),a){if(a==="weak_password")throw new sy(Di(i),n.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(a==="session_not_found")throw new ai}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((r,c)=>r&&typeof c=="string",!0))throw new sy(Di(i),n.status,i.weak_password.reasons);throw new MA(Di(i),n.status||500,a)}const t1=(n,e,i,a)=>{const l={method:n,headers:e?.headers||{}};return n==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),l.body=JSON.stringify(a),Object.assign(Object.assign({},l),i))};async function oe(n,e,i,a){var l;const r=Object.assign({},a?.headers);r[$c]||(r[$c]=Uv["2024-01-01"].name),a?.jwt&&(r.Authorization=`Bearer ${a.jwt}`);const c=(l=a?.query)!==null&&l!==void 0?l:{};a?.redirectTo&&(c.redirect_to=a.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",y=await n1(n,e,i+h,{headers:r,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(y):{data:Object.assign({},y),error:null}}async function n1(n,e,i,a,l,r){const c=t1(e,a,l,r);let h;try{h=await n(i,Object.assign({},c))}catch(y){throw new Jc(Di(y),0)}if(h.ok||await uy(h),a?.noResolveJson)return h;try{return await h.json()}catch(y){await uy(y)}}function tn(n){var e;let i=null;a1(n)&&(i=Object.assign({},n),n.expires_at||(i.expires_at=qA(n.expires_in)));const a=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:i,user:a},error:null}}function cy(n){const e=tn(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0)&&(e.data.weak_password=n.weak_password),e}function oi(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function i1(n){return{data:n,error:null}}function s1(n){const{action_link:e,email_otp:i,hashed_token:a,redirect_to:l,verification_type:r}=n,c=zs(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:i,hashed_token:a,redirect_to:l,verification_type:r},y=Object.assign({},c);return{data:{properties:h,user:y},error:null}}function dy(n){return n}function a1(n){return n.access_token&&n.refresh_token&&n.expires_in}const Ec=["global","local","others"];class o1{constructor({url:e="",headers:i={},fetch:a}){this.url=e,this.headers=i,this.fetch=Lv(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=Ec[0]){if(Ec.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ec.join(", ")}`);try{return await oe(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(a){if(ne(a))return{data:null,error:a};throw a}}async inviteUserByEmail(e,i={}){try{return await oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:oi})}catch(a){if(ne(a))return{data:{user:null},error:a};throw a}}async generateLink(e){try{const{options:i}=e,a=zs(e,["options"]),l=Object.assign(Object.assign({},a),i);return"newEmail"in a&&(l.new_email=a?.newEmail,delete l.newEmail),await oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:s1,redirectTo:i?.redirectTo})}catch(i){if(ne(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:oi})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,a,l,r,c,h,y;try{const g={nextPage:null,lastPage:0,total:0},x=await oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(i=e?.page)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:"",per_page:(r=(l=e?.perPage)===null||l===void 0?void 0:l.toString())!==null&&r!==void 0?r:""},xform:dy});if(x.error)throw x.error;const b=await x.json(),w=(c=x.headers.get("x-total-count"))!==null&&c!==void 0?c:0,S=(y=(h=x.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&y!==void 0?y:[];return S.length>0&&(S.forEach(E=>{const C=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(E.split(";")[1].split("=")[1]);g[`${N}Page`]=C}),g.total=parseInt(w)),{data:Object.assign(Object.assign({},b),g),error:null}}catch(g){if(ne(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){Ns(e);try{return await oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:oi})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){Ns(e);try{return await oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:oi})}catch(a){if(ne(a))return{data:{user:null},error:a};throw a}}async deleteUser(e,i=!1){Ns(e);try{return await oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:oi})}catch(a){if(ne(a))return{data:{user:null},error:a};throw a}}async _listFactors(e){Ns(e.userId);try{const{data:i,error:a}=await oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:i,error:a}}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _deleteFactor(e){Ns(e.userId),Ns(e.id);try{return{data:await oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,a,l,r,c,h,y;try{const g={nextPage:null,lastPage:0,total:0},x=await oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(i=e?.page)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:"",per_page:(r=(l=e?.perPage)===null||l===void 0?void 0:l.toString())!==null&&r!==void 0?r:""},xform:dy});if(x.error)throw x.error;const b=await x.json(),w=(c=x.headers.get("x-total-count"))!==null&&c!==void 0?c:0,S=(y=(h=x.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&y!==void 0?y:[];return S.length>0&&(S.forEach(E=>{const C=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(E.split(";")[1].split("=")[1]);g[`${N}Page`]=C}),g.total=parseInt(w)),{data:Object.assign(Object.assign({},b),g),error:null}}catch(g){if(ne(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}}function fy(n={}){return{getItem:e=>n[e]||null,setItem:(e,i)=>{n[e]=i},removeItem:e=>{delete n[e]}}}const As={debug:!!(globalThis&&Ov()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Pv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class l1 extends Pv{}async function r1(n,e,i){As.debug;const a=new globalThis.AbortController;return e>0&&setTimeout(()=>{a.abort(),As.debug},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async l=>{if(l){As.debug;try{return await i()}finally{As.debug}}else{if(e===0)throw As.debug,new l1(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(As.debug)try{const r=await globalThis.navigator.locks.query()}catch{}return await i()}}))}function u1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function qv(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function c1(n){return parseInt(n,16)}function d1(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,a=>a.toString(16).padStart(2,"0")).join("")}function f1(n){var e;const{chainId:i,domain:a,expirationTime:l,issuedAt:r=new Date,nonce:c,notBefore:h,requestId:y,resources:g,scheme:x,uri:b,version:w}=n;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const S=qv(n.address),E=x?`${x}://${a}`:a,C=n.statement?`${n.statement}
`:"",N=`${E} wants you to sign in with your Ethereum account:
${S}

${C}`;let M=`URI: ${b}
Version: ${w}
Chain ID: ${i}${c?`
Nonce: ${c}`:""}
Issued At: ${r.toISOString()}`;if(l&&(M+=`
Expiration Time: ${l.toISOString()}`),h&&(M+=`
Not Before: ${h.toISOString()}`),y&&(M+=`
Request ID: ${y}`),g){let D=`
Resources:`;for(const k of g){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);D+=`
- ${k}`}M+=D}return`${N}
${M}`}class We extends Error{constructor({message:e,code:i,cause:a,name:l}){var r;super(e,{cause:a}),this.__isWebAuthnError=!0,this.name=(r=l??(a instanceof Error?a.name:void 0))!==null&&r!==void 0?r:"Unknown Error",this.code=i}}class Vl extends We{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function h1({error:n,options:e}){var i,a,l;const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new We({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((i=r.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new We({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((a=r.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new We({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((l=r.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new We({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new We({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new We({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return r.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new We({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new We({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const c=window.location.hostname;if(Bv(c)){if(r.rp.id!==c)return new We({message:`The RP ID "${r.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(r.user.id.byteLength<1||r.user.id.byteLength>64)return new We({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function m1({error:n,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new We({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new We({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const a=window.location.hostname;if(Bv(a)){if(i.rpId!==a)return new We({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class p1{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const g1=new p1;function y1(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:i,excludeCredentials:a}=n,l=zs(n,["challenge","user","excludeCredentials"]),r=Os(e).buffer,c=Object.assign(Object.assign({},i),{id:Os(i.id).buffer}),h=Object.assign(Object.assign({},l),{challenge:r,user:c});if(a&&a.length>0){h.excludeCredentials=new Array(a.length);for(let y=0;y<a.length;y++){const g=a[y];h.excludeCredentials[y]=Object.assign(Object.assign({},g),{id:Os(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return h}function v1(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:i}=n,a=zs(n,["challenge","allowCredentials"]),l=Os(e).buffer,r=Object.assign(Object.assign({},a),{challenge:l});if(i&&i.length>0){r.allowCredentials=new Array(i.length);for(let c=0;c<i.length;c++){const h=i[c];r.allowCredentials[c]=Object.assign(Object.assign({},h),{id:Os(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return r}function x1(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const i=n;return{id:n.id,rawId:n.id,response:{attestationObject:Oi(new Uint8Array(n.response.attestationObject)),clientDataJSON:Oi(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function b1(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const i=n,a=n.getClientExtensionResults(),l=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Oi(new Uint8Array(l.authenticatorData)),clientDataJSON:Oi(new Uint8Array(l.clientDataJSON)),signature:Oi(new Uint8Array(l.signature)),userHandle:l.userHandle?Oi(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Bv(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function hy(){var n,e;return!!(jt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function w1(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vl("Browser returned unexpected credential type",e)}:{data:null,error:new Vl("Empty credential response",e)}}catch(e){return{data:null,error:h1({error:e,options:n})}}}async function _1(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vl("Browser returned unexpected credential type",e)}:{data:null,error:new Vl("Empty credential response",e)}}catch(e){return{data:null,error:m1({error:e,options:n})}}}const S1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},T1={userVerification:"preferred",hints:["security-key"]};function Hl(...n){const e=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),i=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),a={};for(const l of n)if(l)for(const r in l){const c=l[r];if(c!==void 0)if(Array.isArray(c))a[r]=c;else if(i(c))a[r]=c;else if(e(c)){const h=a[r];e(h)?a[r]=Hl(h,c):a[r]=Hl(c)}else a[r]=c}return a}function E1(n,e){return Hl(S1,n,e||{})}function C1(n,e){return Hl(T1,n,e||{})}class N1{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:a,signal:l},r){try{const{data:c,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!c)return{data:null,error:h};const y=l??g1.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:g}=c.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${a}`),g.displayName||(g.displayName=g.name)}switch(c.webauthn.type){case"create":{const g=E1(c.webauthn.credential_options.publicKey,r?.create),{data:x,error:b}=await w1({publicKey:g,signal:y});return x?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:x}},error:null}:{data:null,error:b}}case"request":{const g=C1(c.webauthn.credential_options.publicKey,r?.request),{data:x,error:b}=await _1(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:g,signal:y}));return x?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:x}},error:null}:{data:null,error:b}}}}catch(c){return ne(c)?{data:null,error:c}:{data:null,error:new ji("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:i,webauthn:a}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:a})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:l}},r){if(!i)return{data:null,error:new Qa("rpId is required for WebAuthn authentication")};try{if(!hy())return{data:null,error:new ji("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:a},signal:l},{request:r});if(!c)return{data:null,error:h};const{webauthn:y}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:y.type,rpId:i,rpOrigins:a,credential_response:y.credential_response}})}catch(c){return ne(c)?{data:null,error:c}:{data:null,error:new ji("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:l},r){if(!i)return{data:null,error:new Qa("rpId is required for WebAuthn registration")};try{if(!hy())return{data:null,error:new ji("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(x=>{var b;return(b=x.data)===null||b===void 0?void 0:b.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x?.id}):void 0),{data:null,error:h};const{data:y,error:g}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:a},signal:l},{create:r});return y?this._verify({factorId:c.id,challengeId:y.challengeId,webauthn:{rpId:i,rpOrigins:a,type:y.webauthn.type,credential_response:y.webauthn.credential_response}}):{data:null,error:g}}catch(c){return ne(c)?{data:null,error:c}:{data:null,error:new ji("Unexpected error in register",c)}}}}u1();const A1={url:EA,storageKey:CA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:NA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function my(n,e,i){return await i()}const Rs={};class Xa{get jwks(){var e,i;return(i=(e=Rs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){Rs[this.storageKey]=Object.assign(Object.assign({},Rs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=Rs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Rs[this.storageKey]=Object.assign(Object.assign({},Rs[this.storageKey]),{cachedAt:e})}constructor(e){var i,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Xa.nextInstanceID,Xa.nextInstanceID+=1,this.instanceID>0&&jt();const l=Object.assign(Object.assign({},A1),e);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new o1({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Lv(l.fetch),this.lock=l.lock||my,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:jt()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=r1:this.lock=my,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new N1(this)},this.persistSession?(l.storage?this.storage=l.storage:Ov()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fy(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=fy(this.memoryStorage)),jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch{}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Dv}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const i=VA(window.location.href);let a="none";if(this._isImplicitGrantCallback(i)?a="implicit":await this._isPKCECallback(i)&&(a="pkce"),jt()&&this.detectSessionInUrl&&a!=="none"){const{data:l,error:r}=await this._getSessionFromURL(i,a);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),DA(r)){const y=(e=r.details)===null||e===void 0?void 0:e.code;if(y==="identity_already_exists"||y==="identity_not_found"||y==="single_identity_not_deletable")return{error:r}}return await this._removeSession(),{error:r}}const{session:c,redirectType:h}=l;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return ne(i)?{error:i}:{error:new ji("Unexpected error during initialization",i)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,a,l;try{const r=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(i=e?.options)===null||i===void 0?void 0:i.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(l=e?.options)===null||l===void 0?void 0:l.captchaToken}},xform:tn}),{data:c,error:h}=r;if(h||!c)return{data:{user:null,session:null},error:h};const y=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:g,session:y},error:null}}catch(r){if(ne(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(e){var i,a,l;try{let r;if("email"in e){const{email:x,password:b,options:w}=e;let S=null,E=null;this.flowType==="pkce"&&([S,E]=await Cs(this.storage,this.storageKey)),r=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:x,password:b,data:(i=w?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:S,code_challenge_method:E},xform:tn})}else if("phone"in e){const{phone:x,password:b,options:w}=e;r=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:b,data:(a=w?.data)!==null&&a!==void 0?a:{},channel:(l=w?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:tn})}else throw new Rl("You must provide either an email or phone number and a password");const{data:c,error:h}=r;if(h||!c)return{data:{user:null,session:null},error:h};const y=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:g,session:y},error:null}}catch(r){if(ne(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(e){try{let i;if("email"in e){const{email:r,password:c,options:h}=e;i=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:c,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:cy})}else if("phone"in e){const{phone:r,password:c,options:h}=e;i=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:c,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:cy})}else throw new Rl("You must provide either an email or phone number and a password");const{data:a,error:l}=i;return l?{data:{user:null,session:null},error:l}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Es}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:l})}catch(i){if(ne(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOAuth(e){var i,a,l,r;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(r=e.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,a,l,r,c,h,y,g,x,b,w;let S,E;if("message"in e)S=e.message,E=e.signature;else{const{chain:C,wallet:N,statement:M,options:D}=e;let k;if(jt())if(typeof N=="object")k=N;else{const X=window;if("ethereum"in X&&typeof X.ethereum=="object"&&"request"in X.ethereum&&typeof X.ethereum.request=="function")k=X.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=N}const q=new URL((i=D?.url)!==null&&i!==void 0?i:window.location.href),z=await k.request({method:"eth_requestAccounts"}).then(X=>X).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!z||z.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const L=qv(z[0]);let $=(a=D?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!$){const X=await k.request({method:"eth_chainId"});$=c1(X)}const ie={domain:q.host,address:L,statement:M,uri:q.href,version:"1",chainId:$,nonce:(l=D?.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(c=(r=D?.signInWithEthereum)===null||r===void 0?void 0:r.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(h=D?.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(y=D?.signInWithEthereum)===null||y===void 0?void 0:y.notBefore,requestId:(g=D?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(x=D?.signInWithEthereum)===null||x===void 0?void 0:x.resources};S=f1(ie),E=await k.request({method:"personal_sign",params:[d1(S),L]})}try{const{data:C,error:N}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:E},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:tn});if(N)throw N;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Es}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:N})}catch(C){if(ne(C))return{data:{user:null,session:null},error:C};throw C}}async signInWithSolana(e){var i,a,l,r,c,h,y,g,x,b,w,S;let E,C;if("message"in e)E=e.message,C=e.signature;else{const{chain:N,wallet:M,statement:D,options:k}=e;let q;if(jt())if(typeof M=="object")q=M;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))q=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=M}const z=new URL((i=k?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in q&&q.signIn){const L=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k?.signInWithSolana),{version:"1",domain:z.host,uri:z.href}),D?{statement:D}:null));let $;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")$=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)$=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)E=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),C=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${z.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${z.href}`,`Issued At: ${(l=(a=k?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((r=k?.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((c=k?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((h=k?.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((y=k?.signInWithSolana)===null||y===void 0)&&y.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((g=k?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((b=(x=k?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||b===void 0)&&b.length?["Resources",...k.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const L=await q.signMessage(new TextEncoder().encode(E),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=L}}try{const{data:N,error:M}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:Oi(C)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:tn});if(M)throw M;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new Es}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:M})}catch(N){if(ne(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const i=await ki(this.storage,`${this.storageKey}-code-verifier`),[a,l]=(i??"").split("/");try{const{data:r,error:c}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:a},xform:tn});if(await si(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!r||!r.session||!r.user?{data:{user:null,session:null,redirectType:null},error:new Es}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign(Object.assign({},r),{redirectType:l??null}),error:c})}catch(r){if(ne(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(e){try{const{options:i,provider:a,token:l,access_token:r,nonce:c}=e,h=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:l,access_token:r,nonce:c,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:tn}),{data:y,error:g}=h;return g?{data:{user:null,session:null},error:g}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new Es}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:y,error:g})}catch(i){if(ne(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOtp(e){var i,a,l,r,c;try{if("email"in e){const{email:h,options:y}=e;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await Cs(this.storage,this.storageKey));const{error:b}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(i=y?.data)!==null&&i!==void 0?i:{},create_user:(a=y?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:g,code_challenge_method:x},redirectTo:y?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in e){const{phone:h,options:y}=e,{data:g,error:x}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(l=y?.data)!==null&&l!==void 0?l:{},create_user:(r=y?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},channel:(c=y?.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:g?.message_id},error:x}}throw new Rl("You must provide either an email or phone number.")}catch(h){if(ne(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var i,a;try{let l,r;"options"in e&&(l=(i=e.options)===null||i===void 0?void 0:i.redirectTo,r=(a=e.options)===null||a===void 0?void 0:a.captchaToken);const{data:c,error:h}=await oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:l,xform:tn});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const y=c.session,g=c.user;return y?.access_token&&(await this._saveSession(y),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",y)),{data:{user:g,session:y},error:null}}catch(l){if(ne(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(e){var i,a,l;try{let r=null,c=null;return this.flowType==="pkce"&&([r,c]=await Cs(this.storage,this.storageKey)),await oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(a=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&a!==void 0?a:void 0}),!((l=e?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:c}),headers:this.headers,xform:i1})}catch(r){if(ne(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:a}=e;if(a)throw a;if(!i)throw new ai;const{error:l}=await oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return{data:{user:null,session:null},error:l}})}catch(e){if(ne(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:a,type:l,options:r}=e,{error:c}=await oe(this.fetch,"POST",i,{headers:this.headers,body:{email:a,type:l,gotrue_meta_security:{captcha_token:r?.captchaToken}},redirectTo:r?.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:a,type:l,options:r}=e,{data:c,error:h}=await oe(this.fetch,"POST",i,{headers:this.headers,body:{phone:a,type:l,gotrue_meta_security:{captcha_token:r?.captchaToken}}});return{data:{user:null,session:null,messageId:c?.message_id},error:h}}throw new Rl("You must provide either an email or phone number and a type")}catch(i){if(ne(i))return{data:{user:null,session:null},error:i};throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await a,await i()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=i();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await ki(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const a=e.expires_at?e.expires_at*1e3-Date.now()<wc:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",e.expires_at),!a){if(this.userStorage){const c=await ki(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=Tc()}if(this.storage.isServer&&e.user){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(y,g,x)=>(!c&&g==="user"&&(c=!0,this.suppressGetSessionWarning=!0),Reflect.get(y,g,x))})}return{data:{session:e},error:null}}const{data:l,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:oi}):await this._useSession(async i=>{var a,l,r;const{data:c,error:h}=i;if(h)throw h;return!(!((a=c.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ai}:await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(l=c.session)===null||l===void 0?void 0:l.access_token)!==null&&r!==void 0?r:void 0,xform:oi})})}catch(i){if(ne(i))return kA(i)&&(await this._removeSession(),await si(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:i};throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async a=>{const{data:l,error:r}=a;if(r)throw r;if(!l.session)throw new ai;const c=l.session;let h=null,y=null;this.flowType==="pkce"&&e.email!=null&&([h,y]=await Cs(this.storage,this.storageKey));const{data:g,error:x}=await oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:y}),jwt:c.access_token,xform:oi});if(x)throw x;return c.user=g.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(a){if(ne(a))return{data:{user:null},error:a};throw a}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ai;const i=Date.now()/1e3;let a=i,l=!0,r=null;const{payload:c}=Sc(e.access_token);if(c.exp&&(a=c.exp,l=a<=i),l){const{data:h,error:y}=await this._callRefreshToken(e.refresh_token);if(y)return{data:{user:null,session:null},error:y};if(!h)return{data:{user:null,session:null},error:null};r=h}else{const{data:h,error:y}=await this._getUser(e.access_token);if(y)throw y;r={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:a-i,expires_at:a},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(i){if(ne(i))return{data:{session:null,user:null},error:i};throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var a;if(!e){const{data:c,error:h}=i;if(h)throw h;e=(a=c.session)!==null&&a!==void 0?a:void 0}if(!e?.refresh_token)throw new ai;const{data:l,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(i){if(ne(i))return{data:{user:null,session:null},error:i};throw i}}async _getSessionFromURL(e,i){try{if(!jt())throw new Ml("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ml(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new iy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ml("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new iy("No code detected.");const{data:D,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:l,access_token:r,refresh_token:c,expires_in:h,expires_at:y,token_type:g}=e;if(!r||!h||!c||!g)throw new Ml("No session defined in URL");const x=Math.round(Date.now()/1e3),b=parseInt(h);let w=x+b;y&&(w=parseInt(y)),(w-x)*1e3<=Ms;const E=w-b;x-E>=120||x-E<0;const{data:C,error:N}=await this._getUser(r);if(N)throw N;const M={provider_token:a,provider_refresh_token:l,access_token:r,expires_in:b,expires_at:w,refresh_token:c,token_type:g,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:M,redirectType:e.type},error:null}}catch(a){if(ne(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await ki(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var a;const{data:l,error:r}=i;if(r)return{error:r};const c=(a=l.session)===null||a===void 0?void 0:a.access_token;if(c){const{error:h}=await this.admin.signOut(c,e);if(h&&!(IA(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await si(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const i=BA(),a={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:a}}}async _emitInitialSession(e){return await this._useSession(async i=>{var a,l;try{const{data:{session:r},error:c}=i;if(c)throw c;await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(r){await((l=this.stateChangeEmitters.get(e))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r)}})}async resetPasswordForEmail(e,i={}){let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Cs(this.storage,this.storageKey,!0));try{return await oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:a,code_challenge_method:l,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(r){if(ne(r))return{data:null,error:r};throw r}}async getUserIdentities(){var e;try{const{data:i,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:a,error:l}=await this._useSession(async r=>{var c,h,y,g,x;const{data:b,error:w}=r;if(w)throw w;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(y=e.options)===null||y===void 0?void 0:y.queryParams,skipBrowserRedirect:!0});return await oe(this.fetch,"GET",S,{headers:this.headers,jwt:(x=(g=b.session)===null||g===void 0?void 0:g.access_token)!==null&&x!==void 0?x:void 0})});if(l)throw l;return jt()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(a?.url),{data:{provider:e.provider,url:a?.url},error:null}}catch(a){if(ne(a))return{data:{provider:e.provider,url:null},error:a};throw a}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var a;try{const{error:l,data:{session:r}}=i;if(l)throw l;const{options:c,provider:h,token:y,access_token:g,nonce:x}=e,b=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=r?.access_token)!==null&&a!==void 0?a:void 0,body:{provider:h,id_token:y,access_token:g,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:tn}),{data:w,error:S}=b;return S?{data:{user:null,session:null},error:S}:!w||!w.session||!w.user?{data:{user:null,session:null},error:new Es}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),{data:w,error:S})}catch(l){if(ne(l))return{data:{user:null,session:null},error:l};throw l}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var a,l;const{data:r,error:c}=i;if(c)throw c;return await oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(l=(a=r.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const a=Date.now();return await zA(async l=>(l>0&&await GA(200*Math.pow(2,l-1)),this._debug(i,"refreshing attempt",l),await oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:tn})),(l,r)=>{const c=200*Math.pow(2,l);return r&&_c(r)&&Date.now()+c-a<Ms})}catch(a){if(this._debug(i,"error",a),ne(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const a=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",a),jt()&&!i.skipBrowserRedirect&&window.location.assign(a),{data:{provider:e,url:a},error:null}}async _recoverAndRefresh(){var e,i;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const l=await ki(this.storage,this.storageKey);if(l&&this.userStorage){let c=await ki(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:l.user},await Is(this.userStorage,this.storageKey+"-user",c)),l.user=(e=c?.user)!==null&&e!==void 0?e:Tc()}else if(l&&!l.user&&!l.user){const c=await ki(this.storage,this.storageKey+"-user");c&&c?.user?(l.user=c.user,await si(this.storage,this.storageKey+"-user"),await Is(this.storage,this.storageKey,l)):l.user=Tc()}if(this._debug(a,"session from storage",l),!this._isValidSession(l)){this._debug(a,"session is not valid"),l!==null&&await this._removeSession();return}const r=((i=l.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<wc;if(this._debug(a,`session has${r?"":" not"} expired with margin of ${wc}s`),r){if(this.autoRefreshToken&&l.refresh_token){const{error:c}=await this._callRefreshToken(l.refresh_token);c&&(_c(c)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:h}=await this._getUser(l.access_token);!h&&c?.user?(l.user=c.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(c){this._debug(a,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(a,"error",l);return}finally{this._debug(a,"end")}}async _callRefreshToken(e){var i,a;if(!e)throw new ai;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Kl;const{data:r,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!r.session)throw new ai;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const h={data:r.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(r){if(this._debug(l,"error",r),ne(r)){const c={data:null,error:r};return _c(r)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(c),c}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(r),r}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(e,i,a=!0){const l=`#_notifyAllSubscribers(${e})`;this._debug(l,"begin",i,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:e,session:i});const r=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,i)}catch(y){r.push(y)}});if(await Promise.all(c),r.length>0){for(let h=0;h<r.length;h+=1);throw r[0]}}finally{this._debug(l,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const i=Object.assign({},e),a=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&i.user&&await Is(this.userStorage,this.storageKey+"-user",{user:i.user});const l=Object.assign({},i);delete l.user;const r=ry(l);await Is(this.storage,this.storageKey,r)}else{const l=ry(i);await Is(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await si(this.storage,this.storageKey),await si(this.storage,this.storageKey+"-code-verifier"),await si(this.storage,this.storageKey+"-user"),this.userStorage&&await si(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&jt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch{}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ms);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:a}}=i;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((a.expires_at*1e3-e)/Ms);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Ms}ms, refresh threshold is ${Fc} ticks`),l<=Fc&&await this._callRefreshToken(a.refresh_token)})}catch{}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Pv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch{}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,a){const l=[`provider=${encodeURIComponent(i)}`];if(a?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&l.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[r,c]=await Cs(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(c)}`});l.push(h.toString())}if(a?.queryParams){const r=new URLSearchParams(a.queryParams);l.push(r.toString())}return a?.skipBrowserRedirect&&l.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${e}?${l.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var a;const{data:l,error:r}=i;return r?{data:null,error:r}:await oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _enroll(e){try{return await this._useSession(async i=>{var a,l;const{data:r,error:c}=i;if(c)return{data:null,error:c};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:y,error:g}=await oe(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(a=r?.session)===null||a===void 0?void 0:a.access_token});return g?{data:null,error:g}:(e.factorType==="totp"&&y.type==="totp"&&(!((l=y?.totp)===null||l===void 0)&&l.qr_code)&&(y.totp.qr_code=`data:image/svg+xml;utf-8,${y.totp.qr_code}`),{data:y,error:null})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var a;const{data:l,error:r}=i;if(r)return{data:null,error:r};const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?x1(e.webauthn.credential_response):b1(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:y}=await oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token});return y?{data:null,error:y}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:y})})}catch(i){if(ne(i))return{data:null,error:i};throw i}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var a;const{data:l,error:r}=i;if(r)return{data:null,error:r};const c=await oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token});if(c.error)return c;const{data:h}=c;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:y1(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:v1(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(ne(i))return{data:null,error:i};throw i}})}async _challengeAndVerify(e){const{data:i,error:a}=await this._challenge({factorId:e.factorId});return a?{data:null,error:a}:await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:a}=await this.getUser();if(a)return{data:null,error:a};const l={all:[],phone:[],totp:[],webauthn:[]};for(const r of(e=i?.factors)!==null&&e!==void 0?e:[])l.all.push(r),r.status==="verified"&&l[r.factor_type].push(r);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var i,a;const{data:{session:l},error:r}=e;if(r)return{data:null,error:r};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Sc(l.access_token);let h=null;c.aal&&(h=c.aal);let y=h;((a=(i=l.user.factors)===null||i===void 0?void 0:i.filter(b=>b.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(y="aal2");const x=c.amr||[];return{data:{currentLevel:h,nextLevel:y,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(e,i={keys:[]}){let a=i.keys.find(h=>h.kid===e);if(a)return a;const l=Date.now();if(a=this.jwks.keys.find(h=>h.kid===e),a&&this.jwks_cached_at+RA>l)return a;const{data:r,error:c}=await oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!r.keys||r.keys.length===0||(this.jwks=r,this.jwks_cached_at=l,a=r.keys.find(h=>h.kid===e),!a)?null:a}async getClaims(e,i={}){try{let a=e;if(!a){const{data:S,error:E}=await this.getSession();if(E||!S.session)return{data:null,error:E};a=S.session.access_token}const{header:l,payload:r,signature:c,raw:{header:h,payload:y}}=Sc(a);i?.allowExpired||XA(r.exp);const g=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!g){const{error:S}=await this.getUser(a);if(S)throw S;return{data:{claims:r,header:l,signature:c},error:null}}const x=WA(l.alg),b=await crypto.subtle.importKey("jwk",g,x,!0,["verify"]);if(!await crypto.subtle.verify(x,b,c,PA(`${h}.${y}`)))throw new Yc("Invalid JWT signature");return{data:{claims:r,header:l,signature:c},error:null}}catch(a){if(ne(a))return{data:null,error:a};throw a}}}Xa.nextInstanceID=0;const R1=Xa;class M1 extends R1{constructor(e){super(e)}}class I1{constructor(e,i,a){var l,r,c;this.supabaseUrl=e,this.supabaseKey=i;const h=TA(e);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const y=`sb-${h.hostname.split(".")[0]}-auth-token`,g={db:gA,realtime:vA,auth:Object.assign(Object.assign({},yA),{storageKey:y}),global:pA},x=SA(a??{},g);this.storageKey=(l=x.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(r=x.global.headers)!==null&&r!==void 0?r:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(b,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=x.auth)!==null&&c!==void 0?c:{},this.headers,x.global.fetch),this.fetch=wA(i,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new EN(new URL("rest/v1",h).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new fA(this.storageUrl.href,this.headers,this.fetch,a?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new pN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,i={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,i,a)}channel(e,i={config:{}}){return this.realtime.channel(e,i)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,i;if(this.accessToken)return await this.accessToken();const{data:a}=await this.auth.getSession();return(i=(e=a.session)===null||e===void 0?void 0:e.access_token)!==null&&i!==void 0?i:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:i,detectSessionInUrl:a,storage:l,userStorage:r,storageKey:c,flowType:h,lock:y,debug:g},x,b){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new M1({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),x),storageKey:c,autoRefreshToken:e,persistSession:i,detectSessionInUrl:a,storage:l,userStorage:r,flowType:h,lock:y,debug:g,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new HN(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,a)=>{this._handleTokenChanged(i,"CLIENT",a?.access_token)})}_handleTokenChanged(e,i,a){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const k1=(n,e,i)=>new I1(n,e,i);function D1(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}D1();const U1="https://vuhbxceybywwnwzfsvpg.supabase.co",j1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ1aGJ4Y2V5Ynl3d253emZzdnBnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1OTYyNjQsImV4cCI6MjA3NzE3MjI2NH0.dvhx9PtbMv0yBu8OVj36wi5KkQeHzt3wFpEAiyhGIG0",$e=k1(U1,j1),Gl=n=>n?{id:n.id,name:n.user_metadata?.full_name||n.email,email:n.email}:null,Ya={async signUp(n,e,i,a,l,r,c,h){const{data:y,error:g}=await $e.auth.signUp({email:e,password:i,options:{data:{full_name:n}}});if(g)throw g;if(!y.user)throw new Error("Signup successful, but no user data returned.");let x=`https://picsum.photos/seed/${n.toLowerCase().replace(/\s/g,"")}/400/400`;if(h){const w=`${y.user.id}/${Date.now()}_${h.name}`,{error:S}=await $e.storage.from("profile-photos").upload(w,h,{cacheControl:"3600",upsert:!0});if(!S){const{data:E}=$e.storage.from("profile-photos").getPublicUrl(w);E.publicUrl&&(x=E.publicUrl)}}const{error:b}=await $e.from("profiles").upsert({id:y.user.id,name:n.split(" ")[0]||n,email:y.user.email,universityId:a,contactNumber:l,studentNumber:r,imageUrl:x,dateOfBirth:c},{onConflict:"id"});if(b)throw b;return Gl(y.user)},async login(n,e){const{data:i,error:a}=await $e.auth.signInWithPassword({email:n,password:e});if(a)throw a;if(!i.user)throw new Error("Login successful, but no user data returned.");return Gl(i.user)},async socialLoginRedirect(n){const{error:e}=await $e.auth.signInWithOAuth({provider:n,options:{redirectTo:window.location.origin}});if(e)throw e},async updateProfilePhoto(n,e){if(!e)throw new Error("No photo provided.");if(e.size>2*1024*1024)throw new Error("Image file is too large. Please use a file under 2MB.");const i=`${n}/${Date.now()}_${e.name}`,{error:a}=await $e.storage.from("profile-photos").upload(i,e,{upsert:!0});if(a)throw new Error("Failed to upload new photo.");const{data:l}=$e.storage.from("profile-photos").getPublicUrl(i);if(!l.publicUrl)throw new Error("Failed to get public URL for the new photo.");const r=l.publicUrl,{error:c}=await $e.from("profiles").update({imageUrl:r}).eq("id",n);if(c)throw new Error("Failed to update profile with new photo.");return r},async logout(){const{error:n}=await $e.auth.signOut();if(n)throw n}},O1=({provider:n,icon:e,onClick:i,disabled:a,isLoading:l})=>d.jsx("button",{type:"button",onClick:i,disabled:a,className:"w-full flex items-center justify-center gap-3 py-3 px-4 border border-gray-300 rounded-full shadow-sm text-md font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-unistay-yellow transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:l?d.jsx(Tt,{color:"navy",size:"md"}):d.jsxs(d.Fragment,{children:[d.jsx("i",{className:`fab ${e} text-xl`}),d.jsxs("span",{children:["Continue with ",n]})]})}),L1=({onAuthSuccess:n,onNavigateHome:e})=>{const[i,a]=F.useState(!0),[l,r]=F.useState({name:"",email:"",password:"",confirmPassword:"",dateOfBirth:"",contactNumber:"",universityId:Yt[0]?.id||"other",studentNumber:""}),[c,h]=F.useState(null),[y,g]=F.useState(null),[x,b]=F.useState(null),[w,S]=F.useState({password:!1,confirmPassword:!1}),{notify:E}=Za(),C=z=>{r({...l,[z.target.name]:z.target.value})},N=z=>{if(z.target.files&&z.target.files[0]){const L=z.target.files[0];if(L.size>2*1024*1024){E({message:"Image file is too large. Please use a file under 2MB.",type:"error"});return}h(L),g(URL.createObjectURL(L))}},M=async z=>{if(z.preventDefault(),b("email"),i){if(!l.email||!l.password){E({message:"Please enter both email and password.",type:"error"}),b(null);return}}else{if(l.password!==l.confirmPassword){E({message:"Passwords do not match.",type:"error"}),b(null);return}const L=["name","email","password","contactNumber","universityId","studentNumber","dateOfBirth"];for(const $ of L)if(!l[$]){E({message:`Please fill out all fields. ${$.replace(/([A-Z])/g," $1")} is missing.`,type:"error"}),b(null);return}}try{i?await Ya.login(l.email,l.password):await Ya.signUp(l.name,l.email,l.password,l.universityId,l.contactNumber,l.studentNumber,l.dateOfBirth,c),n()}catch(L){E({message:L,type:"error"})}finally{b(null)}},D=async z=>{b(z);try{await Ya.socialLoginRedirect(z)}catch(L){E({message:L,type:"error"}),b(null)}},k=z=>{S(L=>({...L,[z]:!L[z]}))},q=x!==null;return d.jsx("div",{className:"min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4",children:d.jsxs("div",{className:"max-w-md w-full",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("a",{href:"/",onClick:z=>{z.preventDefault(),e()},className:"inline-block hover:opacity-90 transition-opacity","aria-label":"Go to homepage",children:d.jsx("img",{src:"/images/hostels/unistay.png",alt:"UniStay Logo",className:"h-12 w-auto rounded-lg shadow-sm"})}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Your partner in finding the perfect student accommodation."})]}),d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[d.jsx("h2",{className:"text-3xl font-bold text-center text-unistay-navy mb-6",children:i?"Welcome Back!":"Create Your Account"}),d.jsx("div",{className:"space-y-4",children:d.jsx(O1,{provider:"Google",icon:"fa-google",onClick:()=>D("google"),disabled:q,isLoading:x==="google"})}),d.jsxs("div",{className:"my-6 flex items-center",children:[d.jsx("div",{className:"flex-grow border-t border-gray-200"}),d.jsx("span",{className:"flex-shrink mx-4 text-gray-500 text-sm font-semibold",children:"OR"}),d.jsx("div",{className:"flex-grow border-t border-gray-200"})]}),d.jsxs("form",{onSubmit:M,className:"space-y-4",children:[!i&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"photo-upload",className:"block text-sm font-medium text-gray-700",children:"Profile Photo"}),d.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[d.jsx("span",{className:"inline-block h-16 w-16 rounded-full overflow-hidden bg-gray-100",children:y?d.jsx("img",{src:y,alt:"Profile preview",className:"h-full w-full object-cover"}):d.jsx("svg",{className:"h-full w-full text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M24 20.993V24H0v-2.997A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"})})}),d.jsxs("label",{htmlFor:"photo-upload",className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-unistay-yellow",children:[d.jsx("span",{children:"Upload Photo"}),d.jsx("input",{id:"photo-upload",name:"photo-upload",type:"file",className:"sr-only",accept:"image/*",onChange:N,disabled:q})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),d.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:l.name,onChange:C,disabled:q,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"contactNumber",className:"block text-sm font-medium text-gray-700",children:"Contact Number"}),d.jsx("input",{id:"contactNumber",name:"contactNumber",type:"tel",required:!0,value:l.contactNumber,onChange:C,disabled:q,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"universityId",className:"block text-sm font-medium text-gray-700",children:"University"}),d.jsxs("select",{id:"universityId",name:"universityId",required:!0,value:l.universityId,onChange:C,disabled:q,className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50",children:[Yt.map(z=>d.jsx("option",{value:z.id,children:z.name},z.id)),d.jsx("option",{value:"other",children:"Other"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"studentNumber",className:"block text-sm font-medium text-gray-700",children:"Student Number"}),d.jsx("input",{id:"studentNumber",name:"studentNumber",type:"text",required:!0,value:l.studentNumber,onChange:C,disabled:q,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700",children:"Date of Birth"}),d.jsx("input",{id:"dateOfBirth",name:"dateOfBirth",type:"date",required:!0,value:l.dateOfBirth,onChange:C,disabled:q,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),d.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:l.email,onChange:C,disabled:q,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),d.jsxs("div",{className:"relative mt-1",children:[d.jsx("input",{id:"password",name:"password",type:w.password?"text":"password",autoComplete:i?"current-password":"new-password",required:!0,value:l.password,onChange:C,disabled:q,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50 pr-10"}),d.jsx("button",{type:"button",onClick:()=>k("password"),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600","aria-label":w.password?"Hide password":"Show password",children:d.jsx("i",{className:`fas ${w.password?"fa-eye-slash":"fa-eye"}`})})]})]}),!i&&d.jsxs("div",{children:[d.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),d.jsxs("div",{className:"relative mt-1",children:[d.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:w.confirmPassword?"text":"password",autoComplete:"new-password",required:!0,value:l.confirmPassword,onChange:C,disabled:q,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50 pr-10"}),d.jsx("button",{type:"button",onClick:()=>k("confirmPassword"),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600","aria-label":w.confirmPassword?"Hide password":"Show password",children:d.jsx("i",{className:`fas ${w.confirmPassword?"fa-eye-slash":"fa-eye"}`})})]})]}),d.jsx("div",{className:"pt-2",children:d.jsx("button",{type:"submit",disabled:q,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-full shadow-sm text-lg font-bold text-unistay-navy bg-unistay-yellow hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-all duration-300 disabled:bg-yellow-400/70 disabled:cursor-not-allowed",children:x==="email"?d.jsx(Tt,{color:"navy"}):i?"Sign In":"Create Account"})})]}),d.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600",children:[i?"Don't have an account? ":"Already have an account? ",d.jsx("button",{onClick:()=>{q||a(!i)},className:"font-medium text-unistay-navy hover:text-unistay-yellow disabled:text-gray-400",disabled:q,children:i?"Sign up":"Sign in"})]})]})]})})},to=n=>({async getAll(){const{data:e,error:i}=await $e.from(n).select("*");if(i)throw i;return e},async getCounts(){const{count:e,error:i}=await $e.from(n).select("*",{count:"exact",head:!0});if(i)throw i;return e||0},async add(e){const{data:i,error:a}=await $e.from(n).insert([e]).select();if(a)throw a;return i[0]},async update(e,i){const{error:a}=await $e.from(n).update(i).eq("id",e);if(a)throw a},async set(e){const{error:i}=await $e.from(n).upsert(e,{onConflict:"id"});if(i)throw i},async remove(e){const{error:i}=await $e.from(n).delete().eq("id",e);if(i)throw i}}),dd=to("hostels"),fd=to("news"),hd=to("events"),md=to("jobs"),Ul=to("profiles"),Ql=n=>({add:async e=>{await n.add(e)},update:async e=>{await n.update(e.id,e)},remove:async e=>{await n.remove(e)}}),P1=Ql(dd),q1=Ql(fd),B1=Ql(hd),V1=Ql(md);function py(n){switch(n){case"news":return"news_uploads";default:return"uploads"}}function H1(n){return n==="news"?"":n}const cn={async uploadImage(n,e,i){try{if(!n||!(n instanceof File))throw new Error("Invalid file provided");if(!n.type.startsWith("image/"))throw new Error("File must be an image");const a=5*1024*1024;if(n.size>a)throw new Error("File size must be less than 5MB");const l=n.name.split(".").pop()?.toLowerCase();if(!l||!["jpg","jpeg","png","gif","webp","avif"].includes(l))throw new Error("Invalid file type. Supported types: jpg, jpeg, png, gif, webp, avif");const r=new Date().getTime(),c=Math.random().toString(36).substring(2),h=`${r}-${c}.${l}`,y=H1(e),g=i?`${y}/${i}/${h}`:`${y}/${h}`,x=py(e),{data:b,error:w}=await $e.storage.from(x).upload(g,n,{cacheControl:"3600",upsert:!0,contentType:n.type});if(w)throw new Error(`Failed to upload image: ${w.message}`);if(!b?.path)throw new Error("Upload succeeded but no path returned");const{data:{publicUrl:S}}=$e.storage.from(x).getPublicUrl(b.path);if(!S)throw new Error("Failed to get public URL for uploaded file");return S}catch(a){const l=a instanceof Error?a.message:"Unknown upload error";throw new Error(l)}},async uploadMultipleImages(n,e,i){const a=n.map(l=>this.uploadImage(l,e,i));return Promise.all(a)},async deleteImage(n,e){try{const i=py(e),a=n.split("/"),l=a.indexOf(i);if(l===-1)throw new Error("Invalid storage URL format");const r=a.slice(l+1).join("/");if(!r)throw new Error("Invalid image path");if(e!=="news"&&!r.startsWith(e+"/"))throw new Error(`Image path does not match content type ${e}`);const{error:c}=await $e.storage.from(i).remove([r]);if(c)throw new Error(`Failed to delete image: ${c.message}`)}catch(i){const a=i instanceof Error?i.message:"Unknown deletion error";throw new Error(a)}}},_e=n=>d.jsx("input",{...n,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-unistay-yellow focus:border-unistay-yellow"}),no=n=>d.jsx("textarea",{...n,rows:4,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-unistay-yellow focus:border-unistay-yellow"}),Vv=n=>d.jsx("select",{...n,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-unistay-yellow focus:border-unistay-yellow"}),St=({children:n,onClick:e,className:i="bg-unistay-navy text-white hover:bg-opacity-90",type:a="button",disabled:l=!1,loading:r=!1})=>d.jsx("button",{type:a,onClick:e,disabled:l||r,className:`px-4 py-2 font-semibold rounded-md transition-all duration-200 disabled:bg-opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 ${i}`,children:r?d.jsx(Tt,{color:i.includes("text-unistay-navy")?"navy":"white",size:"sm"}):n}),gy=({icon:n,onClick:e,colorClass:i="text-gray-500 hover:text-unistay-navy",loading:a=!1})=>d.jsx("button",{onClick:e,disabled:a,className:`p-1 ${i} transition-colors disabled:text-gray-400 disabled:cursor-not-allowed w-6 h-6 flex items-center justify-center`,children:a?d.jsx(Tt,{color:"navy",size:"sm"}):d.jsx("i",{className:`fas ${n}`})}),G1=({icon:n,title:e,value:i})=>d.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg flex items-center gap-6 transform hover:-translate-y-1 transition-transform duration-300",children:[d.jsx("div",{className:"bg-unistay-yellow/20 text-unistay-navy rounded-full h-16 w-16 flex items-center justify-center flex-shrink-0",children:d.jsx("i",{className:`fas ${n} text-3xl`})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-500 font-semibold",children:e}),d.jsx("p",{className:"text-4xl font-extrabold text-unistay-navy",children:i})]})]}),z1=({stats:n,isLoading:e})=>{if(e)return d.jsx("div",{className:"flex justify-center items-center h-64",children:d.jsx(Tt,{size:"lg"})});const i=[{icon:"fa-hotel",title:"Total Hostels",value:n.hostels},{icon:"fa-users",title:"Roommate Profiles",value:n.roommateProfiles},{icon:"fa-newspaper",title:"News Articles",value:n.news},{icon:"fa-calendar-alt",title:"Upcoming Events",value:n.events},{icon:"fa-briefcase",title:"Job Listings",value:n.jobs}];return d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-bold text-unistay-navy mb-6",children:"Dashboard Overview"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((a,l)=>d.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:`${l*100}ms`},children:d.jsx(G1,{...a})},a.title))})]})},F1=({item:n,onSubmit:e,onCancel:i,isSubmitting:a})=>{const[l,r]=F.useState({title:n?.title||"",description:n?.description||"",source:n?.source||"",featured:n?.featured||!1,images:n?.imageUrl?[{file:null,previewUrl:n.imageUrl}]:[]}),c=x=>{const{name:b,value:w}=x.target;r(S=>({...S,[b]:w}))},h=x=>{const b=x.target.files;b&&Array.from(b).forEach(w=>{const S=URL.createObjectURL(w);r(E=>({...E,images:[...E.images,{file:w,previewUrl:S}]}))})},y=x=>{r(b=>({...b,images:b.images.filter((w,S)=>S!==x)}))},g=async x=>{if(x.preventDefault(),l.images.length===0){alert("Please upload at least one image");return}try{const b=l.images.filter(S=>S.file);let w=n?.imageUrl;if(b.length>0){const S=b.map(M=>M.file),E=new Date().getTime(),C=`${n?.id||E}`;if(w=(await cn.uploadMultipleImages(S,"news",C))[0],n?.id&&n.imageUrl)try{await cn.deleteImage(n.imageUrl,"news")}catch{}}e({...l,imageUrl:w,timestamp:new Date().toISOString(),images:void 0})}catch{alert("Failed to upload images. Please try again.")}};return d.jsxs("form",{onSubmit:g,className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[d.jsx(_e,{name:"title",value:l.title,onChange:c,placeholder:"Title",required:!0}),d.jsx(no,{name:"description",value:l.description,onChange:c,placeholder:"Description",required:!0}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(_e,{type:"file",accept:"image/*",onChange:h,className:"w-full",required:l.images.length===0}),l.images.length>0&&d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:l.images.map((x,b)=>d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:x.previewUrl,alt:`Preview ${b+1}`,className:"w-full h-32 object-cover rounded-lg"}),d.jsx("button",{type:"button",onClick:()=>y(b),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx("i",{className:"fas fa-times"})})]},b))})]}),d.jsx(_e,{name:"source",value:l.source,onChange:c,placeholder:"Source",required:!0}),d.jsxs("div",{className:"flex items-center my-4",children:[d.jsx("input",{id:"featured",name:"featured",type:"checkbox",checked:l.featured,onChange:c,className:"h-4 w-4 text-unistay-yellow focus:ring-unistay-yellow border-gray-300 rounded"}),d.jsx("label",{htmlFor:"featured",className:"ml-2 text-sm font-medium text-gray-700",children:"Set as Featured News"})]}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx(St,{onClick:i,className:"bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Cancel"}),d.jsxs(St,{type:"submit",loading:a,children:[n?"Update":"Add"," News"]})]})]})},$1=({item:n,onSubmit:e,onCancel:i,isSubmitting:a})=>{const l=E=>E?new Date(E).toISOString().split("T")[0]:"",[r,c]=F.useState({title:n?.title||"",dateInput:n?l(n.date):"",location:n?.location||"",price:n?.price||"Free Entry",description:n?.description||"",contacts:n?.contacts||[""],phone:n?.phone||"",email:n?.email||"",time:n?.time||"",images:n?.imageUrl?[{file:null,previewUrl:n.imageUrl}]:[]}),h=E=>{const{name:C,value:N}=E.target;c(M=>({...M,[C]:N}))},y=E=>{const C=E.target.files;C&&Array.from(C).forEach(N=>{const M=URL.createObjectURL(N);c(D=>({...D,images:[...D.images,{file:N,previewUrl:M}]}))})},g=E=>{c(C=>({...C,images:C.images.filter((N,M)=>M!==E)}))},x=async E=>{if(E.preventDefault(),r.images.length===0){alert("Please upload at least one image");return}try{const C=r.images.map(z=>z.file),N=new Date().getTime(),M=`${n?.id||N}`,D=await cn.uploadMultipleImages(C,"events",M);if(n?.id&&n.imageUrl)try{await cn.deleteImage(n.imageUrl,"events")}catch{}const k=new Date(`${r.dateInput}T12:00:00`),q={...r,date:k.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),day:k.toLocaleDateString("en-US",{day:"2-digit"}),month:k.toLocaleDateString("en-US",{month:"short"}).toUpperCase(),imageUrl:D[0],price:r.price||"Free Entry",description:r.description?.trim(),contacts:r.contacts?.filter(z=>z.trim()),phone:r.phone?.trim(),email:r.email?.trim(),time:r.time,images:void 0};delete q.dateInput,e(q)}catch{alert("Failed to upload images. Please try again.")}},b=()=>{c(E=>({...E,contacts:[...E.contacts||[],""]}))},w=E=>{c(C=>({...C,contacts:C.contacts?.filter((N,M)=>M!==E)||[]}))},S=(E,C)=>{const N=[...r.contacts||[]];N[E]=C,c(M=>({...M,contacts:N}))};return d.jsxs("form",{onSubmit:x,className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[d.jsx(_e,{name:"title",value:r.title,onChange:h,placeholder:"Title",required:!0}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(_e,{name:"dateInput",type:"date",value:r.dateInput,onChange:h,required:!0}),d.jsx(_e,{name:"time",type:"time",value:r.time,onChange:h,placeholder:"Time",required:!0})]}),d.jsx(_e,{name:"location",value:r.location,onChange:h,placeholder:"Location",required:!0}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.jsxs("div",{className:"relative",children:[d.jsx(_e,{name:"price",value:r.price,onChange:h,placeholder:"Entrance Fee (e.g., 10000 or 'Free Entry')"}),d.jsx("button",{type:"button",onClick:()=>c(E=>({...E,price:"Free Entry"})),className:"absolute right-2 top-1/2 -translate-y-1/2 text-sm text-unistay-yellow hover:text-unistay-navy",children:"Set as Free"})]})}),d.jsx(no,{name:"description",value:r.description,onChange:h,placeholder:"Event Description",required:!0}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"font-semibold text-gray-700",children:"Contact Information"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(_e,{name:"phone",value:r.phone,onChange:h,placeholder:"Contact Phone"}),d.jsx(_e,{name:"email",type:"email",value:r.email,onChange:h,placeholder:"Contact Email"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-sm text-gray-700",children:"Contact Persons"}),d.jsxs("button",{type:"button",onClick:b,className:"text-sm text-unistay-yellow hover:text-unistay-navy transition-colors",children:[d.jsx("i",{className:"fas fa-plus mr-1"}),"Add Contact"]})]}),r.contacts?.map((E,C)=>d.jsxs("div",{className:"flex gap-2",children:[d.jsx(_e,{value:E,onChange:N=>S(C,N.target.value),placeholder:"Contact Person Name"}),d.jsx("button",{type:"button",onClick:()=>w(C),className:"text-red-500 hover:text-red-700",children:d.jsx("i",{className:"fas fa-times"})})]},C))]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(_e,{type:"file",accept:"image/*",onChange:y,className:"w-full",required:r.images.length===0}),r.images.length>0&&d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:r.images.map((E,C)=>d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:E.previewUrl,alt:`Preview ${C+1}`,className:"w-full h-32 object-cover rounded-lg"}),d.jsx("button",{type:"button",onClick:()=>g(C),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx("i",{className:"fas fa-times"})})]},C))})]}),d.jsxs("div",{className:"flex gap-2 justify-end pt-4 border-t",children:[d.jsx(St,{onClick:i,className:"bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Cancel"}),d.jsxs(St,{type:"submit",loading:a,children:[n?"Update":"Add"," Event"]})]})]})},J1=({item:n,onSubmit:e,onCancel:i,isSubmitting:a})=>{const[l,r]=F.useState({title:n?.title||"",deadline:n?.deadline||"",company:n?.company||"",images:[]}),c=x=>{r(b=>({...b,[x.target.name]:x.target.value}))},h=x=>{const b=x.target.files;b&&Array.from(b).forEach(w=>{const S=URL.createObjectURL(w);r(E=>({...E,images:[...E.images,{file:w,previewUrl:S}]}))})},y=x=>{r(b=>({...b,images:b.images.filter((w,S)=>S!==x)}))},g=async x=>{if(x.preventDefault(),l.images.length===0){alert("Please upload at least one image");return}try{const b=l.images.map(C=>C.file),w=new Date().getTime(),S=`${n?.id||w}`,E=await cn.uploadMultipleImages(b,"jobs",S);if(n?.id&&n.imageUrl)try{const C=n.imageUrl.split("/").slice(-2).join("/");await cn.deleteImage(C,"jobs")}catch{}e({...l,imageUrl:E[0],images:void 0})}catch{alert("Failed to upload images. Please try again.")}};return d.jsxs("form",{onSubmit:g,className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[d.jsx(_e,{name:"title",value:l.title,onChange:c,placeholder:"Title",required:!0}),d.jsx(_e,{name:"deadline",value:l.deadline,onChange:c,placeholder:"Deadline (e.g., July 15th)",required:!0}),d.jsx(_e,{name:"company",value:l.company,onChange:c,placeholder:"Company",required:!0}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(_e,{type:"file",accept:"image/*",onChange:h,className:"w-full",required:l.images.length===0}),l.images.length>0&&d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:l.images.map((x,b)=>d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:x.previewUrl,alt:`Preview ${b+1}`,className:"w-full h-32 object-cover rounded-lg"}),d.jsx("button",{type:"button",onClick:()=>y(b),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx("i",{className:"fas fa-times"})})]},b))})]}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx(St,{onClick:i,className:"bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Cancel"}),d.jsxs(St,{type:"submit",loading:a,children:[n?"Update":"Add"," Job"]})]})]})},Y1=({item:n,onSubmit:e,onCancel:i,isSubmitting:a,universities:l=[]})=>{const[r,c]=F.useState({name:n?.name||"",major:n?.major||"",bio:n?.bio||"",imageUrl:n?.imageUrl||"",gender:n?.gender||"other",universityId:n?.universityId||(l.length>0?l[0].id:"")}),[h,y]=F.useState(null),g=w=>{const{name:S,value:E}=w.target;c(C=>({...C,[S]:E}))},x=w=>{const S=w.target.files;if(!S||S.length===0)return;const E=S[0];y(E);const C=URL.createObjectURL(E);c(N=>({...N,imageUrl:C}))},b=async w=>{w.preventDefault();try{let S=r.imageUrl;h&&(S=(await cn.uploadMultipleImages([h],"news",`${n?.id||Date.now()}`))[0]),e({...r,imageUrl:S,date:new Date().toLocaleDateString(),votes:n&&n.votes||0})}catch{alert("Failed to upload image.")}};return d.jsxs("form",{onSubmit:b,className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[d.jsx(_e,{name:"name",value:r.name,onChange:g,placeholder:"Full name",required:!0}),d.jsx(_e,{name:"major",value:r.major,onChange:g,placeholder:"Major / Course"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"University"}),d.jsxs(Vv,{name:"universityId",value:r.universityId||"",onChange:g,required:!0,children:[d.jsx("option",{value:"",children:"Select a university"}),l?.map(w=>d.jsx("option",{value:w.id,children:w.name},w.id))]})]}),d.jsx(no,{name:"bio",value:r.bio,onChange:g,placeholder:"Short bio / reason for nomination"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gender"}),d.jsx("div",{className:"flex gap-6",children:["female","male","other"].map(w=>d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"radio",name:"gender",value:w,checked:r.gender===w,onChange:S=>c(E=>({...E,gender:S.target.value})),className:"h-4 w-4 text-unistay-yellow focus:ring-unistay-yellow border-gray-300"}),d.jsx("span",{className:"text-sm text-gray-700 capitalize",children:w==="female"?" Woman Crush Wednesday":w==="male"?" Man Crush Monday":"Other"})]},w))})]}),d.jsxs("div",{children:[d.jsx(_e,{type:"file",accept:"image/*",onChange:x}),r.imageUrl&&d.jsx("img",{src:r.imageUrl,alt:"preview",className:"w-32 h-32 object-cover rounded-md mt-2"})]}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx(St,{onClick:i,className:"bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Cancel"}),d.jsx(St,{type:"submit",loading:a,children:n?"Update":"Nominate"})]})]})},K1=({item:n,onSubmit:e,onCancel:i,isSubmitting:a})=>{const[l,r]=Ls.useState(n||{title:"",description:"",category:"lost",imageUrl:"",postedBy:"",phone:"",email:"",location:""}),c=y=>{if(y.preventDefault(),!l.title.trim()||!l.description.trim()||!l.postedBy.trim()||!l.phone.trim()||!l.imageUrl){alert("Please fill all required fields");return}e(l)},h=async y=>{const g=y.target.files?.[0];if(g)try{const x=await cn.uploadMultipleImages([g],"news","lostfound");x.length>0&&r(b=>({...b,imageUrl:x[0]}))}catch{alert("Failed to upload image")}};return d.jsxs("form",{onSubmit:c,className:"space-y-4",children:[d.jsx("div",{children:d.jsx(_e,{label:"Title *",placeholder:"e.g., Blue Backpack Lost in Library",value:l.title,onChange:y=>r(g=>({...g,title:y.target.value}))})}),d.jsx("div",{children:d.jsx(no,{label:"Description *",placeholder:"Describe the item in detail...",value:l.description,onChange:y=>r(g=>({...g,description:y.target.value})),rows:4})}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),d.jsx("div",{className:"space-y-2",children:["lost","found"].map(y=>d.jsxs("label",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"radio",name:"category",value:y,checked:l.category===y,onChange:g=>r(x=>({...x,category:g.target.value})),className:"h-4 w-4 text-unistay-yellow focus:ring-unistay-yellow border-gray-300"}),d.jsx("span",{className:"text-sm text-gray-700 capitalize",children:y==="lost"?" Lost Item":" Found Item"})]},y))})]}),d.jsx("div",{children:d.jsx(_e,{label:"Location (Optional)",placeholder:"e.g., Library, Near Gate A",value:l.location||"",onChange:y=>r(g=>({...g,location:y.target.value}))})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx("div",{children:d.jsx(_e,{label:"Contact Name *",placeholder:"Your name",value:l.postedBy,onChange:y=>r(g=>({...g,postedBy:y.target.value}))})}),d.jsx("div",{children:d.jsx(_e,{label:"Phone Number *",placeholder:"e.g., +256 700 000000",value:l.phone,onChange:y=>r(g=>({...g,phone:y.target.value}))})})]}),d.jsx("div",{children:d.jsx(_e,{label:"Email (Optional)",type:"email",placeholder:"your.email@example.com",value:l.email||"",onChange:y=>r(g=>({...g,email:y.target.value}))})}),d.jsxs("div",{children:[d.jsx(_e,{type:"file",accept:"image/*",onChange:h}),l.imageUrl&&d.jsx("img",{src:l.imageUrl,alt:"preview",className:"w-32 h-32 object-cover rounded-md mt-2"})]}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx(St,{onClick:i,className:"bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Cancel"}),d.jsx(St,{type:"submit",loading:a,children:n?"Update":"Post"})]})]})},Q1=({item:n,onSubmit:e,onCancel:i,universities:a,isSubmitting:l})=>{const c=a.find(E=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(E.id))?.id||"123e4567-e89b-12d3-a456-426614174001",[h,y]=F.useState({name:n?.name||"",location:n?.location||"",priceRange:n?.priceRange||"",images:n?.images||[],rating:n?.rating||4,universityId:n?.universityId||c,description:n?.description||"",amenities:n?.amenities||[],isRecommended:n?.isRecommended||!1}),g=E=>{const C=E.target.files;C&&Array.from(C).forEach(N=>{const M=URL.createObjectURL(N);y(D=>({...D,images:[...D.images||[],{file:N,previewUrl:M}]}))})},x=E=>{y(C=>({...C,images:(C.images||[]).filter((N,M)=>M!==E)}))},b=E=>{const{name:C,value:N,type:M}=E.target,D=E.target.checked;y(k=>({...k,[C]:M==="checkbox"?D:N}))},w=E=>{const C=(h.amenities||[]).filter((N,M)=>M!==E);y(N=>({...N,amenities:C}))},S=async E=>{if(E.preventDefault(),!h.images||h.images.length===0){alert("Please upload at least one image");return}try{const C=h.images.map(q=>q.file),N=new Date().getTime(),M=`${n?.id||N}`,D=await cn.uploadMultipleImages(C,"hostels",M);if(n?.id&&n.imageUrls){const q=new Set(n.imageUrls),z=new Set(D),L=n.imageUrls.filter($=>!z.has($));await Promise.all(L.map(async $=>{try{await cn.deleteImage($,"hostels")}catch{}}))}const k={...h,rating:h.rating,imageUrl:D[0],imageUrls:D,images:void 0};e(k)}catch{alert("Failed to upload images. Please try again.")}};return d.jsxs("form",{onSubmit:S,className:"space-y-6 p-4 bg-gray-50 rounded-lg",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(_e,{name:"name",value:h.name,onChange:b,placeholder:"Hostel Name",required:!0}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(_e,{type:"file",multiple:!0,accept:"image/*",onChange:g,className:"w-full",required:(h.images?.length||0)===0}),h.images&&h.images.length>0&&d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mt-4",children:h.images.map((E,C)=>d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:E.previewUrl,alt:`Preview ${C+1}`,className:"w-full h-32 object-cover rounded-lg"}),d.jsx("button",{type:"button",onClick:()=>x(C),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx("i",{className:"fas fa-times"})})]},C))})]}),d.jsx(_e,{name:"location",value:h.location,onChange:b,placeholder:"Location",required:!0}),d.jsx(_e,{name:"priceRange",value:h.priceRange,onChange:b,placeholder:"Price Range (e.g., 800K - 1.4M)",required:!0}),d.jsx(_e,{name:"rating",type:"number",step:"0.1",min:"0",max:"5",value:h.rating,onChange:b,placeholder:"Rating",required:!0}),d.jsx(Vv,{name:"universityId",value:h.universityId,onChange:b,children:a.map(E=>d.jsx("option",{value:E.id,children:E.name},E.id))})]}),d.jsx(no,{name:"description",value:h.description,onChange:b,placeholder:"Description",required:!0}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold mb-2",children:"Amenities"}),d.jsx("div",{className:"mb-3",children:(()=>{const E=[{name:"Wifi",icon:"fas fa-wifi"},{name:"Swimming Pool",icon:"fas fa-water"},{name:"Laundry",icon:"fas fa-tshirt"},{name:"Parking",icon:"fas fa-parking"},{name:"Canteen",icon:"fa fa-shopping-bag"},{name:"Security",icon:"fas fa-shield-alt"},{name:"Restaurant",icon:"fas fa-utensils"},{name:"Study Area",icon:"fas fa-book"},{name:"TV",icon:"fas fa-tv"},{name:"Shuttle",icon:"fas fa-bus"},{name:"Girls Only",icon:"fa fa-female"},{name:"Boys Only",icon:"fa fa-male"},{name:"Mixed",icon:"fa fa-users"},{name:"Gym",icon:"fa fa-dumbbell"}],C=M=>(h.amenities||[]).some(D=>D.name===M),N=M=>{const D=h.amenities||[],k=D.findIndex(q=>q.name===M.name);if(k>=0){const q=D.filter((z,L)=>L!==k);y({...h,amenities:q})}else y({...h,amenities:[...D,{name:M.name,icon:M.icon}]})};return d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:E.map(M=>d.jsxs("button",{type:"button",onClick:()=>N(M),className:`flex items-center gap-3 p-2 rounded-md border transition-colors text-sm text-gray-700 ${C(M.name)?"bg-unistay-yellow text-unistay-navy border-unistay-yellow":"bg-white hover:bg-gray-50"}`,children:[d.jsx("i",{className:`${M.icon} w-5 text-lg`}),d.jsx("span",{children:M.name})]},M.name))})})()}),d.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(h.amenities||[]).map((E,C)=>d.jsxs("div",{className:"flex items-center gap-2 bg-white border rounded-full px-3 py-1 text-sm shadow-sm",children:[d.jsx("i",{className:`${E.icon} text-sm`}),d.jsx("span",{className:"whitespace-nowrap",children:E.name}),d.jsx("button",{type:"button",onClick:()=>w(C),className:"ml-1 text-red-500 hover:text-red-700",children:d.jsx("i",{className:"fas fa-times"})})]},`${E.name}-${C}`))}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(_e,{id:"customAmenityName",placeholder:"Custom amenity (e.g., Rooftop)"}),d.jsxs(St,{onClick:()=>{const E=document.getElementById("customAmenityName");if(!E)return;const C=E.value.trim();C&&(y({...h,amenities:[...h.amenities||[],{name:C,icon:"fas fa-check"}]}),E.value="")},className:"bg-unistay-yellow text-unistay-navy hover:bg-yellow-400",children:[d.jsx("i",{className:"fas fa-plus mr-2"}),"Add Amenity"]})]})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{id:"isRecommended",name:"isRecommended",type:"checkbox",checked:h.isRecommended,onChange:b,className:"h-4 w-4 text-unistay-yellow focus:ring-unistay-yellow border-gray-300 rounded"}),d.jsx("label",{htmlFor:"isRecommended",className:"ml-2 text-sm font-medium text-gray-700",children:"Mark as Recommended"})]}),d.jsxs("div",{className:"flex gap-2 justify-end pt-4 border-t",children:[d.jsx(St,{onClick:i,className:"bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Cancel"}),d.jsxs(St,{type:"submit",loading:l,children:[n?"Update":"Add"," Hostel"]})]})]})};function X1({title:n,items:e,handler:i,columns:a,FormComponent:l,universities:r=[],onDataChange:c}){const[h,y]=F.useState(null),[g,x]=F.useState(!1),[b,w]=F.useState(!1),[S,E]=F.useState(null),{notify:C}=Za(),N=L=>{y(L),x(!1)},M=async L=>{if(window.confirm("Are you sure you want to delete this item?")){E(L);try{await i.remove(L),C({message:"Item deleted successfully!",type:"success"}),c()}catch($){C({message:$,type:"error"})}finally{E(null)}}},D=()=>{y(null),x(!0)},k=()=>{y(null),x(!1)},z={onSubmit:async L=>{w(!0);try{L.id?(await i.update(L.id,L),C({message:"Item updated successfully!",type:"success"})):(await i.add(L),C({message:"Item added successfully!",type:"success"})),c(),k()}catch($){C({message:$,type:"error"})}finally{w(!1)}},onCancel:k,item:h,isSubmitting:b,...r.length>0&&{universities:r}};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-unistay-navy",children:n}),d.jsxs(St,{onClick:D,className:"bg-unistay-yellow text-unistay-navy hover:bg-yellow-400",disabled:b||S!==null,children:[d.jsx("i",{className:"fas fa-plus mr-2"}),"Add New"]})]}),(g||h)&&d.jsx(l,{...z}),d.jsx("div",{className:"bg-white shadow rounded-lg overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[a.map(L=>d.jsx("th",{className:"p-4 font-semibold text-sm",children:L.header},L.header)),d.jsx("th",{className:"p-4 font-semibold text-sm text-right",children:"Actions"})]})}),d.jsx("tbody",{children:e.map(L=>d.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-gray-50",children:[a.map($=>d.jsx("td",{className:"p-4 text-sm text-gray-700 align-top",children:typeof L[$.accessor]=="boolean"?L[$.accessor]?d.jsx("span",{className:"flex items-center justify-center",children:d.jsx("i",{className:"fas fa-star text-unistay-yellow"})}):d.jsx("span",{className:"flex items-center justify-center",children:d.jsx("i",{className:"fas fa-minus text-gray-300"})}):L[$.accessor]},$.accessor)),d.jsx("td",{className:"p-4 text-right",children:d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(gy,{icon:"fa-pencil-alt",onClick:()=>N(L)}),d.jsx(gy,{icon:"fa-trash",onClick:()=>M(L.id),colorClass:"text-red-500 hover:text-red-700",loading:S===L.id})]})})]},L.id))})]})})]})}const W1=({onExitAdminMode:n,content:e,onDataChange:i})=>{const[a,l]=F.useState("Dashboard"),[r,c]=F.useState({hostels:0,news:0,events:0,jobs:0,roommateProfiles:0}),[h,y]=F.useState(!0);F.useEffect(()=>{(async()=>{if(a==="Dashboard"){y(!0);try{const[S,E,C,N,M]=await Promise.all([dd.getCounts(),fd.getCounts(),hd.getCounts(),md.getCounts(),Ul.getCounts()]);c({hostels:S,news:E,events:C,jobs:N,roommateProfiles:M})}catch{c({hostels:0,news:0,events:0,jobs:0,roommateProfiles:0})}finally{y(!1)}}})()},[a]);const g={Hostels:{title:"Manage Hostels",items:e.hostels.items,handler:e.hostels.handler,columns:[{header:"Name",accessor:"name"},{header:"University",accessor:"universityId"},{header:"Price Range",accessor:"priceRange"},{header:"Recommended",accessor:"isRecommended"}],FormComponent:Q1,universities:e.hostels.universities},News:{title:"Manage News",items:e.news.items,handler:e.news.handler,columns:[{header:"Title",accessor:"title"},{header:"Source",accessor:"source"},{header:"Featured",accessor:"featured"}],FormComponent:F1},Events:{title:"Manage Events",items:e.events.items,handler:e.events.handler,columns:[{header:"Title",accessor:"title"},{header:"Date",accessor:"date"},{header:"Location",accessor:"location"}],FormComponent:$1},Jobs:{title:"Manage Jobs",items:e.jobs.items,handler:e.jobs.handler,columns:[{header:"Title",accessor:"title"},{header:"Company",accessor:"company"},{header:"Deadline",accessor:"deadline"}],FormComponent:J1},Spotlights:{title:"Manage Student Spotlights",items:e.spotlights?.items||[],handler:e.spotlights?.handler,columns:[{header:"Name",accessor:"name"},{header:"Major",accessor:"major"},{header:"University",accessor:"universityId"},{header:"Gender",accessor:"gender"},{header:"Votes",accessor:"votes"}],FormComponent:Y1,universities:e.hostels.universities},LostFound:{title:"Manage Lost & Found",items:e.lostFound?.items||[],handler:e.lostFound?.handler,columns:[{header:"Title",accessor:"title"},{header:"Category",accessor:"category"},{header:"Posted By",accessor:"postedBy"},{header:"Phone",accessor:"phone"},{header:"Date",accessor:"timestamp"}],FormComponent:K1}},x={Dashboard:"fa-tachometer-alt",Hostels:"fa-hotel",News:"fa-newspaper",Events:"fa-calendar-alt",Jobs:"fa-briefcase",Spotlights:"fa-star",LostFound:"fa-search"},b=["Dashboard","Hostels","News","Events","Jobs","Spotlights","LostFound"];return d.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[d.jsxs("aside",{className:"w-64 bg-unistay-navy text-white flex flex-col p-4",children:[d.jsx("div",{className:"text-center py-4 mb-6",children:d.jsx("h1",{className:"text-3xl font-extrabold",children:"Admin"})}),d.jsx("nav",{className:"flex-grow",children:b.map(w=>d.jsxs("button",{onClick:()=>l(w),className:`w-full text-left px-4 py-3 my-1 rounded-lg transition-colors flex items-center gap-3 ${a===w?"bg-unistay-yellow text-unistay-navy font-bold":"hover:bg-white/10"}`,children:[d.jsx("i",{className:`fas ${x[w]} w-5`}),w]},w))}),d.jsx("div",{className:"pt-4 border-t border-white/20",children:d.jsxs("button",{onClick:n,className:"w-full text-left px-4 py-3 rounded-lg hover:bg-white/10 transition-colors flex items-center gap-3",children:[d.jsx("i",{className:"fas fa-arrow-left w-5"}),"Back to Site"]})})]}),d.jsx("main",{className:"flex-1 p-8 overflow-y-auto",children:a==="Dashboard"?d.jsx(z1,{stats:r,isLoading:h}):d.jsx(X1,{...g[a],onDataChange:i})})]})},Il=({icon:n,label:e,value:i})=>d.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center gap-4",children:[d.jsx("div",{className:"bg-unistay-yellow/20 text-unistay-navy rounded-full h-12 w-12 flex items-center justify-center flex-shrink-0",children:d.jsx("i",{className:`fas ${n} text-xl`})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-500",children:e}),d.jsx("p",{className:"text-lg font-bold text-unistay-navy truncate",children:i})]})]}),Z1=({user:n,savedHostels:e,onSignOut:i,onToggleSaveHostel:a,profile:l,universities:r,onNavigate:c,onDataChange:h,confessions:y=[],confessionHandler:g})=>{const[x,b]=F.useState(!1),[w,S]=F.useState(""),[E,C]=F.useState(!1),N=F.useRef(null),{notify:M}=Za(),D=L=>{if(!L)return"Not Set";const $=r.find(ie=>ie.id===L);return $?$.name:"Unknown University"},k=()=>{N.current?.click()},q=async L=>{const $=L.target.files?.[0];if(!(!$||!n)){b(!0);try{await Ya.updateProfilePhoto(n.id,$),M({message:"Profile photo updated successfully!",type:"success"}),h()}catch(ie){M({message:ie,type:"error"})}finally{b(!1),N.current&&(N.current.value="")}}},z=async L=>{if(L.preventDefault(),!(!w.trim()||!g)){C(!0);try{await g.add(w.trim()),S(""),M({message:"Your confession has been posted anonymously!",type:"success"})}catch{M({message:"Failed to post confession",type:"error"})}finally{C(!1)}}};return d.jsxs("div",{className:"bg-gray-100 min-h-screen",children:[d.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:d.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20",children:[d.jsx("h1",{className:"text-3xl font-bold text-unistay-navy",children:"My Profile"}),d.jsxs("button",{onClick:()=>c("main"),className:"font-semibold text-unistay-navy hover:text-unistay-yellow transition-colors flex items-center gap-2",children:[d.jsx("i",{className:"fas fa-arrow-left"}),"Back to Home"]})]})}),d.jsxs("main",{className:"max-w-5xl mx-auto p-4 sm:p-6 lg:p-8 pt-8",children:[d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 animate-fade-in-up",children:[d.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 text-center",children:[d.jsx("input",{type:"file",ref:N,onChange:q,className:"hidden",accept:"image/png, image/jpeg",disabled:x}),d.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-4 group",children:[d.jsx("button",{onClick:k,disabled:x,className:"w-full h-full rounded-full bg-unistay-yellow flex items-center justify-center font-bold text-unistay-navy text-5xl disabled:cursor-not-allowed","aria-label":"Change profile photo",children:l?.imageUrl?d.jsx("img",{src:l.imageUrl,alt:n.name||"",className:"w-full h-full rounded-full object-cover"}):n.name?.charAt(0).toUpperCase()}),x?d.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-full flex items-center justify-center",children:d.jsx(Tt,{color:"white",size:"lg"})}):d.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:k,children:d.jsx("i",{className:"fas fa-camera text-white text-3xl"})})]}),d.jsx("h2",{className:"text-2xl font-bold text-unistay-navy",children:n.name}),d.jsx("p",{className:"text-gray-500",children:n.email}),d.jsx("button",{onClick:()=>c("roommateFinder"),className:"mt-6 w-full bg-unistay-navy text-white font-bold py-2 px-6 rounded-full hover:bg-opacity-90 transition-colors",children:l?"Edit Roommate Profile":"Create Roommate Profile"})]}),d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[d.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-4",children:"Account"}),d.jsxs("button",{onClick:i,className:"w-full text-left px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg transition-colors flex items-center gap-3",children:[d.jsx("i",{className:"fas fa-sign-out-alt w-5"}),"Logout"]})]})]}),d.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[d.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-4",children:"My Student Details"}),l?d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsx(Il,{icon:"fa-university",label:"University",value:D(l?.universityId)}),d.jsx(Il,{icon:"fa-book",label:"Course",value:l.course||"Not Set"}),d.jsx(Il,{icon:"fa-calendar-day",label:"Year of Study",value:l.yearOfStudy?.toString()||"Not Set"}),d.jsx(Il,{icon:"fa-wallet",label:"Budget",value:`UGX ${l.budget?.toLocaleString()||"0"}`})]}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx("i",{className:"fas fa-user-graduate text-4xl text-gray-300 mb-4"}),d.jsx("p",{className:"text-gray-600",children:"You haven't created a roommate profile yet."}),d.jsx("button",{onClick:()=>c("roommateFinder"),className:"mt-4 font-bold text-unistay-navy hover:text-unistay-yellow",children:"Create one now to find matches!"})]})]}),d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[d.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-4",children:"Quick Links"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("button",{onClick:()=>c("roommateFinder"),className:"flex items-center justify-between w-full p-4 rounded-lg hover:bg-gray-50 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("i",{className:"fas fa-users text-unistay-navy"}),d.jsx("span",{className:"font-semibold",children:"My Roommate Matches"})]}),d.jsx("i",{className:"fas fa-chevron-right text-gray-400"})]}),e.length>0?d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex items-center justify-between px-4",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("i",{className:"fas fa-heart text-unistay-navy"}),d.jsxs("span",{className:"font-semibold",children:["Saved Hostels (",e.length,")"]})]})}),d.jsx("div",{className:"space-y-2 px-4",children:e.map(L=>d.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-gray-50",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-unistay-navy",children:L.name}),d.jsx("p",{className:"text-sm text-gray-600",children:L.priceRange})]}),d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("button",{onClick:()=>a(L.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-full",title:"Remove from saved",children:d.jsx("i",{className:"fas fa-heart"})})})]},L.id))})]}):d.jsx("div",{className:"flex items-center justify-between w-full p-4 rounded-lg hover:bg-gray-50 transition-colors",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("i",{className:"far fa-heart text-unistay-navy"}),d.jsx("span",{className:"font-semibold",children:"No Saved Hostels"})]})}),d.jsxs("button",{className:"flex items-center justify-between w-full p-4 rounded-lg hover:bg-gray-50 transition-colors cursor-not-allowed opacity-60",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("i",{className:"fas fa-file-alt text-unistay-navy"}),d.jsx("span",{className:"font-semibold",children:"My Job Applications"})]}),d.jsx("i",{className:"fas fa-chevron-right text-gray-400"})]})]})]})]})]}),d.jsxs("div",{className:"mt-8 space-y-8",children:[d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[d.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-4",children:" Share an Anonymous Confession"}),d.jsxs("form",{onSubmit:z,className:"space-y-4",children:[d.jsx("textarea",{value:w,onChange:L=>S(L.target.value),placeholder:"Share your thoughts anonymously... Keep it positive and respectful!",maxLength:250,rows:4,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-unistay-yellow focus:border-transparent resize-none",disabled:E}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("span",{className:"text-xs text-gray-500",children:[w.length,"/250 characters"]}),d.jsx("button",{type:"submit",disabled:!w.trim()||E,className:"bg-unistay-navy text-white font-bold py-2 px-6 rounded-lg hover:bg-opacity-90 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2",children:E?d.jsxs(d.Fragment,{children:[d.jsx(Tt,{color:"white",size:"sm"}),"Posting..."]}):d.jsxs(d.Fragment,{children:[d.jsx("i",{className:"fas fa-paper-plane"}),"Post Confession"]})})]})]})]}),y.length>0&&d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[d.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-4",children:"Recent Confessions"}),d.jsx("div",{className:"space-y-4",children:y.slice(0,5).map(L=>d.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-purple-200",children:[d.jsx("p",{className:"text-gray-800 italic",children:L.content}),d.jsxs("div",{className:"flex items-center justify-between mt-3",children:[d.jsxs("span",{className:"text-xs text-gray-500",children:[new Date(L.timestamp).toLocaleDateString(),"  ",new Date(L.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),d.jsx("div",{className:"flex items-center gap-4",children:d.jsxs("button",{className:"text-sm text-purple-600 hover:text-purple-800 transition-colors flex items-center gap-1",children:[d.jsx("i",{className:"fas fa-heart"})," ",L.reactions]})})]})]},L.id))})]})]})]})]})},eR=()=>{const{notifications:n,removeNotification:e}=Za(),i={success:"fa-check-circle",error:"fa-exclamation-circle",info:"fa-info-circle"},a={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"};return d.jsxs("div",{className:"fixed top-5 right-5 z-[200] w-full max-w-sm space-y-3",children:[n.map(l=>d.jsxs("div",{className:`relative flex items-start gap-4 p-4 rounded-lg shadow-2xl text-white ${a[l.type]}`,style:{animation:"slideInLeft 0.3s ease-out forwards"},children:[d.jsx("div",{className:"flex-shrink-0 pt-0.5",children:d.jsx("i",{className:`fas ${i[l.type]} text-xl`})}),d.jsx("div",{className:"flex-1",children:d.jsx("p",{className:"font-bold text-sm leading-snug",children:l.message})}),d.jsx("button",{onClick:()=>e(l.id),className:"p-1 rounded-full hover:bg-white/20 transition-colors","aria-label":"Close notification",children:d.jsx("i",{className:"fas fa-times text-sm"})})]},l.id)),d.jsx("style",{children:`
          @keyframes slideInLeft {
            from { 
              opacity: 0; 
              transform: translateX(100%); 
            }
            to { 
              opacity: 1; 
              transform: translateX(0); 
            }
          }
      `})]})},tR=()=>{const[n,e]=F.useState("main"),[i,a]=F.useState(Yt[0]),[l,r]=F.useState(null),[c,h]=F.useState(null),[y,g]=F.useState(!1),[x,b]=F.useState(!0),[w,S]=F.useState(()=>{try{const Y=localStorage.getItem("unistay_saved_hostels");return Y?new Set(JSON.parse(Y)):new Set}catch{return new Set}}),[E,C]=F.useState([]),[N,M]=F.useState([]),[D,k]=F.useState([]),[q,z]=F.useState([]),[L,$]=F.useState([]),[ie,X]=F.useState([]),[he,qe]=F.useState([{id:"1",title:"Pizza Hut Discount",description:"Get 30% off on your first order with student ID",discount:30,imageUrl:"https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?w=400&h=300&fit=crop",postedBy:"John Doe",timestamp:new Date(Date.now()-7200*1e3).toISOString()},{id:"2",title:"Gym Membership Special",description:"Student gym membership at half price for 3 months",discount:50,imageUrl:"https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=400&h=300&fit=crop",postedBy:"Jane Smith",timestamp:new Date(Date.now()-3600*1e3).toISOString()},{id:"3",title:"Movie Tickets",description:"Student discount on weekday movie tickets",discount:25,imageUrl:"https://images.unsplash.com/photo-1598899134739-24c46f58b8c0?w=400&h=300&fit=crop",postedBy:"Admin",timestamp:new Date(Date.now()-14400*1e3).toISOString()}]),[ce,Ze]=F.useState([{id:"1",title:"Lost: Blue Backpack",description:"Lost near the library on Monday. Contains laptop and textbooks.",category:"lost",imageUrl:"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=400&h=300&fit=crop",postedBy:"Sarah Johnson",phone:"+234 (0) 810 123 4567",timestamp:new Date(Date.now()-1440*60*1e3).toISOString()},{id:"2",title:"Found: Black Wallet",description:"Found in the cafeteria. Contains ID and some cards. Contact to claim.",category:"found",imageUrl:"https://images.unsplash.com/photo-1548036328-c9fa89d128fa?w=400&h=300&fit=crop",postedBy:"Michael Chen",phone:"+234 (0) 805 987 6543",timestamp:new Date(Date.now()-360*60*1e3).toISOString()}]),[Qt,dt]=F.useState([{id:"1",name:"Emma Wilson",major:"Computer Science",bio:"Emma is a 3rd year student passionate about web development and AI. She's the president of the tech club and loves mentoring junior students.",imageUrl:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=300&fit=crop",universityId:"123e4567-e89b-12d3-a456-426614174001",date:"Today",votes:87,gender:"female",isWinner:!0},{id:"2",name:"David Okonkwo",major:"Business Administration",bio:"David is an entrepreneur and student leader. He founded a successful campus startup and is always ready to collaborate on new projects.",imageUrl:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop",universityId:"123e4567-e89b-12d3-a456-426614174002",date:"Today",votes:72,gender:"male",isWinner:!0},{id:"3",name:"Aaisha Patel",major:"Environmental Science",bio:"Aaisha leads campus sustainability initiatives and organizes environmental awareness campaigns. Her passion for green living inspires her peers.",imageUrl:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop",universityId:"123e4567-e89b-12d3-a456-426614174003",date:"Today",votes:45,gender:"female",isWinner:!1},{id:"4",name:"Chisom Nwankwo",major:"Arts & Literature",bio:"Chisom is an award-winning writer and organizer of literary events on campus. She brings creativity and culture to student life.",imageUrl:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=300&fit=crop",universityId:"123e4567-e89b-12d3-a456-426614174004",date:"Today",votes:38,gender:"female",isWinner:!1},{id:"5",name:"Tunde Adeyemi",major:"Sports Management",bio:"Tunde is the captain of the university football team and promotes wellness through sports. His leadership keeps the team unified and motivated.",imageUrl:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop",universityId:"123e4567-e89b-12d3-a456-426614174005",date:"Today",votes:34,gender:"male",isWinner:!1},{id:"6",name:"Kolade Adebayo",major:"Engineering",bio:"Kolade is a brilliant engineering student who leads innovation projects. He's known for his problem-solving skills and team spirit.",imageUrl:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop",universityId:"123e4567-e89b-12d3-a456-426614174006",date:"Today",votes:28,gender:"male",isWinner:!1}]),B={add:async Y=>{const ae={...Y,id:`spotlight-${Date.now()}`,gender:Y.gender||"other",universityId:Y.universityId||Yt[0].id,votes:0,isWinner:!1};dt(re=>[ae,...re])},update:async Y=>{dt(ae=>ae.map(re=>re.id===Y.id?{...re,...Y,gender:Y.gender||"other",universityId:Y.universityId||Yt[0].id}:re))},remove:async Y=>{dt(ae=>ae.filter(re=>re.id!==Y))}},[J,te]=F.useState([{id:"1",content:"I finally finished my project before the deadline and it feels amazing! ",timestamp:new Date(Date.now()-1800*1e3).toISOString(),likes:127,dislikes:2,comments:[],userLikeStatus:null},{id:"2",content:"Campus coffee shop makes the best cappuccino. That's where I spend most of my study sessions.",timestamp:new Date(Date.now()-7200*1e3).toISOString(),likes:89,dislikes:5,comments:[],userLikeStatus:null},{id:"3",content:"Sometimes I miss home but the friends I've made here make up for it ",timestamp:new Date(Date.now()-300*60*1e3).toISOString(),likes:234,dislikes:1,comments:[],userLikeStatus:null}]),Ne={add:async Y=>{const ae={id:`confession-${Date.now()}`,content:Y,timestamp:new Date().toISOString(),likes:0,dislikes:0,comments:[],userLikeStatus:null};te(re=>[ae,...re])},remove:async Y=>{te(ae=>ae.filter(re=>re.id!==Y))},like:async(Y,ae)=>{te(re=>re.map(Te=>{if(Te.id===Y){let Be=1,mt=0;return ae==="like"?Be=-1:ae==="dislike"&&(mt=-1),{...Te,likes:Math.max(0,Te.likes+Be),dislikes:Math.max(0,Te.dislikes+mt),userLikeStatus:ae==="like"?null:"like"}}return Te}))},dislike:async(Y,ae)=>{te(re=>re.map(Te=>{if(Te.id===Y){let Be=1,mt=0;return ae==="dislike"?Be=-1:ae==="like"&&(mt=-1),{...Te,likes:Math.max(0,Te.likes+mt),dislikes:Math.max(0,Te.dislikes+Be),userLikeStatus:ae==="dislike"?null:"dislike"}}return Te}))},addComment:async(Y,ae,re)=>{te(Te=>Te.map(Be=>Be.id===Y?{...Be,comments:[...Be.comments,{id:`comment-${Date.now()}`,userId:void 0,userName:re||"Anonymous",content:ae,timestamp:new Date().toISOString()}]}:Be))}},Ie={add:async Y=>{const ae={...Y,id:`lostfound-${Date.now()}`,timestamp:new Date().toISOString()};Ze(re=>[ae,...re])},update:async Y=>{Ze(ae=>ae.map(re=>re.id===Y.id?{...re,...Y}:re))},remove:async Y=>{Ze(ae=>ae.filter(re=>re.id!==Y))}};F.useEffect(()=>{let Y=!0;const ae=async()=>{try{const{data:{session:Te}}=await $e.auth.getSession(),Be=Gl(Te?.user||null);Y&&(h(Be),g(Be?.email==="admin@unistay.com"||Be?.email==="victorbaguma34@gmail.com"),Be||(S(new Set),C([])),await et(),b(!1))}catch{Y&&b(!1)}},{data:{subscription:re}}=$e.auth.onAuthStateChange(async(Te,Be)=>{const mt=Gl(Be?.user||null);Y&&(h(mt),g(mt?.email==="admin@unistay.com"||mt?.email==="victorbaguma34@gmail.com"||mt?.email==="drilebaroy33@gmail.com"),mt||(S(new Set),C([])))});return ae(),()=>{Y=!1,re.unsubscribe()}},[]),F.useEffect(()=>{try{localStorage.setItem("unistay_saved_hostels",JSON.stringify(Array.from(w)))}catch{}},[w]),F.useEffect(()=>{if(c&&!x&&E.length===0){const Y=ie.find(re=>re.id===c?.id),ae=[];D.length>0&&ae.push({id:`notif-news-${D[0].id}`,type:"news",message:`New article posted: "${D[0].title}"`,timestamp:new Date(new Date().getTime()-1e3*60*3),read:!1}),L.length>0&&ae.push({id:`notif-job-${L[0].id}`,type:"job",message:`New opportunity: ${L[0].title} at ${L[0].company}`,timestamp:new Date(new Date().getTime()-1e3*60*60*1),read:!1}),ie.length>1&&Y&&ae.push({id:`notif-roommate-${Date.now()}`,type:"roommate",message:"You have new potential roommate matches!",timestamp:new Date(new Date().getTime()-1e3*60*60*5),read:!1}),C(ae.sort((re,Te)=>Te.timestamp.getTime()-re.timestamp.getTime()))}},[c,x,D,L,ie]);const et=async()=>{const[Y,ae,re,Te,Be]=await Promise.all([dd.getAll(),fd.getAll(),hd.getAll(),md.getAll(),Ul.getAll()]);M(Y),k(ae),z(re),$(Te),X(Be)},De=Y=>r(Y),ye=()=>r(null),Je=async Y=>{await Ul.set(Y);const ae=await Ul.getAll();X(ae)},Se=Y=>{Y==="admin"&&y?e("admin"):Y!=="admin"&&e(Y),window.scrollTo(0,0)},Xt=Y=>{if(!c){Se("auth");return}S(ae=>{const re=new Set(ae);return re.has(Y)?re.delete(Y):re.add(Y),re})},Bi=()=>{Se("main")},di=async()=>{await Ya.logout(),Se("auth")},In=()=>{C(Y=>Y.map(ae=>({...ae,read:!0})))};if(x)return d.jsx("div",{className:"flex items-center justify-center h-screen bg-unistay-bg",children:d.jsx(Tt,{size:"lg"})});const Js=n==="main";return d.jsx(PC,{children:d.jsxs("div",{className:`bg-white font-sans antialiased ${Js?"pt-20":""}`,children:[d.jsx(Mb,{}),d.jsx(eR,{}),d.jsx(Ub,{onNavigate:Se,currentView:n,user:c,isAdmin:y,onLogout:di,notifications:E,onMarkNotificationsAsRead:In}),d.jsxs("main",{children:[n==="main"&&d.jsxs(d.Fragment,{children:[d.jsx(jb,{hostels:N,onHostelSelect:De}),d.jsx(qb,{universities:Yt,selectedUniversity:i,onSelectUniversity:a,hostels:N,onViewHostel:De,savedHostelIds:w,onToggleSave:Xt}),d.jsx(Jb,{news:D,events:q,jobs:L,universities:Yt,onNavigateToBlog:()=>Se("blog"),onNavigateToEvents:()=>Se("events"),onNavigateToJobs:()=>Se("jobs"),user:c,onNavigate:Se,deals:he,lostItems:ce,studentSpotlights:Qt,confessions:J,confessionHandler:Ne}),d.jsx(LC,{services:HC,selectedUniversity:i})]}),n==="blog"&&d.jsx(iN,{news:D,onNavigateHome:()=>Se("main")}),n==="events"&&d.jsx(aN,{events:q,onNavigateHome:()=>Se("main")}),n==="jobs"&&d.jsx(lN,{jobs:L,onNavigateHome:()=>Se("main")}),n==="roommateFinder"&&c&&d.jsx(tN,{currentUser:c,currentUserProfile:ie.find(Y=>Y.id===c.id)||null,onProfileUpdate:Je,profiles:ie,universities:Yt,onNavigateHome:()=>Se("main")}),n==="auth"&&d.jsx(L1,{onAuthSuccess:Bi,onNavigateHome:()=>Se("main")}),n==="admin"&&y&&d.jsx(W1,{onExitAdminMode:()=>Se("main"),content:{hostels:{items:N,handler:P1,universities:Yt},news:{items:D,handler:q1},events:{items:q,handler:B1},jobs:{items:L,handler:V1},roommateProfiles:{items:ie},spotlights:{items:Qt,handler:B},lostFound:{items:ce,handler:Ie}},onDataChange:et}),n==="profile"&&c&&d.jsx(Z1,{user:c,profile:ie.find(Y=>Y.id===c.id),onNavigate:Se,onSignOut:di,universities:Yt,onDataChange:et,savedHostels:Array.from(w).map(Y=>N.find(ae=>ae.id===Y)).filter(Boolean),onToggleSaveHostel:Xt,confessions:J,confessionHandler:Ne})]}),l&&d.jsx(VC,{hostel:l,onClose:ye}),n!=="admin"&&n!=="auth"&&n!=="roommateFinder"&&n!=="profile"&&d.jsxs(d.Fragment,{children:[d.jsx(qC,{}),d.jsx(BC,{onNavigateToRoommateFinder:()=>Se("roommateFinder"),onNavigateToBlog:()=>Se("blog"),onNavigateToAuth:()=>Se("auth"),user:c})]})]})})},Hv=document.getElementById("root");if(!Hv)throw new Error("Could not find root element to mount to");const nR=bb.createRoot(Hv);nR.render(d.jsx(Ls.StrictMode,{children:d.jsx(tR,{})}));
